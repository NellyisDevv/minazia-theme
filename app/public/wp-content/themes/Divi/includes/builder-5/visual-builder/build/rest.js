!function(){var t={33042:function(t,e,r){var n;!function(){"use strict";var s=function t(e){var r,n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),s={use_static:!1};function o(t){var e=Object.getPrototypeOf(t);return e?Object.create(e):{}}function i(t,e,r){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!1,value:r})}function a(t,e){i(t,e,(function(){throw new g("The "+e+" method cannot be invoked on an Immutable data structure.")}))}"object"!=typeof(r=e)||Array.isArray(r)||null===r||void 0!==e.use_static&&(s.use_static=Boolean(e.use_static));var c="__immutable_invariants_hold";function u(t){return"object"!=typeof t||(null===t||Boolean(Object.getOwnPropertyDescriptor(t,c)))}function p(t,e){return t===e||t!=t&&e!=e}function d(t){return!(null===t||"object"!=typeof t||Array.isArray(t)||t instanceof Date)}var l=["setPrototypeOf"],f=l.concat(["push","pop","sort","splice","shift","unshift","reverse"]),h=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),y=l.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function g(t){this.name="MyError",this.message=t,this.stack=(new Error).stack}function v(t,e){for(var r in i(t,c,!0),e)e.hasOwnProperty(r)&&a(t,e[r]);return Object.freeze(t),t}function m(t,e){var r=t[e];i(t,e,(function(){return q(r.apply(t,arguments))}))}function b(t,e,r){var n=r&&r.deep;if(t in this&&(n&&this[t]!==e&&d(e)&&d(this[t])&&(e=q.merge(this[t],e,{deep:!0,mode:"replace"})),p(this[t],e)))return this;var s=I.call(this);return s[t]=q(e),S(s)}g.prototype=new Error,g.prototype.constructor=Error;var w=q([]);function _(t,e,r){var n=t[0];if(1===t.length)return b.call(this,n,e,r);var s,o=t.slice(1),i=this[n];if("object"==typeof i&&null!==i)s=q.setIn(i,o,e);else{var a=o[0];s=""!==a&&isFinite(a)?_.call(w,o,e):C.call(N,o,e)}if(n in this&&i===s)return this;var c=I.call(this);return c[n]=s,S(c)}function S(t){for(var e in h){if(h.hasOwnProperty(e))m(t,h[e])}s.use_static||(i(t,"flatMap",O),i(t,"asObject",E),i(t,"asMutable",I),i(t,"set",b),i(t,"setIn",_),i(t,"update",B),i(t,"updateIn",G),i(t,"getIn",M));for(var r=0,n=t.length;r<n;r++)t[r]=q(t[r]);return v(t,f)}function T(){return new Date(this.getTime())}function O(t){if(0===arguments.length)return this;var e,r=[],n=this.length;for(e=0;e<n;e++){var s=t(this[e],e,this);Array.isArray(s)?r.push.apply(r,s):r.push(s)}return S(r)}function P(t){if(void 0===t&&0===arguments.length)return this;if("function"!=typeof t){var e=Array.isArray(t)?t.slice():Array.prototype.slice.call(arguments);e.forEach((function(t,e,r){"number"==typeof t&&(r[e]=t.toString())})),t=function(t,r){return-1!==e.indexOf(r)}}var r=o(this);for(var n in this)this.hasOwnProperty(n)&&!1===t(this[n],n)&&(r[n]=this[n]);return H(r)}function I(t){var e,r,n=[];if(t&&t.deep)for(e=0,r=this.length;e<r;e++)n.push(A(this[e]));else for(e=0,r=this.length;e<r;e++)n.push(this[e]);return n}function E(t){"function"!=typeof t&&(t=function(t){return t});var e,r={},n=this.length;for(e=0;e<n;e++){var s=t(this[e],e,this),o=s[0],i=s[1];r[o]=i}return H(r)}function A(t){return!t||"object"!=typeof t||!Object.getOwnPropertyDescriptor(t,c)||t instanceof Date?t:q.asMutable(t,{deep:!0})}function j(t,e){for(var r in t)Object.getOwnPropertyDescriptor(t,r)&&(e[r]=t[r]);return e}function L(t,e){if(0===arguments.length)return this;if(null===t||"object"!=typeof t)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(t));var r,n,s=Array.isArray(t),i=e&&e.deep,a=e&&e.mode||"merge",c=e&&e.merger;function u(t,n,s){var a,u=q(n[s]),l=c&&c(t[s],u,e),f=t[s];void 0===r&&void 0===l&&t.hasOwnProperty(s)&&p(u,f)||(p(f,a=void 0!==l?l:i&&d(f)&&d(u)?q.merge(f,u,e):u)&&t.hasOwnProperty(s)||(void 0===r&&(r=j(t,o(t))),r[s]=a))}function l(t,e){for(var n in t)e.hasOwnProperty(n)||(void 0===r&&(r=j(t,o(t))),delete r[n])}if(s)for(var f=0,h=t.length;f<h;f++){var y=t[f];for(n in y)y.hasOwnProperty(n)&&u(void 0!==r?r:this,y,n)}else{for(n in t)Object.getOwnPropertyDescriptor(t,n)&&u(this,t,n);"replace"===a&&l(this,t)}return void 0===r?this:H(r)}function R(t,e){var r=e&&e.deep;if(0===arguments.length)return this;if(null===t||"object"!=typeof t)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(t));return q.merge(this,t,{deep:r,mode:"replace"})}var D,x,k,N=q({});function C(t,e,r){if(!Array.isArray(t)||0===t.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var n=t[0];if(1===t.length)return $.call(this,n,e,r);var s,i=t.slice(1),a=this[n];if(s=this.hasOwnProperty(n)&&"object"==typeof a&&null!==a?q.setIn(a,i,e):C.call(N,i,e),this.hasOwnProperty(n)&&a===s)return this;var c=j(this,o(this));return c[n]=s,H(c)}function $(t,e,r){var n=r&&r.deep;if(this.hasOwnProperty(t)&&(n&&this[t]!==e&&d(e)&&d(this[t])&&(e=q.merge(this[t],e,{deep:!0,mode:"replace"})),p(this[t],e)))return this;var s=j(this,o(this));return s[t]=q(e),H(s)}function B(t,e){var r=Array.prototype.slice.call(arguments,2),n=this[t];return q.set(this,t,e.apply(n,[n].concat(r)))}function U(t,e){for(var r=0,n=e.length;null!=t&&r<n;r++)t=t[e[r]];return r&&r==n?t:void 0}function G(t,e){var r=Array.prototype.slice.call(arguments,2),n=U(this,t);return q.setIn(this,t,e.apply(n,[n].concat(r)))}function M(t,e){var r=U(this,t);return void 0===r?e:r}function F(t){var e,r=o(this);if(t&&t.deep)for(e in this)this.hasOwnProperty(e)&&(r[e]=A(this[e]));else for(e in this)this.hasOwnProperty(e)&&(r[e]=this[e]);return r}function J(){return{}}function H(t){return s.use_static||(i(t,"merge",L),i(t,"replace",R),i(t,"without",P),i(t,"asMutable",F),i(t,"set",$),i(t,"setIn",C),i(t,"update",B),i(t,"updateIn",G),i(t,"getIn",M)),v(t,l)}function q(t,e,r){if(u(t)||function(t){return"object"==typeof t&&null!==t&&(60103===t.$$typeof||t.$$typeof===n)}(t)||function(t){return"undefined"!=typeof File&&t instanceof File}(t)||function(t){return"undefined"!=typeof Blob&&t instanceof Blob}(t)||function(t){return t instanceof Error}(t))return t;if(function(t){return"object"==typeof t&&"function"==typeof t.then}(t))return t.then(q);if(Array.isArray(t))return S(t.slice());if(t instanceof Date)return o=new Date(t.getTime()),s.use_static||i(o,"asMutable",T),v(o,y);var o,a=e&&e.prototype,c=(a&&a!==Object.prototype?function(){return Object.create(a)}:J)();if(null==r&&(r=64),r<=0)throw new g("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var p in r-=1,t)Object.getOwnPropertyDescriptor(t,p)&&(c[p]=q(t[p],void 0,r));return H(c)}function V(t){return function(){var e=[].slice.call(arguments),r=e.shift();return t.apply(r,e)}}function z(t,e){return function(){var r=[].slice.call(arguments),n=r.shift();return Array.isArray(n)?e.apply(n,r):t.apply(n,r)}}return q.from=q,q.isImmutable=u,q.ImmutableError=g,q.merge=V(L),q.replace=V(R),q.without=V(P),q.asMutable=(D=F,x=I,k=T,function(){var t=[].slice.call(arguments),e=t.shift();return Array.isArray(e)?x.apply(e,t):e instanceof Date?k.apply(e,t):D.apply(e,t)}),q.set=z($,b),q.setIn=z(C,_),q.update=V(B),q.updateIn=V(G),q.getIn=V(M),q.flatMap=V(O),q.asObject=V(E),s.use_static||(q.static=t({use_static:!0})),Object.freeze(q),q}();void 0===(n=function(){return s}.call(e,r,e,t))||(t.exports=n)}()}},e={};function r(n){var s=e[n];if(void 0!==s)return s.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};!function(){"use strict";r.r(n),r.d(n,{abort:function(){return a},batchFetch:function(){return G},fail:function(){return i},fetch:function(){return $},inProgress:function(){return s},loggedFetch:function(){return M},registerAjaxStore:function(){return Z},success:function(){return o},useFetch:function(){return tt}});var t={};r.r(t),r.d(t,{addLog:function(){return l},resetState:function(){return f},setBatchLog:function(){return h},setInProgress:function(){return y},setLog:function(){return g},syncToServer:function(){return v},updateBatchLog:function(){return m},updateLog:function(){return b}});var e={};r.r(e),r.d(e,{getLastLog:function(){return K},getLog:function(){return W},getLogs:function(){return Q},getUrl:function(){return X},isInProgress:function(){return Y}});const s="In Progress",o="Success",i="Fail",a="Abort";var c=r(33042),u=r.n(c),p=window.divi.data,d=window.divi.middleware;const l=(t,e,r)=>({type:"ADD_LOG",ajaxAction:t,requestData:e,responseData:r}),f=()=>({type:"RESET_STATE"}),h=(t,e,r,n)=>({type:"SET_BATCH_LOG",id:t,route:e,data:r,status:n}),y=(t,e)=>({type:"SET_ON_PROGRESS",ajaxAction:t,isInProgress:e}),g=(t,e,r,n,s)=>({type:"SET_LOG",route:t,data:e,response:r,status:n,batchId:s}),v=({syncType:t})=>({type:"SYNC_TO_SERVER",syncType:t}),m=(t,e,r,n)=>({type:"UPDATE_BATCH_LOG",id:t,route:e,data:r,status:n}),b=(t,e,r,n,s)=>({type:"UPDATE_LOG",route:t,data:e,response:r,status:n,batchId:s});var w,_=window.vendor.React,S=window.vendor.wp.hooks,T=window.vendor.wp.i18n,O=new Uint8Array(16);function P(){if(!w&&!(w="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return w(O)}var I=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var E=function(t){return"string"==typeof t&&I.test(t)},A=[],j=0;j<256;++j)A.push((j+256).toString(16).substr(1));var L=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(A[t[e+0]]+A[t[e+1]]+A[t[e+2]]+A[t[e+3]]+"-"+A[t[e+4]]+A[t[e+5]]+"-"+A[t[e+6]]+A[t[e+7]]+"-"+A[t[e+8]]+A[t[e+9]]+"-"+A[t[e+10]]+A[t[e+11]]+A[t[e+12]]+A[t[e+13]]+A[t[e+14]]+A[t[e+15]]).toLowerCase();if(!E(r))throw TypeError("Stringified UUID is invalid");return r};var R=function(t,e,r){var n=(t=t||{}).random||(t.rng||P)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(var s=0;s<16;++s)e[r+s]=n[s];return e}return L(n)};var D=window.lodash;const x=(t,e)=>{-1!==t.indexOf("?")&&(t=t.substring(0,t.indexOf("?"))),t=(0,D.trimEnd)(t,"/");const r=(0,D.keys)((0,p.select)("divi/settings").getSetting(["nonces"])).find((e=>{e=(0,D.trimEnd)(e,"/");const r=t===e,n=e.includes("?P<")&&new RegExp(`^${e}$`).test(t);return r||n}));return r?(0,p.select)("divi/settings").getSetting(["nonces",r,e]):null},k=(t,e,r,n)=>{const s=Boolean(e),o=n&&n instanceof FormData,i=n&&"object"==typeof n,a=(0,D.flow)((t=>s?(t=>({...t,Accept:"application/json, */*;q=0.1"}))(t):t),(t=>!o&&i?(t=>({...t,"Content-Type":"application/json"}))(t):t),(t=>s?((t,e,r)=>(0,D.keys)(t).find((t=>"x-et-nonce"===t.toLowerCase()))?t:{...t,"X-ET-Nonce":x(e,r),"X-WP-Nonce":(0,p.select)("divi/settings").getSetting(["nonces","wp_rest","ALL"],"")})(t,e,r):t))(t);return a},N=async()=>{try{const t=(await window.fetch(window.location.href,{method:"HEAD"})).headers.get("link"),e=/<([^>]+)>; rel="https:\/\/api\.w\.org\/"/.exec(t);if(!e)throw new Error(`Failed to discover REST API endpoint. Link header: ${t}`);const[,r]=e;return(0,D.trimEnd)(r,"/")}catch(t){return console.log(t),""}},C=async(t,e,r,n)=>{const s=n&&"object"==typeof n,o=Boolean(e),i=await(0,D.cond)([[(0,D.constant)(o&&s&&"GET"===r),async()=>{const t=await N(),r=((t,e,r)=>{const n=(0,D.mapValues)(t,(t=>(0,D.toString)(t))),s=`${e}?${new URLSearchParams(n).toString()}`;return-1!==r.indexOf("?")?s.replace("?","&"):s})(n,e,t);return new URL(`${t}${r}`)}],[(0,D.constant)(o),async()=>{const t=await N();return new URL(`${t}${e}`)}],[(0,D.constant)(!o),async()=>new URL(t)]])();return i.href},$=async t=>{const{url:e,restRoute:r,parseResponse:n=!0,data:s,body:o,headers:i,method:a,timeout:c,responseType:u="json",signal:p,onDownloadProgress:d,...l}=t,f=new AbortController,h=f.signal;p&&p.addEventListener("abort",(()=>{f.abort()}),{once:!0});const y=c?window.setTimeout((()=>{f.abort()}),c):0,g=k(i,r,a,s),v=((t,e,r)=>e&&e instanceof FormData?e:"GET"!==r&&"HEAD"!==r&&e&&"object"==typeof e?JSON.stringify(e):t)(o,s,a),m=await C(e,r,a,s);return window.fetch(m,{...l,method:a,headers:g,body:v,signal:h}).then((t=>(y&&window.clearTimeout(y),t.ok?"stream"===u?new Response(((t,e,r)=>{const n=t.body.getReader();let s=0;const o=+t.headers.get("Content-Length");return new ReadableStream({start:t=>{const e=()=>{n.read().then((({done:n,value:i})=>{n?t.close():(s+=i.byteLength,r&&r(s/o*100),t.enqueue(i),e())})).catch((e=>{t.error(e)}))};e()},cancel:()=>e.abort()})})(t,f,d),{headers:t.headers}):t:Promise.reject(t)))).then((t=>n?t.json?t.json():Promise.reject(t):t))},B=(t,e)=>{if(!t.data)return;const r=e.route??t.route,n=e.status??t.status,s=e.batchId??t.batchId,o=e.response??t.response;(0,p.dispatch)("divi/rest").updateLog(r,t.data,o,n,s)},U=(t,e,r,n)=>{const s=e.result??t,o={route:n.route,batchId:n.batchId,status:r};if(!e.result||i===r){const t=i?e:new Error((0,T.sprintf)((0,T.__)('No "result" property found from the response for REST API endpoint %s',"et_builder"),n.route));o.status=i,o.response=Promise.reject(t)}((t,e)=>{t.forEach((t=>B(t,e)))})(s,o),(0,p.dispatch)("divi/rest").updateBatchLog(n.batchId,n.route,n.batchData,r)},G=async(t,e)=>new Promise(((r,n)=>{const a=1e3,c=e&&e>a?e:1e4,u=Math.round(c/a);let d,l=1;const f=(e=1e3,a=u)=>{d&&clearTimeout(d),d=setTimeout((()=>{const c=(0,p.select)("divi/rest").getLastLog(t.restRoute,t.data);if(!c)return n(new Error((0,T.sprintf)((0,T.__)("No log found of REST API endpoint %1$s with data %2$s","et_builder"),t.restRoute,JSON.stringify(t.data))));if([o,i].includes(c.status))return clearTimeout(d),o===c.status?r(c.response):n(c.response);if(c.batchId)return l>=a&&(B(c,{response:Promise.reject(new Error((0,T.sprintf)((0,T.__)("Failed to resolve request for REST API endpoint %s due to request time out.","et_builder"),c.route))),status:i}),e=0,a=0),l++,f(e,a);const u=(0,p.select)("divi/rest").getLogs(t.restRoute,!1,s),h=u.length>1,y={...t},g=R(),v=[],m={batchData:v,batchId:g,route:t.restRoute};if(h){const e=[];u.forEach((t=>{const r={...t.data},n=JSON.stringify(r);e.includes(n)||(v.push(r),e.push(n)),B(t,{batchId:g})})),y.restRoute=`${y.restRoute}/batch`,y.method="POST",y.data={data:v},m.batchData=v,(0,p.dispatch)("divi/rest").setBatchLog(g,t.restRoute,v,s)}return $(y).then((t=>{h?U(u,t,o,m):B(c,{response:Promise.resolve(t),status:o}),f(0,0)})).catch((t=>{h?U(u,t,i,m):B(c,{response:Promise.reject(t),status:i}),f(0,0)})),!0}),e)};f()})),M=async(t,e,r,n)=>{let a={};t.data instanceof FormData?t.data.forEach(((t,e)=>{a[e]=t})):a=t.data;const c=(0,p.select)("divi/rest").getLastLog(t.restRoute,a);if(!e&&c&&s!==c.status)return c.response;(0,p.dispatch)("divi/rest").setLog(t.restRoute,t.data,Promise.resolve(),s);return(r?G(t,n):$(t)).then((e=>((0,p.dispatch)("divi/rest").updateLog(t.restRoute,t.data,e,o),e))).catch((e=>((0,p.dispatch)("divi/rest").updateLog(t.restRoute,t.data,e,i),e)))};let F;const J={SYNC_TO_SERVER:[t=>{if((0,p.select)("divi/rest").isInProgress(`sync-to-server--${t.syncType}`))return;const e=(0,p.select)("divi/settings").getSetting(["post","id"]),r=(0,p.select)("divi/settings").getSetting(["conditionalTags"]),n=(0,p.select)("divi/settings").getSetting(["layout","type"]),s=(0,p.select)("divi/page-settings").getSettings(),o=(0,p.select)("divi/settings").getSetting(["version"]),i=(0,p.select)("divi/app-preferences").getAll(),a=(0,p.select)("divi/app-ui").getWindow("width","top"),c=(0,p.select)("divi/app-ui").getWindow("height","top"),u=(0,p.select)("divi/app-ui").getElementProperty({elementName:"adminBar",propertyGroup:"dimension",propertyName:"height"}),d=(0,p.select)("divi/app-ui").getElementProperty({elementName:"pageBar",propertyGroup:"dimension",propertyName:"height"}),l=(0,p.select)("divi/app-ui").getElementProperty({elementName:"sidebarRight",propertyGroup:"dimension",propertyName:"width"}),f=(0,p.select)("divi/app-ui").getElementProperty({elementName:"sidebarLeft",propertyGroup:"dimension",propertyName:"width"}),h=(0,S.hasAction)("et.builder.content.change"),y=(t=>{switch(t.syncType){case"draft":return{postStatus:"draft",postType:t.postType};case"preview":return{postStatus:t.postStatus,postType:"revision"};default:return{postStatus:"publish",postType:t.postType}}})({syncType:t.syncType,postType:(0,p.select)("divi/settings").getSetting(["post","type"]),postStatus:(0,p.select)("divi/settings").getSetting(["post","status"])}),g={post_id:e,post_status:y.postStatus,layout_type:n,et_post_type:y.postType,return_to_default_editor:!1,options:{status:y.postStatus,conditional_tags:r,post_type:y.postType,return_rendered_content:h},unsyncedGlobalSettings:"none",et_builder_mode:"vb",et_builder_version:o,ab_testing:{is_clear_stats:!1},preferences:i,pageSettings:s,content:{post_content:(0,p.select)("divi/serialized-post").getState(["postContent","content"]),header:(0,p.select)("divi/serialized-post").getState(["header","content"]),body:(0,p.select)("divi/serialized-post").getState(["body","content"]),footer:(0,p.select)("divi/serialized-post").getState(["footer","content"])},syncType:t.syncType},v=()=>{const e=(0,T.__)("Your Save Has Failed","et_builder"),r=[(0,_.createElement)("p",{key:"p1"},(0,T.__)("An error has occurred while saving your page. Various problems can cause a save to fail, such as a lack of server resources, firewall blockages, plugin conflicts or server misconfiguration. You can try saving again by clicking Try Again, or you can download a backup of your unsaved page by clicking Download Backup. Backups can be restored using the portability system while next editing your page.","et_builder")),(0,_.createElement)("p",{key:"p2"},(0,T.__)("Contacting your host and asking them to increase the following PHP variables may help: memory_limit, max_execution_time, upload_max_filesize, post_max_size, max_input_time, max_input_vars. In addition, auditing your firewall error log (such as ModSecurity) may reveal false positives that are preventing saves from completing.","et_builder")),(0,_.createElement)("p",{key:"p3"},(0,T.__)("Lastly, it is recommended that you temporarily disable all WordPress plugins and browser extensions and try to save again to determine if something is causing a conflict.","et_builder"))];(0,p.dispatch)("divi/modal-library").open({name:"divi/alert",offset:{top:(c-u-d-400)/2,left:(a-f-l-650)/2},dimension:{width:650,height:400},attributes:{title:e,content:r,footerButtons:[{name:"primary",label:(0,T.__)("Try Again","et_builder"),onClick:e=>{e.preventDefault(),(0,p.dispatch)("divi/modal-library").close({name:"divi/alert"}),(0,p.dispatch)("divi/rest").syncToServer({syncType:t.syncType})}},{name:"secondary",label:(0,T.__)("Download Backup","et_builder"),onClick:t=>{t.preventDefault(),alert("@todo: Create backup functionality along with Portability feature.")}}]}})};(0,p.dispatch)("divi/rest").setInProgress("sync-to-server",!0),(0,p.dispatch)("divi/rest").setInProgress(`sync-to-server--${t.syncType}`,!0),M({method:"POST",restRoute:"/divi/v1/sync-to-server",data:g},!0).then((({save_verification:t,post_status:r,syncType:n,previewUrl:s})=>{if("preview"===n&&s&&(!F||F?.closed?F=window.open(s,`divi-preview-${e}`):F.location.href=s,F?.focus()),t){if(r){const t=(0,p.select)("divi/settings").getSetting(["post"]);(0,p.dispatch)("divi/settings").add("post",t.setIn(["status"],r))}(0,p.dispatch)("divi/history").setSavedState({content:g.content.post_content,settings:g.pageSettings})}else v()})).then((()=>{(0,p.dispatch)("divi/rest").setInProgress("sync-to-server",!1),(0,p.dispatch)("divi/rest").setInProgress(`sync-to-server--${t.syncType}`,!1)})).catch(v)}]};var H=window.moment,q=r.n(H);const V={log:[],logs:[],batchLogs:[],inProgress:{}},z=(t,e)=>{switch(e.type){case"SET_ON_PROGRESS":return t.setIn(["inProgress",e.ajaxAction],e.isInProgress);case"ADD_LOG":return t.setIn(["log"],(t=>t.push({ajaxAction:e.ajaxAction,requestData:e.requestData,responseData:e.responseData,timestamp:q()().unix()})));case"RESET_STATE":return t.merge(V);case"SET_LOG":return t.setIn(["logs",t.getIn(["logs"]).length],{route:e.route,data:e.data,response:e.response,status:e.status,batchId:e.batchId,timestamp:q()().valueOf()});case"UPDATE_LOG":{const r=(0,D.findLastIndex)(t.getIn(["logs"]),(t=>e.route===t.route&&JSON.stringify(e.data)===JSON.stringify(t.data)));return t.setIn(["logs",r],{route:e.route,data:e.data,response:e.response,status:e.status,batchId:e.batchId,timestamp:q()().valueOf()})}case"SET_BATCH_LOG":return t.setIn(["batchLogs",t.getIn(["batchLogs"]).length],{id:e.id,route:e.route,data:e.data,status:e.status,timestamp:q()().valueOf()});case"UPDATE_BATCH_LOG":{const r=(0,D.findLastIndex)(t.getIn(["batchLogs"]),(t=>e.route===t.route&&JSON.stringify(e.data)===JSON.stringify(t.data)));return t.setIn(["batchLogs",r],{id:e.id,route:e.route,data:e.data,status:e.status,timestamp:q()().valueOf()})}default:return t}},Y=(t,e)=>e?(0,D.isArray)(e)?(0,D.some)(e,(e=>t.getIn(["inProgress",e],!1))):t.getIn(["inProgress",e],!1):(0,D.some)((0,D.values)(t.getIn(["inProgress"])),(t=>t)),W=(t,e)=>t.getIn(["log"]).filter((t=>!e||t.ajaxAction===e)),X=t=>t.getIn(["url"]),K=(t,e,r,n,s)=>(0,D.findLast)(t.getIn(["logs"]),(t=>(!e||e===t.route)&&((!r||JSON.stringify(r)===JSON.stringify(t.data))&&((!n||n===t.status)&&(!s||s===t.batchId))))),Q=(t,e,r,n,s)=>t.getIn(["logs"]).filter((t=>(!e||e===t.route)&&((!r||JSON.stringify(r)===JSON.stringify(t.data))&&((!n||n===t.status)&&(!s||s===t.batchId))))),Z=()=>{if((0,p.select)("divi/rest"))return;const r=u()({url:(0,p.select)("divi/settings").getSetting(["urls","ajax"]),...V}),n=(0,p.registerStore)("divi/rest",{actions:t,reducer:z,selectors:e,initialState:r});(0,d.applyEffects)(n,J)},tt=(t=null,e=!1)=>{const[r,n]=(0,_.useState)(t),[s,o]=(0,_.useState)(e),i=new AbortController,{signal:a}=i,c=()=>{i.abort()};(0,_.useEffect)((()=>()=>{c()}),[]);return{fetch:async t=>{const{url:e,restRoute:r,parseResponse:s,data:i,body:c,headers:u,method:p,timeout:d,responseType:l,onDownloadProgress:f,forceRequest:h=!1,batchRequest:y=!1,...g}=t;return o(!0),M({url:e,restRoute:r,parseResponse:s,data:i,body:c,headers:u,method:p,timeout:d,responseType:l,onDownloadProgress:f,signal:a,...g},h,y).then((t=>(a.aborted||(o(!1),n(t)),t))).catch((t=>(o(!1),t.name,Promise.reject(t))))},response:r,abort:c,isLoading:s}}}(),(window.divi=window.divi||{}).rest=n}();