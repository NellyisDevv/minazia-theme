!function(){var t={33042:function(t,e,r){var n;!function(){"use strict";var o=function t(e){var r,n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o={use_static:!1};function i(t){var e=Object.getPrototypeOf(t);return e?Object.create(e):{}}function s(t,e,r){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!1,value:r})}function a(t,e){s(t,e,(function(){throw new v("The "+e+" method cannot be invoked on an Immutable data structure.")}))}"object"!=typeof(r=e)||Array.isArray(r)||null===r||void 0!==e.use_static&&(o.use_static=Boolean(e.use_static));var c="__immutable_invariants_hold";function l(t){return"object"!=typeof t||(null===t||Boolean(Object.getOwnPropertyDescriptor(t,c)))}function u(t,e){return t===e||t!=t&&e!=e}function p(t){return!(null===t||"object"!=typeof t||Array.isArray(t)||t instanceof Date)}var f=["setPrototypeOf"],d=f.concat(["push","pop","sort","splice","shift","unshift","reverse"]),y=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),h=f.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function v(t){this.name="MyError",this.message=t,this.stack=(new Error).stack}function b(t,e){for(var r in s(t,c,!0),e)e.hasOwnProperty(r)&&a(t,e[r]);return Object.freeze(t),t}function g(t,e){var r=t[e];s(t,e,(function(){return Y(r.apply(t,arguments))}))}function m(t,e,r){var n=r&&r.deep;if(t in this&&(n&&this[t]!==e&&p(e)&&p(this[t])&&(e=Y.merge(this[t],e,{deep:!0,mode:"replace"})),u(this[t],e)))return this;var o=A.call(this);return o[t]=Y(e),j(o)}v.prototype=new Error,v.prototype.constructor=Error;var w=Y([]);function O(t,e,r){var n=t[0];if(1===t.length)return m.call(this,n,e,r);var o,i=t.slice(1),s=this[n];if("object"==typeof s&&null!==s)o=Y.setIn(s,i,e);else{var a=i[0];o=""!==a&&isFinite(a)?O.call(w,i,e):D.call(z,i,e)}if(n in this&&s===o)return this;var c=A.call(this);return c[n]=o,j(c)}function j(t){for(var e in y){if(y.hasOwnProperty(e))g(t,y[e])}o.use_static||(s(t,"flatMap",M),s(t,"asObject",I),s(t,"asMutable",A),s(t,"set",m),s(t,"setIn",O),s(t,"update",x),s(t,"updateIn",R),s(t,"getIn",H));for(var r=0,n=t.length;r<n;r++)t[r]=Y(t[r]);return b(t,d)}function T(){return new Date(this.getTime())}function M(t){if(0===arguments.length)return this;var e,r=[],n=this.length;for(e=0;e<n;e++){var o=t(this[e],e,this);Array.isArray(o)?r.push.apply(r,o):r.push(o)}return j(r)}function S(t){if(void 0===t&&0===arguments.length)return this;if("function"!=typeof t){var e=Array.isArray(t)?t.slice():Array.prototype.slice.call(arguments);e.forEach((function(t,e,r){"number"==typeof t&&(r[e]=t.toString())})),t=function(t,r){return-1!==e.indexOf(r)}}var r=i(this);for(var n in this)this.hasOwnProperty(n)&&!1===t(this[n],n)&&(r[n]=this[n]);return V(r)}function A(t){var e,r,n=[];if(t&&t.deep)for(e=0,r=this.length;e<r;e++)n.push(P(this[e]));else for(e=0,r=this.length;e<r;e++)n.push(this[e]);return n}function I(t){"function"!=typeof t&&(t=function(t){return t});var e,r={},n=this.length;for(e=0;e<n;e++){var o=t(this[e],e,this),i=o[0],s=o[1];r[i]=s}return V(r)}function P(t){return!t||"object"!=typeof t||!Object.getOwnPropertyDescriptor(t,c)||t instanceof Date?t:Y.asMutable(t,{deep:!0})}function E(t,e){for(var r in t)Object.getOwnPropertyDescriptor(t,r)&&(e[r]=t[r]);return e}function k(t,e){if(0===arguments.length)return this;if(null===t||"object"!=typeof t)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(t));var r,n,o=Array.isArray(t),s=e&&e.deep,a=e&&e.mode||"merge",c=e&&e.merger;function l(t,n,o){var a,l=Y(n[o]),f=c&&c(t[o],l,e),d=t[o];void 0===r&&void 0===f&&t.hasOwnProperty(o)&&u(l,d)||(u(d,a=void 0!==f?f:s&&p(d)&&p(l)?Y.merge(d,l,e):l)&&t.hasOwnProperty(o)||(void 0===r&&(r=E(t,i(t))),r[o]=a))}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(void 0===r&&(r=E(t,i(t))),delete r[n])}if(o)for(var d=0,y=t.length;d<y;d++){var h=t[d];for(n in h)h.hasOwnProperty(n)&&l(void 0!==r?r:this,h,n)}else{for(n in t)Object.getOwnPropertyDescriptor(t,n)&&l(this,t,n);"replace"===a&&f(this,t)}return void 0===r?this:V(r)}function _(t,e){var r=e&&e.deep;if(0===arguments.length)return this;if(null===t||"object"!=typeof t)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(t));return Y.merge(this,t,{deep:r,mode:"replace"})}var C,B,F,z=Y({});function D(t,e,r){if(!Array.isArray(t)||0===t.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var n=t[0];if(1===t.length)return U.call(this,n,e,r);var o,s=t.slice(1),a=this[n];if(o=this.hasOwnProperty(n)&&"object"==typeof a&&null!==a?Y.setIn(a,s,e):D.call(z,s,e),this.hasOwnProperty(n)&&a===o)return this;var c=E(this,i(this));return c[n]=o,V(c)}function U(t,e,r){var n=r&&r.deep;if(this.hasOwnProperty(t)&&(n&&this[t]!==e&&p(e)&&p(this[t])&&(e=Y.merge(this[t],e,{deep:!0,mode:"replace"})),u(this[t],e)))return this;var o=E(this,i(this));return o[t]=Y(e),V(o)}function x(t,e){var r=Array.prototype.slice.call(arguments,2),n=this[t];return Y.set(this,t,e.apply(n,[n].concat(r)))}function N(t,e){for(var r=0,n=e.length;null!=t&&r<n;r++)t=t[e[r]];return r&&r==n?t:void 0}function R(t,e){var r=Array.prototype.slice.call(arguments,2),n=N(this,t);return Y.setIn(this,t,e.apply(n,[n].concat(r)))}function H(t,e){var r=N(this,t);return void 0===r?e:r}function G(t){var e,r=i(this);if(t&&t.deep)for(e in this)this.hasOwnProperty(e)&&(r[e]=P(this[e]));else for(e in this)this.hasOwnProperty(e)&&(r[e]=this[e]);return r}function L(){return{}}function V(t){return o.use_static||(s(t,"merge",k),s(t,"replace",_),s(t,"without",S),s(t,"asMutable",G),s(t,"set",U),s(t,"setIn",D),s(t,"update",x),s(t,"updateIn",R),s(t,"getIn",H)),b(t,f)}function Y(t,e,r){if(l(t)||function(t){return"object"==typeof t&&null!==t&&(60103===t.$$typeof||t.$$typeof===n)}(t)||function(t){return"undefined"!=typeof File&&t instanceof File}(t)||function(t){return"undefined"!=typeof Blob&&t instanceof Blob}(t)||function(t){return t instanceof Error}(t))return t;if(function(t){return"object"==typeof t&&"function"==typeof t.then}(t))return t.then(Y);if(Array.isArray(t))return j(t.slice());if(t instanceof Date)return i=new Date(t.getTime()),o.use_static||s(i,"asMutable",T),b(i,h);var i,a=e&&e.prototype,c=(a&&a!==Object.prototype?function(){return Object.create(a)}:L)();if(null==r&&(r=64),r<=0)throw new v("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var u in r-=1,t)Object.getOwnPropertyDescriptor(t,u)&&(c[u]=Y(t[u],void 0,r));return V(c)}function $(t){return function(){var e=[].slice.call(arguments),r=e.shift();return t.apply(r,e)}}function J(t,e){return function(){var r=[].slice.call(arguments),n=r.shift();return Array.isArray(n)?e.apply(n,r):t.apply(n,r)}}return Y.from=Y,Y.isImmutable=l,Y.ImmutableError=v,Y.merge=$(k),Y.replace=$(_),Y.without=$(S),Y.asMutable=(C=G,B=A,F=T,function(){var t=[].slice.call(arguments),e=t.shift();return Array.isArray(e)?B.apply(e,t):e instanceof Date?F.apply(e,t):C.apply(e,t)}),Y.set=J(U,m),Y.setIn=J(D,O),Y.update=$(x),Y.updateIn=$(R),Y.getIn=$(H),Y.flatMap=$(M),Y.asObject=$(I),o.use_static||(Y.static=t({use_static:!0})),Object.freeze(Y),Y}();void 0===(n=function(){return o}.call(e,r,e,t))||(t.exports=n)}()}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};!function(){"use strict";r.r(n),r.d(n,{extractGlobalColorIds:function(){return h},parseAttrsDefinitionFromFlatBlockInstances:function(){return b},parseAttrsDefinitionFromFlatModuleObjects:function(){return g},parseFlatModuleObjectIntoBlockArray:function(){return w},registerSerializedPostStore:function(){return k},replaceEscapedQuotes:function(){return O},serializeModuleFlatObjects:function(){return A}});var t={};r.r(t),r.d(t,{syncToServer:function(){return d}});var e={};r.r(e),r.d(e,{getState:function(){return P},getUsedGlobalColorIds:function(){return E}});var o=window.lodash,i=r(33042),s=r.n(i),a=window.divi.conversion,c=window.divi.data,l=window.divi.middleware,u=window.divi.moduleLibrary,p=window.divi.moduleUtils,f=window.divi.settings;const d=({syncType:t})=>({type:"SYNC_TO_SERVER",payload:{postContent:(0,c.select)("divi/edit-post").getContent()},syncType:t}),y={SYNC_TO_SERVER:[()=>{const t=(0,c.select)("divi/global-data").getGlobalColors();(0,c.dispatch)("divi/edit-post").syncModuleGlobalColors(t),(0,c.dispatch)("divi/edit-post").syncModuleInlineFont()},(t,e)=>{(0,c.dispatch)("divi/history").add("edit-post",t.type,"serialize-to-gb-button",e.getState());const r=e.getState();console.log("Content on divi/serialized-post store has changed into:"),console.log(r.postContent.content),console.log("NOTE: column is still failing to serialize itself and its content - to be fixed")},t=>{(0,c.dispatch)("divi/rest").syncToServer({syncType:t.syncType})}]},h=t=>{if(!(0,o.isString)(t))return[];const e=t.match(/gcid-([0-9a-z-]*)/g);return(0,o.uniq)(e)||[]},v=["serializerProps"],b=t=>{const e={};return t.forEach((({name:t,attributes:r})=>{const n={};(0,o.forEach)(r,((t,e)=>{if(-1===v.indexOf(e)){const r={type:(0,p.getAttributeValueType)(t)};n[e]=r}})),e[t]=(0,o.merge)({},e[t],n)})),e},g=t=>{const e={};return(0,o.forEach)(t,(({name:t,props:r})=>{const{attrs:n}=r;if(n){const r={};(0,o.forEach)(n,((t,e)=>{const n={type:(0,p.getAttributeValueType)(t)};r[e]=n})),e[t]=(0,o.merge)({},e[t],r)}})),e};var m=window.vendor.wp.hooks;const w=(t,e="root")=>{const r=e=>e.map((e=>{const{id:n,name:i,children:s,props:a}=(0,o.get)(t,e),c=(0,o.isEmpty)(s)?[]:r(s),l="divi/shortcode-module"===i,u=l&&a.innerHTML,p={attributes:{...a.attrs,...l&&{innerHTML:u}},clientId:n,innerBlocks:c,isValid:!0,name:i};return(0,m.applyFilters)("divi.serializedPost.parseFlatModuleObjectIntoBlockArray.nested",p)})),n=(t,e=[])=>((0,o.forEach)(t,(t=>{const r=(0,m.applyFilters)("divi.parseFlatModuleObjectIntoBlockArray.flat",t);e.push(r),(0,o.isEmpty)(r.innerBlocks)||n(r.innerBlocks,e)})),e),i=r((0,o.get)(t,[e,"children"],[]));return{nested:i,flat:n(i)}},O=t=>t.replace(/\{"[^}]+/g,(t=>t.replace(/\\\\u0022$/,'\\\\"')));var j=window.vendor.React,T=window.vendor.wp.blocks;const M=()=>(0,T.__unstableGetInnerBlocksProps)().children,S=t=>{const{attributes:e}=t;if(e?.globalModule){const r=(0,c.select)("divi/module-library").getModule("divi/global-layout");let n={};return(0,o.forEach)(e.unsyncAttrs,(t=>{const{attrName:r}=t,i=r.split("."),s=(0,o.get)(e,i),a=(0,o.set)({},i,s);n={...n,...a}})),{...t,name:r.name,innerBlocks:[],attributes:{globalModule:e.globalModule,unsyncAttrs:n}}}return t},A=(t,e="root")=>{t.root.isGlobal||(0,m.addFilter)("divi.serializedPost.parseFlatModuleObjectIntoBlockArray.nested","divi",S);const{nested:r,flat:n}=w(t,e);(0,m.removeFilter)("divi.serializedPost.parseFlatModuleObjectIntoBlockArray.nested","divi");const i=b(n),s=(0,c.select)("divi/module-library").getModules();(0,o.forEach)(s,((t,e)=>{(0,T.unregisterBlockType)(e);const{category:r,childrenName:n}=t,s=(0,o.merge)({},t.supports,{className:!1}),a=(0,o.merge)({},t.attributes,i[e]);"structure"===r||n?(0,T.registerBlockType)(e,{...t,supports:s,attributes:a,save:()=>(0,j.createElement)(M)}):"unsupported"===r?(0,T.registerBlockType)(e,{...t,supports:s,attributes:a,save:t=>(0,j.createElement)("",{dangerouslySetInnerHTML:{__html:t?.attributes?.innerHTML??""}})}):(0,T.registerBlockType)(e,{...t,supports:s,attributes:a,save:()=>null})}));const a=(0,T.serialize)([...r]);(0,o.forEach)(s,((t,e)=>{(0,T.unregisterBlockType)(e),(0,T.registerBlockType)(e,t)}));return(0,o.flow)([O,p.wrapPlaceholderBlock])(a)},I=(t,e)=>"SYNC_TO_SERVER"===e.type?t.setIn(["postContent","content"],A((0,o.get)(e,"payload.postContent",{}))):t,P=(t,e,r=null)=>{const n=(0,o.isArray)(e)?e:[e];return t.getIn(n,r)},E=t=>{const e=P(t,["postContent","content"]);return h(e)},k=()=>{if((0,c.select)("divi/settings")||(0,f.registerSettingsStore)(),(0,c.select)("divi/module-library")||(0,u.registerModuleLibraryStore)(),(0,c.select)("divi/serialized-post"))return;const r=(0,o.flow)([p.maybeUnwrapPlaceholderBlock,a.maybeConvertContent]),n=s()({postContent:{title:(0,c.select)("divi/settings").getSetting(["post","title"]),content:r((0,c.select)("divi/settings").getSetting(["post","content"]))}}),i=(0,c.registerStore)("divi/serialized-post",{actions:t,reducer:I,selectors:e,initialState:n});(0,l.applyEffects)(i,y)}}(),(window.divi=window.divi||{}).serializedPost=n}();