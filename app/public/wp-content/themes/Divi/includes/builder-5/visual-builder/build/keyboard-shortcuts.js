!function(){var t={33042:function(t,e,r){var n;!function(){"use strict";var i=function t(e){var r,n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),i={use_static:!1};function s(t){var e=Object.getPrototypeOf(t);return e?Object.create(e):{}}function o(t,e,r){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!1,value:r})}function a(t,e){o(t,e,(function(){throw new g("The "+e+" method cannot be invoked on an Immutable data structure.")}))}"object"!=typeof(r=e)||Array.isArray(r)||null===r||void 0!==e.use_static&&(i.use_static=Boolean(e.use_static));var u="__immutable_invariants_hold";function c(t){return"object"!=typeof t||(null===t||Boolean(Object.getOwnPropertyDescriptor(t,u)))}function l(t,e){return t===e||t!=t&&e!=e}function f(t){return!(null===t||"object"!=typeof t||Array.isArray(t)||t instanceof Date)}var h=["setPrototypeOf"],y=h.concat(["push","pop","sort","splice","shift","unshift","reverse"]),p=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),d=h.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function g(t){this.name="MyError",this.message=t,this.stack=(new Error).stack}function v(t,e){for(var r in o(t,u,!0),e)e.hasOwnProperty(r)&&a(t,e[r]);return Object.freeze(t),t}function b(t,e){var r=t[e];o(t,e,(function(){return $(r.apply(t,arguments))}))}function m(t,e,r){var n=r&&r.deep;if(t in this&&(n&&this[t]!==e&&f(e)&&f(this[t])&&(e=$.merge(this[t],e,{deep:!0,mode:"replace"})),l(this[t],e)))return this;var i=j.call(this);return i[t]=$(e),S(i)}g.prototype=new Error,g.prototype.constructor=Error;var w=$([]);function I(t,e,r){var n=t[0];if(1===t.length)return m.call(this,n,e,r);var i,s=t.slice(1),o=this[n];if("object"==typeof o&&null!==o)i=$.setIn(o,s,e);else{var a=s[0];i=""!==a&&isFinite(a)?I.call(w,s,e):R.call(C,s,e)}if(n in this&&o===i)return this;var u=j.call(this);return u[n]=i,S(u)}function S(t){for(var e in p){if(p.hasOwnProperty(e))b(t,p[e])}i.use_static||(o(t,"flatMap",O),o(t,"asObject",T),o(t,"asMutable",j),o(t,"set",m),o(t,"setIn",I),o(t,"update",W),o(t,"updateIn",x),o(t,"getIn",B));for(var r=0,n=t.length;r<n;r++)t[r]=$(t[r]);return v(t,y)}function k(){return new Date(this.getTime())}function O(t){if(0===arguments.length)return this;var e,r=[],n=this.length;for(e=0;e<n;e++){var i=t(this[e],e,this);Array.isArray(i)?r.push.apply(r,i):r.push(i)}return S(r)}function E(t){if(void 0===t&&0===arguments.length)return this;if("function"!=typeof t){var e=Array.isArray(t)?t.slice():Array.prototype.slice.call(arguments);e.forEach((function(t,e,r){"number"==typeof t&&(r[e]=t.toString())})),t=function(t,r){return-1!==e.indexOf(r)}}var r=s(this);for(var n in this)this.hasOwnProperty(n)&&!1===t(this[n],n)&&(r[n]=this[n]);return Y(r)}function j(t){var e,r,n=[];if(t&&t.deep)for(e=0,r=this.length;e<r;e++)n.push(D(this[e]));else for(e=0,r=this.length;e<r;e++)n.push(this[e]);return n}function T(t){"function"!=typeof t&&(t=function(t){return t});var e,r={},n=this.length;for(e=0;e<n;e++){var i=t(this[e],e,this),s=i[0],o=i[1];r[s]=o}return Y(r)}function D(t){return!t||"object"!=typeof t||!Object.getOwnPropertyDescriptor(t,u)||t instanceof Date?t:$.asMutable(t,{deep:!0})}function A(t,e){for(var r in t)Object.getOwnPropertyDescriptor(t,r)&&(e[r]=t[r]);return e}function M(t,e){if(0===arguments.length)return this;if(null===t||"object"!=typeof t)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(t));var r,n,i=Array.isArray(t),o=e&&e.deep,a=e&&e.mode||"merge",u=e&&e.merger;function c(t,n,i){var a,c=$(n[i]),h=u&&u(t[i],c,e),y=t[i];void 0===r&&void 0===h&&t.hasOwnProperty(i)&&l(c,y)||(l(y,a=void 0!==h?h:o&&f(y)&&f(c)?$.merge(y,c,e):c)&&t.hasOwnProperty(i)||(void 0===r&&(r=A(t,s(t))),r[i]=a))}function h(t,e){for(var n in t)e.hasOwnProperty(n)||(void 0===r&&(r=A(t,s(t))),delete r[n])}if(i)for(var y=0,p=t.length;y<p;y++){var d=t[y];for(n in d)d.hasOwnProperty(n)&&c(void 0!==r?r:this,d,n)}else{for(n in t)Object.getOwnPropertyDescriptor(t,n)&&c(this,t,n);"replace"===a&&h(this,t)}return void 0===r?this:Y(r)}function P(t,e){var r=e&&e.deep;if(0===arguments.length)return this;if(null===t||"object"!=typeof t)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(t));return $.merge(this,t,{deep:r,mode:"replace"})}var K,_,L,C=$({});function R(t,e,r){if(!Array.isArray(t)||0===t.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var n=t[0];if(1===t.length)return U.call(this,n,e,r);var i,o=t.slice(1),a=this[n];if(i=this.hasOwnProperty(n)&&"object"==typeof a&&null!==a?$.setIn(a,o,e):R.call(C,o,e),this.hasOwnProperty(n)&&a===i)return this;var u=A(this,s(this));return u[n]=i,Y(u)}function U(t,e,r){var n=r&&r.deep;if(this.hasOwnProperty(t)&&(n&&this[t]!==e&&f(e)&&f(this[t])&&(e=$.merge(this[t],e,{deep:!0,mode:"replace"})),l(this[t],e)))return this;var i=A(this,s(this));return i[t]=$(e),Y(i)}function W(t,e){var r=Array.prototype.slice.call(arguments,2),n=this[t];return $.set(this,t,e.apply(n,[n].concat(r)))}function N(t,e){for(var r=0,n=e.length;null!=t&&r<n;r++)t=t[e[r]];return r&&r==n?t:void 0}function x(t,e){var r=Array.prototype.slice.call(arguments,2),n=N(this,t);return $.setIn(this,t,e.apply(n,[n].concat(r)))}function B(t,e){var r=N(this,t);return void 0===r?e:r}function F(t){var e,r=s(this);if(t&&t.deep)for(e in this)this.hasOwnProperty(e)&&(r[e]=D(this[e]));else for(e in this)this.hasOwnProperty(e)&&(r[e]=this[e]);return r}function G(){return{}}function Y(t){return i.use_static||(o(t,"merge",M),o(t,"replace",P),o(t,"without",E),o(t,"asMutable",F),o(t,"set",U),o(t,"setIn",R),o(t,"update",W),o(t,"updateIn",x),o(t,"getIn",B)),v(t,h)}function $(t,e,r){if(c(t)||function(t){return"object"==typeof t&&null!==t&&(60103===t.$$typeof||t.$$typeof===n)}(t)||function(t){return"undefined"!=typeof File&&t instanceof File}(t)||function(t){return"undefined"!=typeof Blob&&t instanceof Blob}(t)||function(t){return t instanceof Error}(t))return t;if(function(t){return"object"==typeof t&&"function"==typeof t.then}(t))return t.then($);if(Array.isArray(t))return S(t.slice());if(t instanceof Date)return s=new Date(t.getTime()),i.use_static||o(s,"asMutable",k),v(s,d);var s,a=e&&e.prototype,u=(a&&a!==Object.prototype?function(){return Object.create(a)}:G)();if(null==r&&(r=64),r<=0)throw new g("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var l in r-=1,t)Object.getOwnPropertyDescriptor(t,l)&&(u[l]=$(t[l],void 0,r));return Y(u)}function z(t){return function(){var e=[].slice.call(arguments),r=e.shift();return t.apply(r,e)}}function H(t,e){return function(){var r=[].slice.call(arguments),n=r.shift();return Array.isArray(n)?e.apply(n,r):t.apply(n,r)}}return $.from=$,$.isImmutable=c,$.ImmutableError=g,$.merge=z(M),$.replace=z(P),$.without=z(E),$.asMutable=(K=F,_=j,L=k,function(){var t=[].slice.call(arguments),e=t.shift();return Array.isArray(e)?_.apply(e,t):e instanceof Date?L.apply(e,t):K.apply(e,t)}),$.set=H(U,m),$.setIn=H(R,I),$.update=z(W),$.updateIn=z(x),$.getIn=z(B),$.flatMap=z(O),$.asObject=z(T),i.use_static||($.static=t({use_static:!0})),Object.freeze($),$}();void 0===(n=function(){return i}.call(e,r,e,t))||(t.exports=n)}()}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,r),s.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};!function(){"use strict";r.r(n),r.d(n,{getPressedKeys:function(){return U},isKeyPressed:function(){return W},onKeydown:function(){return P},onKeyup:function(){return K},onWindowBlur:function(){return _},registerKeyboardShortcutsListeners:function(){return C},registerKeyboardShortcutsStore:function(){return R},registerShortcut:function(){return N},registerShortcuts:function(){return x},toggleShortcutListeners:function(){return B},unregisterShortcut:function(){return F},unregisterShortcuts:function(){return G}});var t={};r.r(t),r.d(t,{doShortcut:function(){return o},keyDown:function(){return a},keyUp:function(){return u},registerShortcut:function(){return c},resetDoShortcut:function(){return l},resetState:function(){return f},toggleShortcutListeners:function(){return h},unregisterShortcut:function(){return y},windowBlur:function(){return p}});var e={};r.r(e),r.d(e,{getCurrentShortcut:function(){return g},getMatchingShortcut:function(){return b},getPressedKeys:function(){return m},getShortcuts:function(){return S}});var i=window.divi.data,s=window.divi.middleware;const o=t=>({type:"DO",shortcut:t}),a=(t,e)=>({type:"KEYDOWN",physicalKeyCode:t,key:e}),u=(t,e)=>({type:"KEYUP",physicalKeyCode:t,key:e}),c=t=>({type:"REGISTER",shortcut:t}),l=()=>({type:"RESET_DO"}),f=()=>({type:"RESET_STATE"}),h=t=>({type:"TOGGLE_LISTENERS",enableListeners:t}),y=t=>({type:"UNREGISTER",name:t}),p=()=>({type:"WINDOW_BLUR"});var d=window.lodash;const g=t=>t.getIn(["do"]),v="--",b=(t,e)=>{e.sort();const r=t.getIn(["keymap",e.join(v)]);return!!r&&t.getIn(["registry",(0,d.last)(r)])},m=t=>t.getIn(["pressedKeys"]);var w=r(33042),I=r.n(w);const S=(t,e=!1)=>{let r=I()({});return"length"===e?(0,d.forEach)(t.registry,(t=>{r=r.setIn([`${t.keys.length}`,t.name],t)})):"category"===e?(0,d.forEach)(t.registry,(t=>{r=r.setIn([t.category,t.name],t)})):r=t.registry,r};let k;const O={KEYDOWN:(t,e)=>{const r=(0,d.values)(m(e.getState())),n=b(e.getState(),r);if(n){const t=n.getIn(["isEnabled"]);if((0,d.isFunction)(t)&&!t())return;(0,i.dispatch)("divi/keyboard-shortcuts").doShortcut(n)}},DO:(t,e)=>{const r=g(e.getState());(0,d.isFunction)(r.action)&&r.action(),clearTimeout(k),k=setTimeout((()=>{(0,d.isEqual)((0,i.select)("divi/keyboard-shortcuts").getCurrentShortcut(),r)&&(0,i.dispatch)("divi/keyboard-shortcuts").resetDoShortcut()}),500)}};var E=window.vendor.wp.i18n,j=window.divi.uiLibrary;const T=I()({enableListeners:!0,pressedKeys:{},pressedWithMeta:{},meta:!1,do:{},registry:{},keymap:{}}),D=(t,e)=>{const r=(0,j.isAppleOS)()||!0===window.etTestAppleKeyboard;switch(e.type){case"TOGGLE_LISTENERS":return t.setIn(["enableListeners"],e.enableListeners);case"KEYDOWN":return!0!==t.getIn(["enableListeners"])?t:(r&&"Meta"===e.key&&(t=t.set("meta",!0)),r&&!0===t.getIn(["meta"])&&(t=t.setIn(["pressedWithMeta",e.physicalKeyCode],e.key)),t.setIn(["pressedKeys",e.physicalKeyCode],e.key));case"KEYUP":if(!0!==t.getIn(["enableListeners"]))return t;if(r&&"Meta"===e.key){const e=(t=t.setIn(["meta"],!1)).getIn(["pressedWithMeta"]),r=(0,d.keys)(e);t=(t=t.setIn(["pressedKeys"],t.pressedKeys.without(((t,e)=>(0,d.includes)(r,e))))).setIn(["pressedWithMeta"],{})}return t.set("pressedKeys",t.pressedKeys.without(e.physicalKeyCode));case"WINDOW_BLUR":return r&&!0===t.getIn(["meta"])&&(t=t.setIn(["meta"],!1)),r&&!(0,d.isEmpty)(t.getIn(["pressedWithMeta"]))&&(t=t.setIn(["pressedWithMeta"],{})),t.setIn(["pressedKeys"],{});case"REGISTER":{const n=(0,d.get)(e,"shortcut"),i=(0,d.get)(n,"keys",[]).sort();if(t.getIn(["registry",n.name]))return console.error((0,E.__)("Shortcut name has to be unique. There is already existing shortcut using this name:","et_builder"),n.name),t;const s=i.join(v),o=t.getIn(["keymap",s]);return(0,d.isArray)(o)?(t=t.setIn(["keymap",s,o.length],n.name),r||(t=t.setIn(["keymap",s.replace("Meta","Control"),o.length],n.name))):(t=t.setIn(["keymap",s],[n.name]),r||(t=t.setIn(["keymap",s.replace("Meta","Control")],[n.name]))),t.setIn(["registry",n.name],n)}case"UNREGISTER":{const r=t.getIn(["registry",e.name]);if(!r)return t;const n=r.keys.asMutable().sort().join(v),i=t.getIn(["keymap",n]).length;if(1===i)t=t.setIn(["keymap"],t.keymap.without(n));else if(1<i){const r=t.getIn(["keymap",n]);t=t.setIn(["keymap",n],r.filter((t=>e.name!==t)))}return t.setIn(["registry"],t.registry.without(e.name))}case"DO":return!0!==t.getIn(["enableListeners"])?t:t.setIn(["do"],e.shortcut);case"RESET_DO":return t.setIn(["do"],{});case"RESET_STATE":return T;default:return t}};var A=window.jQuery,M=r.n(A);const P=t=>{const{code:e,keyCode:r,key:n}=t,s=M()(t.target).is("input, textarea")||M()(t.target).attr("contenteditable"),o=e||r.toString(),a=t.ctrlKey||t.metaKey,u=a&&"s"===n,c=a&&("="===n||"+"===n)||a&&"-"===n||u;if(s){a&&"Meta"===n&&(0,i.dispatch)("divi/keyboard-shortcuts").keyDown(o,n);const e="ArrowUp"===o||"ArrowDown"===o||"Enter"===o,r=e&&M()(t.target).parents(".et-vb-select-options-filter").length>0,s=e&&M()(t.target).is("#et-vb-field-input-text-et-vb-page-bar-responsive-select--zoom");if(!(r||s||c))return;u&&M()(t.target).trigger("blur")}c&&t.preventDefault(),(0,i.dispatch)("divi/keyboard-shortcuts").keyDown(o,n);const l=(0,i.select)("divi/keyboard-shortcuts").getCurrentShortcut(),f=l.getIn(["isEnabled"]);(0,d.isFunction)(f)&&!f()||l.getIn(["name"])&&t.preventDefault()},K=t=>{const{code:e,keyCode:r,key:n}=t,s=e||r.toString();(0,i.dispatch)("divi/keyboard-shortcuts").keyUp(s,n)},_=()=>{(0,i.dispatch)("divi/keyboard-shortcuts").windowBlur()};var L=window.divi.window;const C=()=>{const t={top:L.topWindow,app:window};(0,d.forEach)(t,(t=>{t.addEventListener("keydown",P),t.addEventListener("keyup",K),t.addEventListener("blur",_)}))},R=()=>{if((0,i.select)("divi/keyboard-shortcuts"))return;const r=(0,i.registerStore)("divi/keyboard-shortcuts",{actions:t,reducer:D,selectors:e,initialState:T});(0,s.applyEffects)(r,O)},U=()=>(0,d.values)((0,i.select)("divi/keyboard-shortcuts").getPressedKeys()),W=t=>{const e=U();if((0,d.isString)(t))return(0,d.includes)(e,t);if((0,d.isArray)(t)){const r=(0,d.intersection)(e,t);return t.length===r.length}return!1},N=t=>{(0,i.dispatch)("divi/keyboard-shortcuts").registerShortcut(t)},x=t=>{(0,d.forEach)(t,(t=>{N(t)}))},B=t=>{(0,i.dispatch)("divi/keyboard-shortcuts").toggleShortcutListeners(t)},F=t=>{(0,i.dispatch)("divi/keyboard-shortcuts").unregisterShortcut(t)},G=t=>{(0,d.forEach)(t,(t=>{F(t)}))}}(),(window.divi=window.divi||{}).keyboardShortcuts=n}();