!function(){var e={53316:function(e){function t(e,t,r,n){var o,s=null==(o=n)||"number"==typeof o||"boolean"==typeof o?n:r(n),a=t.get(s);return void 0===a&&(a=e.call(this,n),t.set(s,a)),a}function r(e,t,r){var n=Array.prototype.slice.call(arguments,3),o=r(n),s=t.get(o);return void 0===s&&(s=e.apply(this,n),t.set(o,s)),s}function n(e,t,r,n,o){return r.bind(t,e,n,o)}function o(e,o){return n(e,this,1===e.length?t:r,o.cache.create(),o.serializer)}function s(){return JSON.stringify(arguments)}function a(){this.cache=Object.create(null)}a.prototype.has=function(e){return e in this.cache},a.prototype.get=function(e){return this.cache[e]},a.prototype.set=function(e,t){this.cache[e]=t};var i={create:function(){return new a}};e.exports=function(e,t){var r=t&&t.cache?t.cache:i,n=t&&t.serializer?t.serializer:s;return(t&&t.strategy?t.strategy:o)(e,{cache:r,serializer:n})},e.exports.strategies={variadic:function(e,t){return n(e,this,r,t.cache.create(),t.serializer)},monadic:function(e,r){return n(e,this,t,r.cache.create(),r.serializer)}}},33042:function(e,t,r){var n;!function(){"use strict";var o=function e(t){var r,n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o={use_static:!1};function s(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function a(e,t,r){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:r})}function i(e,t){a(e,t,(function(){throw new E("The "+t+" method cannot be invoked on an Immutable data structure.")}))}"object"!=typeof(r=t)||Array.isArray(r)||null===r||void 0!==t.use_static&&(o.use_static=Boolean(t.use_static));var l="__immutable_invariants_hold";function u(e){return"object"!=typeof e||(null===e||Boolean(Object.getOwnPropertyDescriptor(e,l)))}function c(e,t){return e===t||e!=e&&t!=t}function d(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}var p=["setPrototypeOf"],m=p.concat(["push","pop","sort","splice","shift","unshift","reverse"]),f=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),g=p.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function E(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function b(e,t){for(var r in a(e,l,!0),t)t.hasOwnProperty(r)&&i(e,t[r]);return Object.freeze(e),e}function y(e,t){var r=e[t];a(e,t,(function(){return z(r.apply(e,arguments))}))}function _(e,t,r){var n=r&&r.deep;if(e in this&&(n&&this[e]!==t&&d(t)&&d(this[e])&&(t=z.merge(this[e],t,{deep:!0,mode:"replace"})),c(this[e],t)))return this;var o=h.call(this);return o[e]=z(t),S(o)}E.prototype=new Error,E.prototype.constructor=Error;var I=z([]);function v(e,t,r){var n=e[0];if(1===e.length)return _.call(this,n,t,r);var o,s=e.slice(1),a=this[n];if("object"==typeof a&&null!==a)o=z.setIn(a,s,t);else{var i=s[0];o=""!==i&&isFinite(i)?v.call(I,s,t):U.call(G,s,t)}if(n in this&&a===o)return this;var l=h.call(this);return l[n]=o,S(l)}function S(e){for(var t in f){if(f.hasOwnProperty(t))y(e,f[t])}o.use_static||(a(e,"flatMap",O),a(e,"asObject",A),a(e,"asMutable",h),a(e,"set",_),a(e,"setIn",v),a(e,"update",k),a(e,"updateIn",B),a(e,"getIn",F));for(var r=0,n=e.length;r<n;r++)e[r]=z(e[r]);return b(e,m)}function T(){return new Date(this.getTime())}function O(e){if(0===arguments.length)return this;var t,r=[],n=this.length;for(t=0;t<n;t++){var o=e(this[t],t,this);Array.isArray(o)?r.push.apply(r,o):r.push(o)}return S(r)}function P(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach((function(e,t,r){"number"==typeof e&&(r[t]=e.toString())})),e=function(e,r){return-1!==t.indexOf(r)}}var r=s(this);for(var n in this)this.hasOwnProperty(n)&&!1===e(this[n],n)&&(r[n]=this[n]);return $(r)}function h(e){var t,r,n=[];if(e&&e.deep)for(t=0,r=this.length;t<r;t++)n.push(C(this[t]));else for(t=0,r=this.length;t<r;t++)n.push(this[t]);return n}function A(e){"function"!=typeof e&&(e=function(e){return e});var t,r={},n=this.length;for(t=0;t<n;t++){var o=e(this[t],t,this),s=o[0],a=o[1];r[s]=a}return $(r)}function C(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,l)||e instanceof Date?e:z.asMutable(e,{deep:!0})}function N(e,t){for(var r in e)Object.getOwnPropertyDescriptor(e,r)&&(t[r]=e[r]);return t}function R(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var r,n,o=Array.isArray(e),a=t&&t.deep,i=t&&t.mode||"merge",l=t&&t.merger;function u(e,n,o){var i,u=z(n[o]),p=l&&l(e[o],u,t),m=e[o];void 0===r&&void 0===p&&e.hasOwnProperty(o)&&c(u,m)||(c(m,i=void 0!==p?p:a&&d(m)&&d(u)?z.merge(m,u,t):u)&&e.hasOwnProperty(o)||(void 0===r&&(r=N(e,s(e))),r[o]=i))}function p(e,t){for(var n in e)t.hasOwnProperty(n)||(void 0===r&&(r=N(e,s(e))),delete r[n])}if(o)for(var m=0,f=e.length;m<f;m++){var g=e[m];for(n in g)g.hasOwnProperty(n)&&u(void 0!==r?r:this,g,n)}else{for(n in e)Object.getOwnPropertyDescriptor(e,n)&&u(this,e,n);"replace"===i&&p(this,e)}return void 0===r?this:$(r)}function L(e,t){var r=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return z.merge(this,e,{deep:r,mode:"replace"})}var D,M,w,G=z({});function U(e,t,r){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var n=e[0];if(1===e.length)return j.call(this,n,t,r);var o,a=e.slice(1),i=this[n];if(o=this.hasOwnProperty(n)&&"object"==typeof i&&null!==i?z.setIn(i,a,t):U.call(G,a,t),this.hasOwnProperty(n)&&i===o)return this;var l=N(this,s(this));return l[n]=o,$(l)}function j(e,t,r){var n=r&&r.deep;if(this.hasOwnProperty(e)&&(n&&this[e]!==t&&d(t)&&d(this[e])&&(t=z.merge(this[e],t,{deep:!0,mode:"replace"})),c(this[e],t)))return this;var o=N(this,s(this));return o[e]=z(t),$(o)}function k(e,t){var r=Array.prototype.slice.call(arguments,2),n=this[e];return z.set(this,e,t.apply(n,[n].concat(r)))}function V(e,t){for(var r=0,n=t.length;null!=e&&r<n;r++)e=e[t[r]];return r&&r==n?e:void 0}function B(e,t){var r=Array.prototype.slice.call(arguments,2),n=V(this,e);return z.setIn(this,e,t.apply(n,[n].concat(r)))}function F(e,t){var r=V(this,e);return void 0===r?t:r}function x(e){var t,r=s(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(r[t]=C(this[t]));else for(t in this)this.hasOwnProperty(t)&&(r[t]=this[t]);return r}function W(){return{}}function $(e){return o.use_static||(a(e,"merge",R),a(e,"replace",L),a(e,"without",P),a(e,"asMutable",x),a(e,"set",j),a(e,"setIn",U),a(e,"update",k),a(e,"updateIn",B),a(e,"getIn",F)),b(e,p)}function z(e,t,r){if(u(e)||function(e){return"object"==typeof e&&null!==e&&(60103===e.$$typeof||e.$$typeof===n)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then(z);if(Array.isArray(e))return S(e.slice());if(e instanceof Date)return s=new Date(e.getTime()),o.use_static||a(s,"asMutable",T),b(s,g);var s,i=t&&t.prototype,l=(i&&i!==Object.prototype?function(){return Object.create(i)}:W)();if(null==r&&(r=64),r<=0)throw new E("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var c in r-=1,e)Object.getOwnPropertyDescriptor(e,c)&&(l[c]=z(e[c],void 0,r));return $(l)}function Y(e){return function(){var t=[].slice.call(arguments),r=t.shift();return e.apply(r,t)}}function J(e,t){return function(){var r=[].slice.call(arguments),n=r.shift();return Array.isArray(n)?t.apply(n,r):e.apply(n,r)}}return z.from=z,z.isImmutable=u,z.ImmutableError=E,z.merge=Y(R),z.replace=Y(L),z.without=Y(P),z.asMutable=(D=x,M=h,w=T,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?M.apply(t,e):t instanceof Date?w.apply(t,e):D.apply(t,e)}),z.set=J(j,_),z.setIn=J(U,v),z.update=Y(k),z.updateIn=Y(B),z.getIn=Y(F),z.flatMap=Y(O),z.asObject=Y(A),o.use_static||(z.static=e({use_static:!0})),Object.freeze(z),z}();void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)}()}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};!function(){"use strict";r.r(n),r.d(n,{GlobalDataStyle:function(){return tt},GlobalDataStyleContainer:function(){return rt},addDefaultPreset:function(){return P},addGlobalColor:function(){return _},addNewPreset:function(){return h},addNewPresetFromCurrentStyles:function(){return A},addPresetAttrsMapJob:function(){return B},assignPresetToDefault:function(){return C},clonePreset:function(){return N},closeConfirmationModal:function(){return R},closePresetModal:function(){return L},deleteGlobalColor:function(){return I},deleteModulePreset:function(){return D},editPresetAttribute:function(){return M},effects:function(){return Qe},endPresetEditSession:function(){return z},endSyncingPreset:function(){return q},generateDefaultPresetName:function(){return m},generateNanoUuid:function(){return p},generateNewPreset:function(){return f},getActiveConfirmationModal:function(){return pe},getAllPresetData:function(){return Be},getDefaultPresetOnSave:function(){return ke},getGlobalColorBasedOnCssVariable:function(){return De},getGlobalColorById:function(){return me},getGlobalColorIdFromValue:function(){return b},getGlobalColorLabel:function(){return Ne},getGlobalColorPalette:function(){return ge},getGlobalColorValue:function(){return Ie},getGlobalColors:function(){return Ee},getGlobalColorsByStatus:function(){return be},getGlobalColorsToExport:function(){return _e},getGlobalOrPreviewColorValue:function(){return We},getModuleDefaultPreset:function(){return Se},getModuleDefaultPresetID:function(){return ve},getModulePreset:function(){return Te},getModulePresets:function(){return Pe},getModulePresetsList:function(){return he},getPresetAttr:function(){return Ae},getPresetAttrsMap:function(){return je},getPresetAttrsMapJobs:function(){return Ue},getPresetSaveConfirmationDialogFlag:function(){return Fe},getPreviewGlobalColors:function(){return xe},getRenderableValue:function(){return Ce},importGlobalColors:function(){return v},importPresets:function(){return V},isActiveConfirmationModal:function(){return Le},isActiveGlobalColor:function(){return Me},isActivePreset:function(){return Ge},isGlobalColor:function(){return y},isGlobalColorEditing:function(){return we},isGlobalColorRemovable:function(){return Re},isPresetSyncing:function(){return Ve},normalizePresetId:function(){return E},openConfirmationModal:function(){return w},openPresetModal:function(){return G},overridePresetData:function(){return J},registerGlobalDataStore:function(){return et},removeGlobalColorPreviewValue:function(){return Q},removePresetAttribute:function(){return U},savePreset:function(){return H},setDefaultPresetOnSave:function(){return x},setGlobalColorPreviewValue:function(){return X},setIsGlobalColorEditing:function(){return W},setPresetAttrsMap:function(){return F},startPresetEditSession:function(){return Y},startSyncingPreset:function(){return Z},togglePresetSaveConfirmationDialog:function(){return K},unsetDefaultPresetOnSave:function(){return $},updateGlobalColor:function(){return S},updateGlobalColors:function(){return T},updateGlobalColorsUsedInPosts:function(){return O},updatePresetName:function(){return j},updatePresetWithCurrentStyles:function(){return k}});var e={};r.r(e),r.d(e,{addDefaultPreset:function(){return P},addGlobalColor:function(){return _},addNewPreset:function(){return h},addNewPresetFromCurrentStyles:function(){return A},addPresetAttrsMapJob:function(){return B},assignPresetToDefault:function(){return C},clonePreset:function(){return N},closeConfirmationModal:function(){return R},closePresetModal:function(){return L},deleteGlobalColor:function(){return I},deleteModulePreset:function(){return D},editPresetAttribute:function(){return M},endPresetEditSession:function(){return z},endSyncingPreset:function(){return q},importGlobalColors:function(){return v},importPresets:function(){return V},openConfirmationModal:function(){return w},openPresetModal:function(){return G},overridePresetData:function(){return J},removeGlobalColorPreviewValue:function(){return Q},removePresetAttribute:function(){return U},savePreset:function(){return H},setDefaultPresetOnSave:function(){return x},setGlobalColorPreviewValue:function(){return X},setIsGlobalColorEditing:function(){return W},setPresetAttrsMap:function(){return F},startPresetEditSession:function(){return Y},startSyncingPreset:function(){return Z},togglePresetSaveConfirmationDialog:function(){return K},unsetDefaultPresetOnSave:function(){return $},updateGlobalColor:function(){return S},updateGlobalColors:function(){return T},updateGlobalColorsUsedInPosts:function(){return O},updatePresetName:function(){return j},updatePresetWithCurrentStyles:function(){return k}});var t={};r.r(t),r.d(t,{getActiveConfirmationModal:function(){return pe},getAllPresetData:function(){return Be},getDefaultPresetOnSave:function(){return ke},getGlobalColorBasedOnCssVariable:function(){return De},getGlobalColorById:function(){return me},getGlobalColorLabel:function(){return Ne},getGlobalColorPalette:function(){return ge},getGlobalColorValue:function(){return Ie},getGlobalColors:function(){return Ee},getGlobalColorsByStatus:function(){return be},getGlobalColorsToExport:function(){return _e},getGlobalOrPreviewColorValue:function(){return We},getModuleDefaultPreset:function(){return Se},getModuleDefaultPresetID:function(){return ve},getModulePreset:function(){return Te},getModulePresets:function(){return Pe},getModulePresetsList:function(){return he},getPresetAttr:function(){return Ae},getPresetAttrsMap:function(){return je},getPresetAttrsMapJobs:function(){return Ue},getPresetSaveConfirmationDialogFlag:function(){return Fe},getPreviewGlobalColors:function(){return xe},getRenderableValue:function(){return Ce},isActiveConfirmationModal:function(){return Le},isActiveGlobalColor:function(){return Me},isActivePreset:function(){return Ge},isGlobalColorEditing:function(){return we},isGlobalColorRemovable:function(){return Re},isPresetSyncing:function(){return Ve}});var o=window.lodash,s=r(33042),a=r.n(s),i=window.divi.data,l=window.divi.middleware,u=window.divi.settings;let c=e=>crypto.getRandomValues(new Uint8Array(e)),d=(e,t=21)=>((e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*n*t/e.length);return(s=t)=>{let a="";for(;;){let t=r(o),i=o;for(;i--;)if(a+=e[t[i]&n]||"",a.length===s)return a}}})(e,t,c);const p=()=>d("0123456789abcdefghijklmnopqrstuvwxyz",10)(),m=(e,t)=>{const r=e=>`${t} Preset ${e}`;if(!e.length)return{id:p(),name:r(1)};const n=new RegExp(`^${t} Preset (\\d+)$`,"i"),o=e.filter((e=>n.test(e.name)));if(!o.length)return{id:p(),name:r(1)};const s=o.sort(((e,t)=>{const r=Number(n.exec(e.name)[1]);return Number(n.exec(t.name)[1])-r})),a=n.exec(s[0].name),i=Number(a[1])+1;return{id:p(),name:r(i)}},f=({presets:e,moduleLabel:t,moduleName:r,attrs:n={},renderAttrs:s={},styleAttrs:a={},type:i="module",version:l="5.0.0",created:u,updated:c})=>{const{id:d,name:p}=m(Object.values(e??{}),t),f={id:d,name:p,moduleName:r,version:l,type:i,created:u,updated:c};return(0,o.isEmpty)(n)||(f.attrs=n),(0,o.isEmpty)(s)||(f.renderAttrs=s),(0,o.isEmpty)(a)||(f.styleAttrs=a),f};var g=window.divi.moduleUtils;const E=({id:e,moduleName:t,state:r})=>(0,g.getSelectedPresetOrDefault)(e,r.getIn(["presets","items","module",t,"default"])),b=({value:e})=>{if("string"!=typeof e)return null;const t=/--gcid-([0-9a-z-]*)/.exec(e);return t&&t.length>=2?`gcid-${t[1]}`:null},y=e=>Boolean(b({value:e})),_=({color:e,id:t=p(),lastUpdated:r=(new Date).toISOString()})=>{(0,o.isEmpty)(t)?t=`gcid-${p()}`:t.startsWith("gcid-")||(t=`gcid-${t}`);return!(0,o.isEmpty)(r)&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/.test(r)||(r=(new Date).toISOString()),{type:"ADD_GLOBAL_COLOR",color:e,id:t,lastUpdated:r}},I=e=>({type:"DELETE_GLOBAL_COLOR",id:e}),v=(e,t)=>({type:"IMPORT_GLOBAL_COLORS",ids:e,data:t}),S=(e,t)=>({type:"UPDATE_GLOBAL_COLOR",id:e,color:t}),T=e=>({type:"UPDATE_GLOBAL_COLORS",palette:e}),O=(e,t,r)=>(!(0,o.isEmpty)(r)&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/.test(r)||(r=(new Date).toISOString()),{type:"UPDATE_GLOBAL_COLORS_USED_IN_POSTS",postId:e,globalColorIds:t,lastUpdated:r}),P=({moduleName:e,moduleLabel:t,presetType:r,version:n,created:o,updated:s})=>({type:"ADD_DEFAULT_MODULE_PRESET",moduleName:e,moduleLabel:t,presetType:r,version:n,created:o,updated:s}),h=({moduleName:e,moduleLabel:t,moduleId:r,attrs:n,renderAttrs:o,styleAttrs:s,presetType:a,version:i,created:l,updated:u})=>({type:"ADD_NEW_MODULE_PRESET",moduleName:e,moduleLabel:t,moduleId:r,attrs:n,renderAttrs:o,styleAttrs:s,presetType:a,version:i,created:l,updated:u}),A=({moduleName:e,moduleLabel:t,moduleId:r,attrs:n,renderAttrs:o,styleAttrs:s,presetType:a,version:i,created:l,updated:u})=>({type:"ADD_NEW_MODULE_PRESET_FROM_CURRENT_STYLES",moduleName:e,moduleLabel:t,moduleId:r,attrs:n,renderAttrs:o,styleAttrs:s,presetType:a,version:i,created:l,updated:u}),C=(e,t)=>({type:"ASSIGN_PRESET_TO_DEFAULT",presetId:e,moduleName:t}),N=(e,t,r,n)=>({type:"CLONE_MODULE_PRESET",presetId:e,moduleName:t,moduleLabel:r,moduleId:n}),R=()=>({type:"CLOSE_CONFIRMATION_MODAL"}),L=()=>({type:"CLOSE_PRESET_MODAL"}),D=(e,t)=>({type:"DELETE_MODULE_PRESET",presetId:e,moduleName:t}),M=({moduleName:e,presetId:t,attrName:r,attrValue:n,updated:o,attrsGroup:s})=>({type:"EDIT_PRESET_ATTRIBUTE",moduleName:e,presetId:t,attrName:r,attrValue:n,updated:o,attrsGroup:s}),w=({confirmationAction:e,confirmationText:t,actionPayload:r,actionLabels:n})=>({type:"OPEN_CONFIRMATION_MODAL",confirmationAction:e,confirmationText:t,actionPayload:r,actionLabels:n}),G=()=>({type:"OPEN_PRESET_MODAL"}),U=({moduleName:e,presetId:t,attrName:r,attrsGroup:n})=>({type:"REMOVE_PRESET_ATTRIBUTE",moduleName:e,presetId:t,attrName:r,attrsGroup:n}),j=({presetId:e,moduleName:t,name:r,updated:n})=>({type:"UPDATE_PRESET_NAME",presetId:e,moduleName:t,name:r,updated:n}),k=({presetId:e,moduleName:t,attrs:r,styleAttrs:n,renderAttrs:o,moduleId:s,updated:a})=>({type:"UPDATE_PRESET_WITH_CURRENT_STYLES",presetId:e,moduleName:t,attrs:r,styleAttrs:n,renderAttrs:o,moduleId:s,updated:a}),V=(e,t)=>({type:"IMPORT_PRESETS",presets:e,isConversion:t}),B=({moduleName:e,id:t,callback:r})=>({type:"ADD_PRESET_ATTRS_MAP_JOB",moduleName:e,id:t,callback:r}),F=({moduleName:e,map:t})=>({type:"SET_PRESET_ATTRS_MAP",moduleName:e,map:t}),x=({moduleName:e,presetType:t="module",presetId:r})=>({type:"SET_DEFAULT_PRESET_ON_SAVE",moduleName:e,presetType:t,presetId:r}),W=e=>({type:"SET_IS_GLOBAL_COLOR_EDITING",isEditing:e.isEditing}),$=()=>({type:"UNSET_DEFAULT_PRESET_ON_SAVE"}),z=e=>({type:"END_PRESET_EDIT_SESSION",isRollback:e}),Y=()=>({type:"START_PRESET_EDIT_SESSION"}),J=e=>({type:"OVERRIDE_PRESET_DATA",data:e}),H=()=>({type:"SAVE_PRESET"}),q=e=>({type:"END_SYNCING_PRESET",isError:e}),Z=()=>({type:"START_SYNCING_PRESET"}),K=({flag:e})=>({type:"TOGGLE_PRESET_SAVE_CONFIRMATION_DIALOG",flag:e}),Q=e=>({type:"REMOVE_GLOBAL_COLOR_PREVIEW_VALUE",colorId:e}),X=(e,t)=>({type:"SET_GLOBAL_COLOR_PREVIEW_VALUE",colorId:e,color:t}),ee=e=>{switch(e.type){case"ADD_NEW_MODULE_PRESET_FROM_CURRENT_STYLES":case"UPDATE_PRESET_WITH_CURRENT_STYLES":{const t=(0,g.flattenAttrs)(e.attrs),r=Object.keys(t);(0,i.dispatch)("divi/edit-post").removeModuleAttributes({id:e.moduleId,attrNames:r});break}}},te=(e,t)=>{switch(e.type){case"ADD_NEW_MODULE_PRESET_FROM_CURRENT_STYLES":case"ADD_NEW_MODULE_PRESET":case"CLONE_MODULE_PRESET":{const{moduleId:r,moduleName:n}=e,o=t.getState().getIn(["presets"])?.asMutable({deep:!0}),{items:s}=o,a=s?.module?.[n]?.items,l=Object.keys(a).map((e=>a[e].created)),u=Math.max(...l),c=Object.keys(a).find((e=>a[e].created===u));(0,i.dispatch)("divi/edit-post").editModuleAttribute({id:r,attrName:"modulePreset",value:c});break}}};var re=window.divi.rest;function ne(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}var oe=e=>Array.isArray(e)?e:[e];function se(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>"function"==typeof e))){const r=e.map((e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${r}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function ae(e,t){const r=[],{length:n}=e;for(let o=0;o<n;o++)r.push(e[o].apply(null,t));return r}Symbol(),Object.getPrototypeOf({});var ie="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function le(e,t={}){let r={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:n}=t;let o,s=0;function a(){let t=r;const{length:a}=arguments;for(let e=0,r=a;e<r;e++){const r=arguments[e];if("function"==typeof r||"object"==typeof r&&null!==r){let e=t.o;null===e&&(t.o=e=new WeakMap);const n=e.get(r);void 0===n?(t={s:0,v:void 0,o:null,p:null},e.set(r,t)):t=n}else{let e=t.p;null===e&&(t.p=e=new Map);const n=e.get(r);void 0===n?(t={s:0,v:void 0,o:null,p:null},e.set(r,t)):t=n}}const i=t;let l;if(1===t.s?l=t.v:(l=e.apply(null,arguments),s++),i.s=1,n){const e=o?.deref?.()??o;null!=e&&n(e,l)&&(l=e,0!==s&&s--);o="object"==typeof l&&null!==l||"function"==typeof l?new ie(l):l}return i.v=l,l}return a.clearCache=()=>{r={s:0,v:void 0,o:null,p:null},a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function ue(e,...t){const r="function"==typeof e?{memoize:e,memoizeOptions:t}:e,n=(...e)=>{let t,n=0,o=0,s={},a=e.pop();"object"==typeof a&&(s=a,a=e.pop()),ne(a,`createSelector expects an output function after the inputs, but received: [${typeof a}]`);const i={...r,...s},{memoize:l,memoizeOptions:u=[],argsMemoize:c=le,argsMemoizeOptions:d=[],devModeChecks:p={}}=i,m=oe(u),f=oe(d),g=se(e),E=l((function(){return n++,a.apply(null,arguments)}),...m);const b=c((function(){o++;const e=ae(g,arguments);return t=E.apply(null,e),t}),...f);return Object.assign(b,{resultFunc:a,memoizedResultFunc:E,dependencies:g,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>t,recomputations:()=>n,resetRecomputations:()=>{n=0},memoize:l,argsMemoize:c})};return Object.assign(n,{withTypes:()=>n}),n}var ce=ue(le),de=Object.assign(((e,t=ce)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const r=Object.keys(e);return t(r.map((t=>e[t])),((...e)=>e.reduce(((e,t,n)=>(e[r[n]]=t,e)),{})))}),{withTypes:()=>de});const pe=ce([e=>e.getIn(["presets"])],(e=>e.getIn(["confirmationModal"]))),me=(e,t)=>e.getIn(["globalColors",t]);var fe=window.vendor.wp.i18n;const ge=ce([e=>e],(e=>{const t=e.getIn(["globalColors"],{}),r=Object.keys(t).map((e=>{const r=t[e];return"active"===r?.status?r?.id||e:null})).filter((e=>!(0,o.isNull)(e)));return{id:"global",title:(0,fe.__)("Global","et_builder"),colors:r,configurable:!0,expandable:!1,priority:2,requiresColorUpdateConfirmation:!0,saveChangedColorOnSubmit:!0,addColor:{store:"divi/global-data",actionType:"dispatch",actionName:"addGlobalColor",params:["color"]},deleteColor:{store:"divi/global-data",actionType:"dispatch",actionName:"deleteGlobalColor",params:["colorId"]},updateColor:{store:"divi/global-data",actionType:"dispatch",actionName:"updateGlobalColor",params:["colorId","color"]},getColorValue:{store:"divi/global-data",actionType:"select",actionName:"getGlobalColorValue",params:["colorId","activeOnly"]},getRenderableValue:{store:"divi/global-data",actionType:"select",actionName:"getRenderableValue",params:["colorId","color"]},getGlobalColorLabel:{store:"divi/global-data",actionType:"select",actionName:"getGlobalColorLabel",params:["colorId"]},isGlobalColorRemovable:{store:"divi/global-data",actionType:"select",actionName:"isGlobalColorRemovable",params:["colorId"]},getColorIdFromValue:b,removePreviewColor:{store:"divi/global-data",actionType:"dispatch",actionName:"removeGlobalColorPreviewValue",params:["colorId"]},setPreviewColor:{store:"divi/global-data",actionType:"dispatch",actionName:"setGlobalColorPreviewValue",params:["colorId","color"]}}})),Ee=e=>e.getIn(["globalColors"],{}),be=ce([e=>e,(e,t)=>t],((e,t)=>{const r=["active","inactive","temporary"].filter((e=>e!==t));return e.getIn(["globalColors"]).without((e=>r.includes(e.status)))}));var ye=r(53316);const _e=ce([e=>e.getIn(["globalColors"]),(e,t)=>t],r.n(ye)()(((e,t)=>{const r=(0,s.asMutable)(e,{deep:!0}),n=(0,o.pickBy)(r,((e,r)=>(0,o.includes)(t,r)));return Object.entries(n).map((([e,t])=>[e,{color:t.color,status:t.status}]))}))),Ie=ce([e=>e,(e,t)=>t,(e,t,r)=>r],((e,t,r=!1)=>{const n=e.getIn(["globalColors",t]);return!n||r&&"active"!==n.status?"":n.color})),ve=ce([e=>e.getIn(["presets","items"]),(e,t)=>t],((e,{moduleName:t,presetType:r="module"})=>{const n=e?.getIn([r,t,"default"]);return n})),Se=ce([e=>e.getIn(["presets","items"]),(e,t)=>t,(e,t)=>ve(e,{moduleName:t.moduleName})],((e,{moduleName:t,presetType:r="module"},n)=>{const o=e?.getIn([r,t,"items",n]);return o})),Te=ce([e=>e.getIn(["presets","items"]),(e,t)=>t,(e,t)=>Se(e,{moduleName:t.moduleName})],((e,{moduleName:t,id:r,useDefaultFallback:n,presetType:o="module"},s)=>n?e.getIn([o,t,"items",r])??s:e.getIn([o,t,"items",r]))),Oe={},Pe=(e,t)=>{const{presets:r}=t;return(0,o.forEach)(Oe,((e,t)=>{delete Oe[t]})),(0,o.forEach)(r,((t,r)=>{const n=Te(e,t);n&&(Oe[r]=n)})),Oe},he=ce([e=>e.getIn(["presets","items"]),(e,t)=>t],((e,{moduleName:t,presetType:r="module"})=>{const n=e?.getIn([r,t,"items"]);return n})),Ae=ce([e=>e.getIn(["presets","items"]),(e,t)=>t],((e,{moduleName:t,id:r,attrName:n,presetType:o="module"})=>{const s=e?.getIn([o,t,"items",r,"attrs"]);return s?.getIn(n.split("."))})),Ce=(e,t,r)=>"active"===e.getIn(["globalColors",t,"status"],"")?`var(--${t})`:e.getIn(["globalColors",t,"color"],r),Ne=(e,t)=>{const r=e.getIn(["globalColors",t,"color"],"");return e.getIn(["globalColors",t,"label"],r)||r},Re=(e,t)=>"customizer"!==e.getIn(["globalColors",t,"folder"],""),Le=ce([e=>e.getIn(["presets","confirmationModal"])],(e=>e.getIn(["isVisible"]))),De=(e,t)=>{const r=b({value:t});return(0,o.isEmpty)(r)?null:e.getIn(["globalColors",r])},Me=(e,t)=>"active"===e.getIn(["globalColors",t,"status"]),we=e=>e.getIn(["isGlobalColorEditing"],!1),Ge=ce([e=>e.getIn(["presets"])],(e=>e.getIn(["isActive"]))),Ue=ce([e=>e.getIn(["presets","attrsMapping"])],(e=>e?.getIn(["jobs"]))),je=ce([e=>e.getIn(["presets","attrsMapping","maps"]),(e,t)=>t],((e,t)=>e?.getIn([t]))),ke=ce([e=>e.getIn(["presets"])],(e=>e.getIn(["defaultOnSave"]))),Ve=ce([e=>e.getIn(["presets"])],(e=>e.getIn(["isSyncing"]))),Be=ce([e=>e.getIn(["presets","items"]),(e,t)=>t],((e,t)=>{const r=t?.presetType??"module";return e?.getIn([r])})),Fe=ce([e=>e.getIn(["presets"])],(e=>!!e.getIn(["showPresetSaveConfirmationDialog"]))),xe=e=>e.getIn(["previewGlobalColors"],{}),We=(e,t)=>{if(t.startsWith("var(--")&&(t=b({value:t})),(0,o.isEmpty)(t))return null;const r=e.getIn(["previewGlobalColors",t]),n=e.getIn(["globalColors",t]);return r?.color?r.color:n?.color?n.color:null},$e=(e,t)=>{const r=t.getState(),n=Ee(r);(0,re.loggedFetch)({method:"POST",restRoute:"/divi/v1/global-data/global-colors",data:{global_colors:n}},!0).catch((e=>{console.log(e)}))},ze=(e,t)=>{const r=Object.keys(e??{}).reduce(((r,n)=>(r[n]=((e,t)=>Object.keys(e??{}).reduce(((r,n)=>{const o=e[n],s=Object.values(o?.items??{}),a={moduleName:n,default:o?.default,items:s};return t?r.concat(t(a)):r.concat(a)}),[]))(e[n],t),r)),{});return r};var Ye=window.divi.window;var Je=window.vendor.React,He=r.n(Je);const qe=({error:e,onRetry:t,onDownloadBackup:r})=>{const n=()=>{const e=(0,Je.createElement)("p",null,(0,fe.__)("An error has occurred while saving the Global Presets settings. Various problems can cause a save to fail, such as a lack of server resources, firewall blockages or plugin conflicts or server misconfiguration. You can try saving again by clicking Try Again, or you can download a backup of your unsaved defaults by clicking Download Backup. A backup can be helpful when contacting our Support Team.","et_builder"));(0,i.dispatch)("divi/modal-library").open({name:"divi/alert",centered:!0,dimension:{width:280,height:400},attributes:{title:(0,fe.__)("Save of Global Presets Has Failed","et_builder"),content:e,footerButtons:[{name:"primary",label:(0,fe.__)("Try Again","et_builder"),onClick:e=>{e.preventDefault(),t()}},{name:"secondary",label:(0,fe.__)("Download Backup","et_builder"),onClick:e=>{e.preventDefault(),r()}}],centered:!0}})};e instanceof Response?(async e=>{const t=await e.text();return JSON.parse(t)})(e).then((e=>{console.error(e.message),n()})).catch((()=>{console.error(e),n()})):e instanceof Error?(console.error(e?.message),"AbortError"!==e.name&&n()):(console.error(e),n())};let Ze;const Ke=(e,t)=>{const r=()=>{t.getState().getIn(["presets","isSyncingError"])&&(0,i.dispatch)("divi/modal-library").close({name:"divi/alert"})},n=()=>{Ze?.abort&&Ze.abort()},s=({isConversion:r=!1,isClosePresetModal:s=!0})=>{n(),(0,i.dispatch)("divi/global-data").startSyncingPreset(),Ze=new AbortController;const a=t.getState().getIn(["presets","items"])?.asMutable({deep:!0}),l=t.getState().getIn(["presets","defaultOnSave"])?.asMutable({deep:!0}),u=ze(a,(e=>{l&&l.moduleName===e.moduleName&&e.items.some((e=>e.id===l?.presetId))&&(e={...e,default:l.presetId});const t=[...e.items];return e={...e,items:t.map((r=>{let n={...r};return["name","attrs","styleAttrs","renderAttrs"].forEach((s=>{switch(s){case"name":if(""===(r[s]??"")){const r=(0,i.select)("divi/module-library").getModule(e.moduleName).title;n={...n,name:m(t,r).name}}break;case"attrs":case"styleAttrs":case"renderAttrs":if((0,o.has)(r,s)){const e=(0,g.removeEmptyObjectAttributes)(r[s]);(0,o.isEmpty)(e)?delete n[s]:(0,o.isEqual)(e,r[s])||(n={...n,[s]:e})}}})),n}))}}));(0,re.fetch)({restRoute:"/divi/v1/global-data/global-preset/sync",method:"POST",data:{presets:u,converted:r},signal:Ze.signal}).then((e=>{(0,i.dispatch)("divi/global-data").endSyncingPreset(!1),(0,i.dispatch)("divi/global-data").endPresetEditSession(!1),l&&(0,i.dispatch)("divi/global-data").unsetDefaultPresetOnSave(),(0,o.isEqual)(a,e)||(0,i.dispatch)("divi/global-data").overridePresetData(e),s&&(0,i.dispatch)("divi/global-data").closePresetModal()})).catch((r=>{(0,i.dispatch)("divi/global-data").endSyncingPreset(!0),qe({error:r,onRetry:()=>{Ke(e,t)},onDownloadBackup:()=>{(e=>{const t=JSON.stringify(e),r=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(r),o=Ye.topWindow.document.createElement("a");o.style.display="none",o.download="global-defaults-backup.json",o.href=n,Ye.topWindow.document.body.appendChild(o),o.click(),setTimeout((()=>{URL.revokeObjectURL(n),o.parentNode.removeChild(o)}),500)})(a)}})}))};switch(e.type){case"ADD_NEW_MODULE_PRESET_FROM_CURRENT_STYLES":case"ADD_NEW_MODULE_PRESET":case"CLONE_MODULE_PRESET":r(),(0,i.dispatch)("divi/global-data").openPresetModal(),s({isClosePresetModal:!1});break;case"ASSIGN_PRESET_TO_DEFAULT":case"DELETE_MODULE_PRESET":case"SAVE_PRESET":case"UPDATE_PRESET_WITH_CURRENT_STYLES":r(),s({});break;case"IMPORT_PRESETS":r(),s({isConversion:e.isConversion});break;case"CLOSE_PRESET_MODAL":r(),n()}},Qe={ADD_NEW_MODULE_PRESET_FROM_CURRENT_STYLES:[te,ee,Ke],ADD_NEW_MODULE_PRESET:[te,Ke],ASSIGN_PRESET_TO_DEFAULT:[Ke],CLONE_MODULE_PRESET:[te,Ke],CLOSE_PRESET_MODAL:[e=>{if("CLOSE_PRESET_MODAL"===e.type)(0,i.dispatch)("divi/global-data").endPresetEditSession(!0)},Ke],DELETE_MODULE_PRESET:[Ke],OPEN_PRESET_MODAL:[e=>{if("OPEN_PRESET_MODAL"===e.type)(0,i.dispatch)("divi/global-data").startPresetEditSession()}],SAVE_PRESET:[Ke],UPDATE_PRESET_WITH_CURRENT_STYLES:[ee,Ke],IMPORT_PRESETS:[e=>{switch(e.type){case"IMPORT_PRESETS":{const e=(0,i.select)("divi/edit-post").getContent()?.asMutable({deep:!0}),t=(0,g.populateUsedPresets)(e);(0,i.dispatch)("divi/edit-post").updateUsedPresets({presetType:"module",presets:t});break}}},Ke],ADD_GLOBAL_COLOR:[$e],DELETE_GLOBAL_COLOR:[$e,()=>{const e=(0,i.select)("divi/global-data").getGlobalColors();(0,i.dispatch)("divi/edit-post").syncModuleGlobalColors(e)}],IMPORT_GLOBAL_COLORS:[$e],UPDATE_GLOBAL_COLOR:[$e],UPDATE_GLOBAL_COLORS_USED_IN_POSTS:[$e],UPDATE_GLOBAL_COLORS:[$e]},Xe=(e,t)=>{switch(t.type){case"ADD_GLOBAL_COLOR":return((e,t,r,n)=>{if((0,o.isEmpty)(t)||y(t))return e;const s={id:r,color:t,status:"active",lastUpdated:n,usedInPosts:[]};return e.setIn(["globalColors",s.id],{...s})})(e,t.color,t.id,t.lastUpdated);case"DELETE_GLOBAL_COLOR":return((e,t)=>{const r=e.getIn(["globalColors",t]);return r?e.setIn(["globalColors",t],{...r,lastUpdated:(new Date).toISOString(),status:"inactive"}):e})(e,t.id);case"IMPORT_GLOBAL_COLORS":return((e,t,r)=>{const n=e.getIn(["globalColors"]),s={};return(0,o.forEach)(t,(e=>{n[e]||(s[e]=r[e])})),(0,o.isEmpty)(s)?e:e.setIn(["globalColors"],{...n,...s})})(e,t.ids,t.data);case"UPDATE_GLOBAL_COLOR":return((e,t,r)=>{const n=e.getIn(["globalColors",t]);return!n||(0,o.isEmpty)(r)||y(r)?e:e.setIn(["globalColors",t],{...n,lastUpdated:(new Date).toISOString(),color:r})})(e,t.id,t.color);case"UPDATE_GLOBAL_COLORS":return((e,t)=>{const r=e.getIn(["globalColors"]);return(0,o.isEqual)(r,t)?e:e.setIn(["globalColors"],{...t})})(e,t.palette);case"UPDATE_GLOBAL_COLORS_USED_IN_POSTS":return((e,t,r,n)=>{let s=e.getIn(["globalColors"]);return r.forEach((r=>{const o=e.getIn(["globalColors",r,"usedInPosts"])?.asMutable()??[];o?.includes(t)||(s=s.setIn([r,"usedInPosts"],[...o,t]).setIn([r,"lastUpdated"],n))})),(0,o.forEach)(s,((e,a)=>{if((0,o.isObject)(e)){const o=e.getIn(["usedInPosts"])?.asMutable()??[];o.includes(t)&&!r.includes(a)&&(s=s.setIn([a,"usedInPosts"],o.filter((e=>e!==t))).setIn([a,"lastUpdated"],n))}})),e.setIn(["globalColors"],{...s})})(e,t.postId,t.globalColorIds,t.lastUpdated);case"SET_IS_GLOBAL_COLOR_EDITING":return((e,t)=>e.set("isGlobalColorEditing",t.isEditing))(e,t);case"REMOVE_GLOBAL_COLOR_PREVIEW_VALUE":return((e,t)=>e.setIn(["previewGlobalColors"],e.previewGlobalColors.without(t)))(e,t.colorId);case"SET_GLOBAL_COLOR_PREVIEW_VALUE":return((e,t,r)=>e.setIn(["previewGlobalColors",t],{colorId:t,color:r}))(e,t.colorId,t.color);case"OPEN_PRESET_MODAL":return(e=>e.setIn(["presets","isActive"],!0))(e);case"CLOSE_PRESET_MODAL":return(e=>e.setIn(["presets","isActive"],!1))(e);case"EDIT_PRESET_ATTRIBUTE":return e.getIn(["presets","isSyncing"])?e:((e,{moduleName:t,presetId:r,attrName:n,attrValue:o,updated:s,attrsGroup:a})=>{const i=["presets","items","module",t,"items",E({id:r,moduleName:t,state:e})];return Array.isArray(a)&&0<a.length&&(a.forEach((t=>{e=e.setIn(i.concat(t).concat(n.split(".")),o)})),e=e.setIn(i.concat("updated"),s)),e})(e,{moduleName:t.moduleName,presetId:t.presetId,attrName:t.attrName,attrValue:t.attrValue,updated:t.updated,attrsGroup:t.attrsGroup});case"REMOVE_PRESET_ATTRIBUTE":return((e,{moduleName:t,presetId:r,attrName:n,attrsGroup:s})=>{const a=["presets","items","module",t,"items",E({id:r,moduleName:t,state:e})],i=n.split("."),l=i[0];return s.forEach((t=>{const r=a.concat(t),n=r.concat(i),s=(0,o.slice)(n,0,n.length-1),u=e.getIn(s);if(!(0,o.isEmpty)(u)){const t=(0,o.last)(n),a=(e=e.setIn(s,u.without(t))).getIn(r),i=e.getIn(r.concat(l)),c=(0,g.removeEmptyObjectAttributes)(i?.asMutable({deep:!0}));(0,o.isEmpty)(c)?e=e.setIn(r,a.without(l)):(0,o.isEqual)(c,i?.asMutable({deep:!0}))||(e=e.setIn(r.concat(l),c))}})),e})(e,{moduleName:t.moduleName,presetId:t.presetId,attrName:t.attrName,attrsGroup:t.attrsGroup});case"ASSIGN_PRESET_TO_DEFAULT":return e.getIn(["presets","isSyncing"])?e:((e,t,r)=>{const n=["presets","items","module",r,"default"];return e.setIn(n,t)})(e,t.presetId,t.moduleName);case"DELETE_MODULE_PRESET":return e.getIn(["presets","isSyncing"])?e:((e,t,r)=>{const n=e.getIn(["presets","items","module",r,"default"]),o=e.getIn(["presets","items","module",r,"items"]).without(t);let s=n;const a=Object.keys(o).length??0;if(n===t||1===a){const e=Object.values(o).sort(((e,t)=>e.created-t.created)).reduce(((e,t)=>({...e,[t.id]:t})),{});s=Object.keys(e)[0]??null}return e.setIn(["presets","items","module",r],{items:o,default:s})})(e,t.presetId,t.moduleName);case"CLONE_MODULE_PRESET":return e.getIn(["presets","isSyncing"])?e:((e,t,r,n)=>{const o=E({id:t,moduleName:r,state:e}),s=e.getIn(["presets","items","module",r,"items"])?.asMutable({deep:!0})??{},a=s[o],{id:i,name:l}=m(Object.values(s??{}),n),u={...a,id:i,name:l,created:Date.now(),updated:Date.now()};return e.setIn(["presets","items","module",r,"items",i],u)})(e,t.presetId,t.moduleName,t.moduleLabel);case"UPDATE_PRESET_WITH_CURRENT_STYLES":return e.getIn(["presets","isSyncing"])?e:((e,{presetId:t,moduleName:r,attrs:n,styleAttrs:s,renderAttrs:a,updated:i})=>{const l=E({id:t,moduleName:r,state:e}),u=e.getIn(["presets","items","module",r,"items"])?.getIn([l]),c=u?.getIn(["attrs"])?.asMutable({deep:!0})??{},d=(0,o.merge)({},c,n);(0,o.isEmpty)(d)||(e=e.setIn(["presets","items","module",r,"items",l,"attrs"],d));const p=u.getIn(["styleAttrs"])?.asMutable({deep:!0})??{},m=(0,o.merge)({},p,s);(0,o.isEmpty)(m)||(e=e.setIn(["presets","items","module",r,"items",l,"styleAttrs"],m));const f=u.getIn(["renderAttrs"])?.asMutable({deep:!0})??{},g=(0,o.merge)({},f,a);return(0,o.isEmpty)(g)||(e=e.setIn(["presets","items","module",r,"items",l,"renderAttrs"],g)),e.setIn(["presets","items","module",r,"items",l,"updated"],i)})(e,{presetId:t.presetId,moduleName:t.moduleName,attrs:t.attrs,styleAttrs:t.styleAttrs,renderAttrs:t.renderAttrs,updated:t.updated,moduleId:t.moduleId});case"OPEN_CONFIRMATION_MODAL":return((e,{confirmationAction:t,confirmationText:r,actionPayload:n,actionLabels:o})=>e.setIn(["presets","confirmationModal"],{isVisible:!0,confirmationAction:t,confirmationText:r,actionPayload:n,actionLabels:o}))(e,{confirmationAction:t.confirmationAction,confirmationText:t.confirmationText,actionPayload:t.actionPayload,actionLabels:t.actionLabels});case"CLOSE_CONFIRMATION_MODAL":return(e=>e.setIn(["presets","confirmationModal"],{isVisible:!1}))(e);case"UPDATE_PRESET_NAME":return e.getIn(["presets","isSyncing"])?e:((e,{moduleName:t,presetId:r,name:n,updated:o})=>{const s=E({id:r,moduleName:t,state:e});return e.setIn(["presets","items","module",t,"items",s,"updated"],o).setIn(["presets","items","module",t,"items",s,"name"],n)})(e,{moduleName:t.moduleName,presetId:t.presetId,name:t.name,updated:t.updated});case"ADD_NEW_MODULE_PRESET":return e.getIn(["presets","isSyncing"])?e:((e,{moduleName:t,moduleLabel:r,attrs:n,renderAttrs:s,styleAttrs:a,presetType:i,version:l,created:u,updated:c})=>{const d=e.getIn(["presets","items","module",t,"items"])?.asMutable({deep:!0}),p=f({presets:d,moduleLabel:r,moduleName:t,type:i,version:l,attrs:n,renderAttrs:s,styleAttrs:a,created:u,updated:c});return(0,o.isArray)(e?.asMutable({deep:!0})?.presets?.items?.module)&&(0,o.isEmpty)(e?.asMutable({deep:!0})?.presets?.items?.module)&&(e=e.setIn(["presets","items","module"],{})),e.setIn(["presets","items","module",t,"items",p.id],p)})(e,{moduleLabel:t.moduleLabel,moduleName:t.moduleName,attrs:t.attrs,renderAttrs:t.renderAttrs,styleAttrs:t.styleAttrs,presetType:t.presetType,version:t.version,created:t.created,updated:t.updated});case"ADD_NEW_MODULE_PRESET_FROM_CURRENT_STYLES":return e.getIn(["presets","isSyncing"])?e:((e,{moduleName:t,moduleLabel:r,attrs:n,renderAttrs:o,styleAttrs:s,presetType:a,version:i,created:l,updated:u})=>{const c=e.getIn(["presets","items","module",t,"items"])?.asMutable({deep:!0}),d=f({presets:c,moduleLabel:r,moduleName:t,type:a,version:i,attrs:n,renderAttrs:o,styleAttrs:s,created:l,updated:u});return e.setIn(["presets","items","module",t,"items",d.id],d)})(e,{moduleLabel:t.moduleLabel,moduleName:t.moduleName,attrs:t.attrs,renderAttrs:t.renderAttrs,styleAttrs:t.styleAttrs,presetType:t.presetType,version:t.version,created:t.created,updated:t.updated});case"ADD_DEFAULT_MODULE_PRESET":return e.getIn(["presets","isSyncing"])?e:((e,{moduleName:t,moduleLabel:r,presetType:n,version:s,created:a,updated:i})=>{const l=e.getIn(["presets","items","module",t,"items"])?.asMutable({deep:!0}),u=f({presets:l,moduleLabel:r,moduleName:t,type:n,version:s,created:a,updated:i});return(0,o.isArray)(e?.asMutable({deep:!0})?.presets?.items?.module)&&(0,o.isEmpty)(e?.asMutable({deep:!0})?.presets?.items?.module)&&(e=e.setIn(["presets","items","module"],{})),e.setIn(["presets","items","module",t,"items"],{[u.id]:u,...l}).setIn(["presets","items","module",t,"default"],u.id)})(e,{moduleName:t.moduleName,moduleLabel:t.moduleLabel,created:t.created,updated:t.updated});case"IMPORT_PRESETS":return((e,t)=>e.setIn(["presets","items"],e.getIn(["presets","items"]).merge(t,{deep:!0})))(e,t.presets);case"ADD_PRESET_ATTRS_MAP_JOB":return((e,{moduleName:t,id:r,callback:n})=>e.setIn(["presets","attrsMapping","jobs",t,r],n))(e,{moduleName:t.moduleName,id:t.id,callback:t.callback});case"SET_PRESET_ATTRS_MAP":return((e,{moduleName:t,map:r})=>e.setIn(["presets","attrsMapping","maps",t],r).setIn(["presets","attrsMapping","jobs"],e.getIn(["presets","attrsMapping","jobs"]).without(t)))(e,{moduleName:t.moduleName,map:t.map});case"SET_DEFAULT_PRESET_ON_SAVE":return e.getIn(["presets","isSyncing"])?e:((e,{moduleName:t,presetId:r,presetType:n="module"})=>{const o={moduleName:t,presetId:E({id:r,moduleName:t,state:e}),presetType:n};return e.setIn(["presets","defaultOnSave"],o)})(e,{moduleName:t.moduleName,presetId:t.presetId,presetType:t.presetType});case"UNSET_DEFAULT_PRESET_ON_SAVE":return e.getIn(["presets","isSyncing"])?e:(e=>e.setIn(["presets","defaultOnSave"],null))(e);case"END_PRESET_EDIT_SESSION":return((e,t)=>{if(t){const t=e.getIn(["presets","restorePoint"]);t&&(e=e.setIn(["presets","items"],t.asMutable({deep:!0})))}return e.setIn(["presets","restorePoint"],null)})(e,t.isRollback);case"START_PRESET_EDIT_SESSION":return(e=>e.setIn(["presets","restorePoint"],e.getIn(["presets","items"])?.asMutable({deep:!0})??{}))(e);case"OVERRIDE_PRESET_DATA":return((e,t)=>e.setIn(["presets","items"],t))(e,t.data);case"END_SYNCING_PRESET":return((e,t)=>e.setIn(["presets","isSyncingError"],t).setIn(["presets","isSyncing"],!1))(e,t.isError);case"START_SYNCING_PRESET":return(e=>e.setIn(["presets","isSyncingError"],!1).setIn(["presets","isSyncing"],!0))(e);case"TOGGLE_PRESET_SAVE_CONFIRMATION_DIALOG":return((e,{flag:t})=>e.setIn(["presets","showPresetSaveConfirmationDialog"],t))(e,{flag:t.flag});default:return e}},et=()=>{if((0,i.select)("divi/settings")||(0,u.registerSettingsStore)(),(0,i.select)("divi/global-data"))return;const r=(0,i.select)("divi/settings").getSetting(["globalPresets","data"]),n=(0,i.select)("divi/settings").getSetting(["settings","page","values"],a()({}))?.getIn(["post_content","et_pb_gc_palette"]),s={globalColors:(0,o.isEmpty)(n)?{}:n.asMutable({deep:!0}),previewGlobalColors:{},isGlobalColorEditing:!1,fetchLog:{},fetchError:{},presets:{items:r?r.asMutable({deep:!0}):{},confirmationModal:{isVisible:!1,confirmationAction:null,confirmationText:null,actionPayload:{},actionLabels:{}},restorePoint:null,defaultOnSave:null,isSyncing:!1,isSyncingError:!1,isActive:!1,showPresetSaveConfirmationDialog:!0,attrsMapping:{jobs:{},maps:{}}}},c=a()(s),d=(0,i.registerStore)("divi/global-data",{actions:e,reducer:Xe,selectors:t,initialState:c});(0,l.applyEffects)(d,Qe)},tt=e=>{const{globalColors:t,previewGlobalColors:r}=e;let n="",s="";return(0,o.forEach)(t,((e,t)=>e?.color?n+=`--${t}: ${e.color};`:"")),(0,o.forEach)(r,(e=>(0,o.isEmpty)(e)?"":s+=`--${e.colorId}: ${e.color};`)),(0,o.isEmpty)(n)?null:He().createElement(He().Fragment,null,He().createElement("style",{className:"et-vb-global-data et-vb-global-colors"},`:root{${n}}`),(0,o.isEmpty)(s)?"":He().createElement("style",{className:"et-vb-global-data et-vb-preview-global-colors"},`:root{${s}}`))},rt=()=>{const{globalColors:e,previewGlobalColors:t}=(0,i.useSelect)((e=>({globalColors:e("divi/global-data").getGlobalColors(),previewGlobalColors:e("divi/global-data").getPreviewGlobalColors()})));return(0,Je.createElement)(tt,{globalColors:e,previewGlobalColors:t})}}(),(window.divi=window.divi||{}).globalData=n}();