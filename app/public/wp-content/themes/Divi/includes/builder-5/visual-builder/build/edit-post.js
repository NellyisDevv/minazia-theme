!function(){var t={53316:function(t){function e(t,e,n,r){var o,i=null==(o=r)||"number"==typeof o||"boolean"==typeof o?r:n(r),s=e.get(i);return void 0===s&&(s=t.call(this,r),e.set(i,s)),s}function n(t,e,n){var r=Array.prototype.slice.call(arguments,3),o=n(r),i=e.get(o);return void 0===i&&(i=t.apply(this,r),e.set(o,i)),i}function r(t,e,n,r,o){return n.bind(e,t,r,o)}function o(t,o){return r(t,this,1===t.length?e:n,o.cache.create(),o.serializer)}function i(){return JSON.stringify(arguments)}function s(){this.cache=Object.create(null)}s.prototype.has=function(t){return t in this.cache},s.prototype.get=function(t){return this.cache[t]},s.prototype.set=function(t,e){this.cache[t]=e};var a={create:function(){return new s}};t.exports=function(t,e){var n=e&&e.cache?e.cache:a,r=e&&e.serializer?e.serializer:i;return(e&&e.strategy?e.strategy:o)(t,{cache:n,serializer:r})},t.exports.strategies={variadic:function(t,e){return r(t,this,n,e.cache.create(),e.serializer)},monadic:function(t,n){return r(t,this,e,n.cache.create(),n.serializer)}}},33042:function(t,e,n){var r;!function(){"use strict";var o=function t(e){var n,r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o={use_static:!1};function i(t){var e=Object.getPrototypeOf(t);return e?Object.create(e):{}}function s(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!1,value:n})}function a(t,e){s(t,e,(function(){throw new y("The "+e+" method cannot be invoked on an Immutable data structure.")}))}"object"!=typeof(n=e)||Array.isArray(n)||null===n||void 0!==e.use_static&&(o.use_static=Boolean(e.use_static));var u="__immutable_invariants_hold";function l(t){return"object"!=typeof t||(null===t||Boolean(Object.getOwnPropertyDescriptor(t,u)))}function c(t,e){return t===e||t!=t&&e!=e}function d(t){return!(null===t||"object"!=typeof t||Array.isArray(t)||t instanceof Date)}var p=["setPrototypeOf"],m=p.concat(["push","pop","sort","splice","shift","unshift","reverse"]),g=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),f=p.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function y(t){this.name="MyError",this.message=t,this.stack=(new Error).stack}function h(t,e){for(var n in s(t,u,!0),e)e.hasOwnProperty(n)&&a(t,e[n]);return Object.freeze(t),t}function I(t,e){var n=t[e];s(t,e,(function(){return H(n.apply(t,arguments))}))}function M(t,e,n){var r=n&&n.deep;if(t in this&&(r&&this[t]!==e&&d(e)&&d(this[t])&&(e=H.merge(this[t],e,{deep:!0,mode:"replace"})),c(this[t],e)))return this;var o=L.call(this);return o[t]=H(e),O(o)}y.prototype=new Error,y.prototype.constructor=Error;var E=H([]);function _(t,e,n){var r=t[0];if(1===t.length)return M.call(this,r,e,n);var o,i=t.slice(1),s=this[r];if("object"==typeof s&&null!==s)o=H.setIn(s,i,e);else{var a=i[0];o=""!==a&&isFinite(a)?_.call(E,i,e):B.call(w,i,e)}if(r in this&&s===o)return this;var u=L.call(this);return u[r]=o,O(u)}function O(t){for(var e in g){if(g.hasOwnProperty(e))I(t,g[e])}o.use_static||(s(t,"flatMap",b),s(t,"asObject",T),s(t,"asMutable",L),s(t,"set",M),s(t,"setIn",_),s(t,"update",V),s(t,"updateIn",j),s(t,"getIn",G));for(var n=0,r=t.length;n<r;n++)t[n]=H(t[n]);return h(t,m)}function v(){return new Date(this.getTime())}function b(t){if(0===arguments.length)return this;var e,n=[],r=this.length;for(e=0;e<r;e++){var o=t(this[e],e,this);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return O(n)}function A(t){if(void 0===t&&0===arguments.length)return this;if("function"!=typeof t){var e=Array.isArray(t)?t.slice():Array.prototype.slice.call(arguments);e.forEach((function(t,e,n){"number"==typeof t&&(n[e]=t.toString())})),t=function(t,n){return-1!==e.indexOf(n)}}var n=i(this);for(var r in this)this.hasOwnProperty(r)&&!1===t(this[r],r)&&(n[r]=this[r]);return z(n)}function L(t){var e,n,r=[];if(t&&t.deep)for(e=0,n=this.length;e<n;e++)r.push(C(this[e]));else for(e=0,n=this.length;e<n;e++)r.push(this[e]);return r}function T(t){"function"!=typeof t&&(t=function(t){return t});var e,n={},r=this.length;for(e=0;e<r;e++){var o=t(this[e],e,this),i=o[0],s=o[1];n[i]=s}return z(n)}function C(t){return!t||"object"!=typeof t||!Object.getOwnPropertyDescriptor(t,u)||t instanceof Date?t:H.asMutable(t,{deep:!0})}function D(t,e){for(var n in t)Object.getOwnPropertyDescriptor(t,n)&&(e[n]=t[n]);return e}function S(t,e){if(0===arguments.length)return this;if(null===t||"object"!=typeof t)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(t));var n,r,o=Array.isArray(t),s=e&&e.deep,a=e&&e.mode||"merge",u=e&&e.merger;function l(t,r,o){var a,l=H(r[o]),p=u&&u(t[o],l,e),m=t[o];void 0===n&&void 0===p&&t.hasOwnProperty(o)&&c(l,m)||(c(m,a=void 0!==p?p:s&&d(m)&&d(l)?H.merge(m,l,e):l)&&t.hasOwnProperty(o)||(void 0===n&&(n=D(t,i(t))),n[o]=a))}function p(t,e){for(var r in t)e.hasOwnProperty(r)||(void 0===n&&(n=D(t,i(t))),delete n[r])}if(o)for(var m=0,g=t.length;m<g;m++){var f=t[m];for(r in f)f.hasOwnProperty(r)&&l(void 0!==n?n:this,f,r)}else{for(r in t)Object.getOwnPropertyDescriptor(t,r)&&l(this,t,r);"replace"===a&&p(this,t)}return void 0===n?this:z(n)}function U(t,e){var n=e&&e.deep;if(0===arguments.length)return this;if(null===t||"object"!=typeof t)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(t));return H.merge(this,t,{deep:n,mode:"replace"})}var R,P,N,w=H({});function B(t,e,n){if(!Array.isArray(t)||0===t.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var r=t[0];if(1===t.length)return k.call(this,r,e,n);var o,s=t.slice(1),a=this[r];if(o=this.hasOwnProperty(r)&&"object"==typeof a&&null!==a?H.setIn(a,s,e):B.call(w,s,e),this.hasOwnProperty(r)&&a===o)return this;var u=D(this,i(this));return u[r]=o,z(u)}function k(t,e,n){var r=n&&n.deep;if(this.hasOwnProperty(t)&&(r&&this[t]!==e&&d(e)&&d(this[t])&&(e=H.merge(this[t],e,{deep:!0,mode:"replace"})),c(this[t],e)))return this;var o=D(this,i(this));return o[t]=H(e),z(o)}function V(t,e){var n=Array.prototype.slice.call(arguments,2),r=this[t];return H.set(this,t,e.apply(r,[r].concat(n)))}function Y(t,e){for(var n=0,r=e.length;null!=t&&n<r;n++)t=t[e[n]];return n&&n==r?t:void 0}function j(t,e){var n=Array.prototype.slice.call(arguments,2),r=Y(this,t);return H.setIn(this,t,e.apply(r,[r].concat(n)))}function G(t,e){var n=Y(this,t);return void 0===n?e:n}function F(t){var e,n=i(this);if(t&&t.deep)for(e in this)this.hasOwnProperty(e)&&(n[e]=C(this[e]));else for(e in this)this.hasOwnProperty(e)&&(n[e]=this[e]);return n}function x(){return{}}function z(t){return o.use_static||(s(t,"merge",S),s(t,"replace",U),s(t,"without",A),s(t,"asMutable",F),s(t,"set",k),s(t,"setIn",B),s(t,"update",V),s(t,"updateIn",j),s(t,"getIn",G)),h(t,p)}function H(t,e,n){if(l(t)||function(t){return"object"==typeof t&&null!==t&&(60103===t.$$typeof||t.$$typeof===r)}(t)||function(t){return"undefined"!=typeof File&&t instanceof File}(t)||function(t){return"undefined"!=typeof Blob&&t instanceof Blob}(t)||function(t){return t instanceof Error}(t))return t;if(function(t){return"object"==typeof t&&"function"==typeof t.then}(t))return t.then(H);if(Array.isArray(t))return O(t.slice());if(t instanceof Date)return i=new Date(t.getTime()),o.use_static||s(i,"asMutable",v),h(i,f);var i,a=e&&e.prototype,u=(a&&a!==Object.prototype?function(){return Object.create(a)}:x)();if(null==n&&(n=64),n<=0)throw new y("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var c in n-=1,t)Object.getOwnPropertyDescriptor(t,c)&&(u[c]=H(t[c],void 0,n));return z(u)}function $(t){return function(){var e=[].slice.call(arguments),n=e.shift();return t.apply(n,e)}}function W(t,e){return function(){var n=[].slice.call(arguments),r=n.shift();return Array.isArray(r)?e.apply(r,n):t.apply(r,n)}}return H.from=H,H.isImmutable=l,H.ImmutableError=y,H.merge=$(S),H.replace=$(U),H.without=$(A),H.asMutable=(R=F,P=L,N=v,function(){var t=[].slice.call(arguments),e=t.shift();return Array.isArray(e)?P.apply(e,t):e instanceof Date?N.apply(e,t):R.apply(e,t)}),H.set=W(k,M),H.setIn=W(B,_),H.update=$(V),H.updateIn=$(j),H.getIn=$(G),H.flatMap=$(b),H.asObject=$(T),o.use_static||(H.static=t({use_static:!0})),Object.freeze(H),H}();void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)}()}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};!function(){"use strict";n.r(r),n.d(r,{__DEPRECATED__getModulesByIds:function(){return _e},addColumnViaDivider:function(){return tt},addModule:function(){return et},addRow:function(){return nt},addSpecialtySection:function(){return rt},changeColumnStructure:function(){return ot},clearLayout:function(){return it},clearMemoizedFilterModulesByIds:function(){return G},clearRemovedModules:function(){return st},cloneColumn:function(){return at},cloneModule:function(){return ut},conditionalDebouncedHistoryUpdate:function(){return Jt},copyModule:function(){return lt},copyModuleFromLibrary:function(){return ct},copyModuleFromPayload:function(){return dt},copyModulesFromPayload:function(){return pt},createMemoizeFunction:function(){return k},disableGlobalModule:function(){return mt},editChildren:function(){return gt},editModuleAttribute:function(){return ft},editModuleProp:function(){return yt},editUnsyncAttrs:function(){return ht},effects:function(){return Qt},extractInlineFontFamilies:function(){return H},filterModulesByIds:function(){return V},getAncestorModules:function(){return de},getChildModules:function(){return we},getClonedModules:function(){return N},getCloudLayoutMetadata:function(){return Ne},getContent:function(){return pe},getGlobalLayoutId:function(){return me},getGlobalLayoutOwners:function(){return ge},getModule:function(){return fe},getModuleAttr:function(){return he},getModuleAttrs:function(){return Ie},getModuleName:function(){return Me},getModuleStructureIds:function(){return Oe},getModuleType:function(){return ve},getModuleWithChildren:function(){return be},getModulesByIds:function(){return Ee},getParentModule:function(){return ce},getParentModuleId:function(){return Ae},getParentModuleType:function(){return Le},getRootModuleIds:function(){return Te},getSiblingModuleIds:function(){return Ce},getUsedPresets:function(){return De},hasStickyState:function(){return Se},importContent:function(){return It},insertIdIntoIdList:function(){return p},isCloneable:function(){return P},isContentEmpty:function(){return Re},isDisabled:function(){return Ue},isStickyStateActive:function(){return Pe},longerDebouncedAddHistoryLayoutItem:function(){return qt},memoizedFilterModulesByIds:function(){return j},mergeGlobalModules:function(){return Mt},moveModule:function(){return Et},moveModules:function(){return _t},parseSerializedPostIntoFlatModuleObject:function(){return z},quickDebouncedAddHistoryLayoutItem:function(){return Wt},registerEditPostStore:function(){return Be},removeColumn:function(){return Ot},removeGlobalModuleAttribute:function(){return vt},removeGlobalParentAttribute:function(){return bt},removeModule:function(){return At},removeModuleAttribute:function(){return Lt},removeModuleAttributes:function(){return Tt},removeModuleStateProperties:function(){return Ct},replaceModuleAttributes:function(){return Dt},revertGlobalModuleEditState:function(){return St},setGlobalModuleAttribute:function(){return Ut},setGlobalParentAttribute:function(){return Rt},setLayoutState:function(){return Pt},syncGlobalLayoutAttributes:function(){return Nt},syncModuleGlobalColors:function(){return wt},syncModuleInlineFont:function(){return Bt},updateUsedPresets:function(){return kt}});var t={};n.r(t),n.d(t,{addColumnViaDivider:function(){return tt},addModule:function(){return et},addRow:function(){return nt},addSpecialtySection:function(){return rt},changeColumnStructure:function(){return ot},clearLayout:function(){return it},clearRemovedModules:function(){return st},cloneColumn:function(){return at},cloneModule:function(){return ut},copyModule:function(){return lt},copyModuleFromLibrary:function(){return ct},copyModuleFromPayload:function(){return dt},copyModulesFromPayload:function(){return pt},disableGlobalModule:function(){return mt},editChildren:function(){return gt},editModuleAttribute:function(){return ft},editModuleProp:function(){return yt},editUnsyncAttrs:function(){return ht},importContent:function(){return It},mergeGlobalModules:function(){return Mt},moveModule:function(){return Et},moveModules:function(){return _t},removeColumn:function(){return Ot},removeGlobalModuleAttribute:function(){return vt},removeGlobalParentAttribute:function(){return bt},removeModule:function(){return At},removeModuleAttribute:function(){return Lt},removeModuleAttributes:function(){return Tt},removeModuleStateProperties:function(){return Ct},replaceModuleAttributes:function(){return Dt},revertGlobalModuleEditState:function(){return St},setGlobalModuleAttribute:function(){return Ut},setGlobalParentAttribute:function(){return Rt},setLayoutState:function(){return Pt},syncGlobalLayoutAttributes:function(){return Nt},syncModuleGlobalColors:function(){return wt},syncModuleInlineFont:function(){return Bt},updateUsedPresets:function(){return kt}});var e={};n.r(e),n.d(e,{__DEPRECATED__getModulesByIds:function(){return _e},getAncestorModules:function(){return de},getChildModules:function(){return we},getCloudLayoutMetadata:function(){return Ne},getContent:function(){return pe},getGlobalLayoutId:function(){return me},getGlobalLayoutOwners:function(){return ge},getModule:function(){return fe},getModuleAttr:function(){return he},getModuleAttrs:function(){return Ie},getModuleName:function(){return Me},getModuleStructureIds:function(){return Oe},getModuleType:function(){return ve},getModuleWithChildren:function(){return be},getModulesByIds:function(){return Ee},getParentModule:function(){return ce},getParentModuleId:function(){return Ae},getParentModuleType:function(){return Le},getRootModuleIds:function(){return Te},getSiblingModuleIds:function(){return Ce},getUsedPresets:function(){return De},hasStickyState:function(){return Se},isCloneable:function(){return P},isContentEmpty:function(){return Re},isDisabled:function(){return Ue},isStickyStateActive:function(){return Pe}});var o=n(33042),i=n.n(o),s=window.divi.data,a=window.divi.history,u=window.divi.middleware,l=window.divi.module,c=window.divi.moduleLibrary,d=window.divi.conversion;const p=(t,e,n,r="after")=>{const o=[...n],i="after"===r?n.indexOf(e)+1:n.indexOf(e);return o.splice(i,0,t),o};var m,g=window.lodash,f=new Uint8Array(16);function y(){if(!m&&!(m="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return m(f)}var h=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var I=function(t){return"string"==typeof t&&h.test(t)},M=[],E=0;E<256;++E)M.push((E+256).toString(16).substr(1));var _=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(M[t[e+0]]+M[t[e+1]]+M[t[e+2]]+M[t[e+3]]+"-"+M[t[e+4]]+M[t[e+5]]+"-"+M[t[e+6]]+M[t[e+7]]+"-"+M[t[e+8]]+M[t[e+9]]+"-"+M[t[e+10]]+M[t[e+11]]+M[t[e+12]]+M[t[e+13]]+M[t[e+14]]+M[t[e+15]]).toLowerCase();if(!I(n))throw TypeError("Stringified UUID is invalid");return n};var O=function(t,e,n){var r=(t=t||{}).random||(t.rng||y)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var o=0;o<16;++o)e[n+o]=r[o];return e}return _(r)},v=window.vendor.wp.hooks;function b(t,e="expected a function, instead received "+typeof t){if("function"!=typeof t)throw new TypeError(e)}var A=t=>Array.isArray(t)?t:[t];function L(t){const e=Array.isArray(t[0])?t[0]:t;return function(t,e="expected all items to be functions, instead received the following types: "){if(!t.every((t=>"function"==typeof t))){const n=t.map((t=>"function"==typeof t?`function ${t.name||"unnamed"}()`:typeof t)).join(", ");throw new TypeError(`${e}[${n}]`)}}(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function T(t,e){const n=[],{length:r}=t;for(let o=0;o<r;o++)n.push(t[o].apply(null,e));return n}Symbol(),Object.getPrototypeOf({});var C="undefined"!=typeof WeakRef?WeakRef:class{constructor(t){this.value=t}deref(){return this.value}};function D(t,e={}){let n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:r}=e;let o,i=0;function s(){let e=n;const{length:s}=arguments;for(let t=0,n=s;t<n;t++){const n=arguments[t];if("function"==typeof n||"object"==typeof n&&null!==n){let t=e.o;null===t&&(e.o=t=new WeakMap);const r=t.get(n);void 0===r?(e={s:0,v:void 0,o:null,p:null},t.set(n,e)):e=r}else{let t=e.p;null===t&&(e.p=t=new Map);const r=t.get(n);void 0===r?(e={s:0,v:void 0,o:null,p:null},t.set(n,e)):e=r}}const a=e;let u;if(1===e.s?u=e.v:(u=t.apply(null,arguments),i++),a.s=1,r){const t=o?.deref?.()??o;null!=t&&r(t,u)&&(u=t,0!==i&&i--);o="object"==typeof u&&null!==u||"function"==typeof u?new C(u):u}return a.v=u,u}return s.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},s.resetResultsCount()},s.resultsCount=()=>i,s.resetResultsCount=()=>{i=0},s}function S(t,...e){const n="function"==typeof t?{memoize:t,memoizeOptions:e}:t,r=(...t)=>{let e,r=0,o=0,i={},s=t.pop();"object"==typeof s&&(i=s,s=t.pop()),b(s,`createSelector expects an output function after the inputs, but received: [${typeof s}]`);const a={...n,...i},{memoize:u,memoizeOptions:l=[],argsMemoize:c=D,argsMemoizeOptions:d=[],devModeChecks:p={}}=a,m=A(l),g=A(d),f=L(t),y=u((function(){return r++,s.apply(null,arguments)}),...m);const h=c((function(){o++;const t=T(f,arguments);return e=y.apply(null,t),e}),...g);return Object.assign(h,{resultFunc:s,memoizedResultFunc:y,dependencies:f,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>e,recomputations:()=>r,resetRecomputations:()=>{r=0},memoize:u,argsMemoize:c})};return Object.assign(r,{withTypes:()=>r}),r}var U=S(D),R=Object.assign(((t,e=U)=>{!function(t,e="expected an object, instead received "+typeof t){if("object"!=typeof t)throw new TypeError(e)}(t,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof t);const n=Object.keys(t);return e(n.map((e=>t[e])),((...t)=>t.reduce(((t,e,r)=>(t[n[r]]=e,t)),{})))}),{withTypes:()=>R});const P=U([(t,e)=>e.moduleAppearance,(t,e)=>e.themeBuilderLayout,(t,e)=>{const{moduleAppearance:n,moduleName:r,themeBuilderLayout:o}=e,s=e?.moduleCount??i()({});let a=0;return e.moduleAppearance&&(a+=s.getIn([r,o]),"multipleAliases"in n&&(0,g.forEach)(n.multipleAliases,(t=>{a+=s.getIn([t,o])??0}))),a}],((t,e,n)=>{if(Boolean(t)){if("themeBuilderLayouts"in t&&!(0,g.includes)(t.themeBuilderLayouts,e))return!1;if("multiple"in t){if(!0===t.multiple)return!0;if(n>=("number"==typeof t.multiple?t.multiple:1))return!1}}return!0})),N=(t,e)=>{const{moduleId:n,targetParentId:r="",moduleAppearanceSettings:o={},themeBuilderLayout:s="postContent",moduleCount:a}=e,u=t.getIn(["content"]),l=r||u.getIn([n,"parent"]);let c,d=i()({});const p=(e,n)=>{(0,g.isEmpty)(e)||(0,g.forEach)(e,(e=>{const r=u.getIn([e]),i=O(),m=(0,v.applyFilters)("divi.cloneModule.attrs",r.asMutable({deep:!0})?.props?.attrs,{state:u.asMutable({deep:!0}),name:r?.name,id:i,parentId:l,sourceId:e}),f=o[r?.name];if(!P(t,{moduleName:r?.name,moduleAppearance:f,themeBuilderLayout:s,moduleCount:a}))return;const y={children:[],id:i,name:r?.name,parent:n,props:(0,g.isEmpty)(m)?r?.props:{...r?.props,attrs:m}};d=d.setIn([i],y);const h=d.getIn([n,"children","length"]);(0,g.isNumber)(h)?d=d.setIn([n,"children",`${h}`],i):c=i;const I=r.asMutable({deep:!0})?.children??[];p(I,i)}))};p([n],l);const m=u.getIn([l,"children"],i()([])),f=(0,g.findIndex)(m.asMutable(),(t=>t===n)),y=(0,g.slice)(m,0,f+1),h=(0,g.slice)(m,f+1);return{clonedModuleId:c,clonedParent:l,clonedParentChildren:[].concat(y,[c],h),clonedModules:d}};var w=n(53316),B=n.n(w);const k=t=>{const e=new Map;return{memoizeFunctionStore:e,memoized:B()(t,{cache:{create:()=>({has:t=>e.has(t),get:t=>e.get(t),set(t,n){e.set(t,n)}})},strategy:B().strategies.variadic}),clear:()=>e.clear()}},V=(t,e,n)=>{const r=i().asMutable(e,{deep:!0}),o=(0,g.pickBy)(r,(e=>(0,g.includes)(t,e.id)));return n?o:i()(o)},Y=k(V),j=Y.memoized,G=Y.clear;var F=window.vendor.wp.blockSerializationDefaultParser,x=window.vendor.wp.blocks;const z=(t,e,n=O)=>{const r=e||{children:[],name:"divi/root",id:"root",props:{attrs:{}}},o={[r.id]:{...r}},i=(t,e)=>{if(!t.blockName)return;if("divi/modules-styles"===t.blockName)return;let r,s;if("yes"===(0,g.get)(t,"attrs.nonconvertible")){const e=(0,F.parse)((0,d.maybeConvertContent)(t.innerHTML.trim()))[0];r=e?.blockName,s=e?.attrs??{}}else r=t?.blockName,s=t?.attrs??{};const a=!(0,x.getBlockType)(r)||"divi/shortcode-module"===r,u=a?t?.innerHTML:null,l=n(),c={name:r,props:{attrs:s},id:l,parent:e,children:[]};a&&(c.props.innerHTML=u),o[l]=c,o[e].children.push(l),(0,g.isFunction)((0,g.get)(t,"innerBlocks.map"))&&(0,g.forEach)(t.innerBlocks,(t=>i(t,l)))},s=t.replace(/^(?:<!--\swp:divi\/placeholder\s-->)/g,"").replace(/(?:<!--\s\/wp:divi\/placeholder\s-->)$/g,""),a=(0,F.parse)(s);return(0,g.forEach)(a,(t=>{i(t,r.id)})),o},H=t=>{if(!(0,g.isString)(t)||(0,g.isEmpty)(t))return[];const e=[],n=[(new DOMParser).parseFromString(t,"text/html").body];for(;n.length>0;){const t=n.pop(),{fontFamily:r}=t.style;if(r){const t=r.split(",").map((t=>t.trim().replace(/['"]/g,"")));e.push(...t)}n.push(...Array.from(t.children))}return(0,g.uniq)(e)},$=t=>{const{id:e,position:n,contentState:r}=t,o=r.getIn([e,"children"]);return o?.["first"===n?0:o.length-1]||""},W=t=>{const{action:e,contentState:n}=t,{id:r,position:o}=e,i={},s=n.getIn([r])?.parent,a="inside"===o?r:s;if("string"!=typeof a)return i;const u=n.getIn([a])?.children??[];let l="";switch(o){case"before":l=u?.[u?.indexOf(r)-1];break;case"after":l=u?.[u?.indexOf(r)+1];break;case"inside":l=u?.[u?.length-1]}if(!l)return i;const c=n.getIn([l,"name"]);return(n.getIn([l,"children"])??[]).forEach((t=>{const e=n.getIn([t])?.name;e&&(i[e]||(i[e]={moduleName:e,count:0}),i[e].count+=1)})),i[c]={moduleName:c,count:1},i},q=t=>{const{contentState:e}=t,n={};return(0,g.forEach)(e,(t=>{(0,g.isObject)(t)&&"divi/root"!==t?.name&&"divi/placeholder"!==t?.name&&"divi/global-layout"!==t?.name&&(n[t.name]||(n[t.name]={moduleName:t.name,count:0}),n[t.name].count++)})),n};var J=window.divi.moduleUtils;const Q=t=>{const{id:e,contentState:n}=t,r={},o=(0,J.populateContentTree)({tree:n,rootId:e});return(0,g.forEach)(o,(t=>{(0,g.isObject)(t)&&"divi/root"!==t?.name&&"divi/placeholder"!==t?.name&&(r[t.name]||(r[t.name]={moduleName:t.name,count:0}),r[t.name].count++)})),r},K=t=>{const{id:e,position:n,contentState:r}=t,o=r.getIn([e,"parent"]),i=r.getIn([o]);if(!i||!(0,g.isObject)(i))return"";const s=i?.children,a=s.indexOf(e),u=s?.["after"===n?a+1:a-1];return u||""},X={content:"postContent",header:"header",body:"body",footer:"footer"},Z=(t,e)=>{const n=(0,s.select)("divi/settings").getSetting(["themeBuilder","layout"],"postContent"),r=e.getState();switch(t.type){case"ADD_COLUMN_VIA_DIVIDER":{const e=$({id:t?.id,position:"first",contentState:r.getIn(["content"])}),o=r.getIn(["content",e,"name"],"divi/column");(0,s.dispatch)("divi/module").increaseModuleCount({moduleName:o,layout:n});break}case"ADD_MODULE":(0,s.dispatch)("divi/module").increaseModuleCount({moduleName:t.name,layout:n});break;case"ADD_ROW":case"ADD_SPECIALTY_SECTION":(0,s.dispatch)("divi/module").setModuleCount({layout:n,operation:"increase",modules:W({action:t,contentState:r.getIn(["content"])})});break;case"CHANGE_COLUMN_STRUCTURE":{const{isStructureSame:e,operation:o,moduleCount:i}=(t=>{const{contentState:e,originStructure:n,targetStructure:r,id:o}=t,i=n.split(","),s=r.split(","),a=0==i.length-s.length;if(a)return{isStructureSame:a,operation:"increase",moduleCount:{}};const u=i.length<s.length?"increase":"decrease",l=Math.abs(i.length-s.length),c=$({id:o,position:"first",contentState:e}),d=e.getIn([c])?.name??"divi/column";return{isStructureSame:a,operation:u,moduleCount:{[d]:{moduleName:d,count:l}}}})({id:t.id,originStructure:t?.columnStructureOrigin??"",targetStructure:t?.columnStructure??"",contentState:r.getIn(["content"])});e||(0,s.dispatch)("divi/module").setModuleCount({layout:n,operation:o,modules:i});break}case"CLEAR_LAYOUT":(0,s.dispatch)("divi/module").clearModuleCount({layout:n});break;case"CLONE_MODULE":{const e=K({id:t?.params?.id,position:"after",contentState:r.getIn(["content"])});e&&(0,s.dispatch)("divi/module").setModuleCount({layout:n,operation:"increase",modules:Q({id:e,contentState:r.getIn(["content"])})});break}case"COPY_MODULE":case"COPY_MODULE_FROM_PAYLOAD":{const e=t?.params?.targetId,o="inside"===t?.params?.position?$({id:e,position:"last",contentState:r.getIn(["content"])}):K({id:e,position:"after",contentState:r.getIn(["content"])});o&&(0,s.dispatch)("divi/module").setModuleCount({layout:t?.params?.themeBuilderLayout??n,operation:"increase",modules:Q({id:o,contentState:r.getIn(["content"])})});break}case"COPY_MODULES_FROM_PAYLOAD":default:break;case"COPY_MODULE_FROM_LIBRARY":{const e=t?.targetId,o="inside"===t?.position?$({id:e,position:"last",contentState:r.getIn(["content"])}):K({id:e,position:"after",contentState:r.getIn(["content"])});o&&(0,s.dispatch)("divi/module").setModuleCount({layout:n,operation:"increase",modules:Q({id:o,contentState:r.getIn(["content"])})});break}case"IMPORT_CONTENT":"on"===t?.importOptionsValues?.replaceLayout?(0,s.dispatch)("divi/module").setModuleCount({layout:n,operation:"set",modules:q({contentState:r.getIn(["content"])})}):(0,s.dispatch)("divi/module").setModuleCount({layout:n,operation:"increase",modules:q({contentState:z((0,d.maybeConvertContent)(t?.content))})});break;case"MERGE_GLOBAL_MODULES":(0,s.dispatch)("divi/module").setModuleCount({layout:n,operation:"increase",modules:q({contentState:t?.content})});break;case"REMOVE_MODULE":case"REMOVE_COLUMN":(0,s.dispatch)("divi/module").setModuleCount({layout:n,operation:"decrease",modules:Q({id:t?.id,contentState:r.getIn(["content"])})});break;case"SET_LAYOUT_STATE":(0,s.dispatch)("divi/module").setModuleCount({layout:(o=t.location,X[o]??o),operation:"set",modules:q({contentState:r.getIn(["content"])})})}var o},tt=(t,e,n="user")=>({type:"ADD_COLUMN_VIA_DIVIDER",id:t,dividerPosition:e,caller:n}),et=(t,e,n={},r="inside",o="",i="user")=>({type:"ADD_MODULE",id:t,name:e,props:n,position:r,newId:o,caller:i}),nt=(t,e,n,r=!1,o="user")=>({type:"ADD_ROW",id:t,position:e,columnStructure:n,inner:r,caller:o}),rt=(t,e,n,r)=>({type:"ADD_SPECIALTY_SECTION",id:t,position:e,columnStructure:n,innerPosition:r}),ot=(t,e,n="user")=>({type:"CHANGE_COLUMN_STRUCTURE",id:t,columnStructure:e,caller:n}),it=()=>({type:"CLEAR_LAYOUT"}),st=t=>({type:"CLEAR_REMOVED_MODULES",params:t}),at=t=>({type:"CLONE_COLUMN",params:t}),ut=(t,e)=>({type:"CLONE_MODULE",params:t,name:e}),lt=t=>({type:"COPY_MODULE",params:t}),ct=(t,e,n,r="user")=>({type:"COPY_MODULE_FROM_LIBRARY",payload:t,position:e,targetId:n,caller:r}),dt=(t,e)=>({type:"COPY_MODULE_FROM_PAYLOAD",params:t,name:e}),pt=t=>({type:"COPY_MODULES_FROM_PAYLOAD",params:t}),mt=t=>({type:"DISABLE_GLOBAL_MODULE",id:t}),gt=(t,e)=>({type:"EDIT_CHILDREN",id:t,children:e}),ft=({id:t,attrName:e,value:n,caller:r="user"})=>({type:"EDIT_MODULE_ATTRIBUTE",id:t,attrName:e,value:n,caller:r}),yt=(t,e,n)=>({type:"EDIT_MODULE_PROP",id:t,propName:e,propValue:n}),ht=(t,e,n,r="user")=>({type:"EDIT_UNSYNC_ATTRS",id:t,attribute:e,isSynced:n,caller:r}),It=({content:t,presetIdsToReplace:e,defaultPresetAttrs:n,importOptionsValues:r})=>({type:"IMPORT_CONTENT",content:t,presetIdsToReplace:e,defaultPresetAttrs:n,importOptionsValues:r}),Mt=(t,e)=>({type:"MERGE_GLOBAL_MODULES",content:t,owner:e}),Et=(t,e,n,r="user")=>({type:"MOVE_MODULE",id:t,position:e,targetId:n,caller:r}),_t=(t,e,n)=>({type:"MOVE_MODULES",ids:t,position:e,targetId:n}),Ot=(t,e="user")=>({type:"REMOVE_COLUMN",id:t,caller:e}),vt=t=>({type:"REMOVE_GLOBAL_MODULE_ATTRIBUTE",id:t}),bt=t=>({type:"REMOVE_GLOBAL_PARENT_ATTRIBUTE",id:t}),At=(t,e="user")=>({type:"REMOVE_MODULE",id:t,caller:e}),Lt=(t,e,n="user")=>({type:"REMOVE_MODULE_ATTRIBUTE",id:t,attrName:e,caller:n}),Tt=({id:t,attrNames:e,caller:n="user"})=>({type:"REMOVE_MODULE_ATTRIBUTES",id:t,attrNames:e,caller:n}),Ct=t=>({type:"REMOVE_MODULE_STATE_PROPERTIES",params:t}),Dt=(t,e,n="user",r=!1)=>({type:"REPLACE_MODULE_ATTRIBUTES",id:t,attrs:e,caller:n,replaceAllAttrs:r}),St=({id:t,owner:e,caller:n="user"})=>({type:"REVERT_GLOBAL_MODULE_EDIT_STATE",id:t,owner:e,caller:n}),Ut=(t,e)=>({type:"SET_GLOBAL_MODULE_ATTRIBUTE",id:t,value:e}),Rt=(t,e)=>({type:"SET_GLOBAL_PARENT_ATTRIBUTE",id:t,value:e}),Pt=({location:t,layoutState:e})=>({type:"SET_LAYOUT_STATE",location:t,layoutState:e}),Nt=(t,e,n)=>({type:"SYNC_GLOBAL_LAYOUT_ATTRIBUTES",id:t,attrs:e,unsyncAttrs:n}),wt=t=>({type:"SYNC_MODULE_GLOBAL_COLORS",globalColors:t}),Bt=()=>({type:"SYNC_MODULE_INLINE_FONT"}),kt=({presetType:t,presets:e})=>({type:"UPDATE_USED_PRESETS",presetType:t,presets:e});var Vt=window.vendor.wp.i18n;const Yt=(t,e)=>{const n={ADD_COLUMN_VIA_DIVIDER:(0,Vt.__)("Added Column","et_builder"),ADD_MODULE:(0,Vt.__)("Added %s","et_builder"),ADD_ROW:(0,Vt.__)("Added Row","et_builder"),ADD_SPECIALTY_SECTION:(0,Vt.__)("Added Specialty Section","et_builder"),CHANGE_COLUMN_STRUCTURE:(0,Vt.__)("Changed Column Structure","et_builder"),CLEAR_LAYOUT:(0,Vt.__)("Cleared Layout","et_builder"),CLONE_MODULE:(0,Vt.__)("Cloned %s","et_builder"),CLONE_COLUMN:(0,Vt.__)("Cloned Column","et_builder"),COPY_MODULE_FROM_PAYLOAD:(0,Vt.__)("Copied %s","et_builder"),COPY_MODULES_FROM_PAYLOAD:(0,Vt.__)("Copied Modules","et_builder"),EDIT_CHILDREN:(0,Vt.__)("Edited %s Child Modules","et_builder"),EDIT_MODULE_ATTRIBUTE:(0,Vt.__)("Edited %s","et_builder"),EDIT_UNSYNC_ATTRS:(0,Vt.__)("Edited Unsynced Attributes","et_builder"),IMPORT_CONTENT:(0,Vt.__)("Imported Content","et_builder"),MOVE_MODULE:(0,Vt.__)("Moved %s","et_builder"),MOVE_MODULES:(0,Vt.__)("Moved Modules","et_builder"),REMOVE_COLUMN:(0,Vt.__)("Removed Column","et_builder"),REMOVE_MODULE:(0,Vt.__)("Removed %s","et_builder"),REMOVE_MODULE_ATTRIBUTE:(0,Vt.__)("Removed Module Attribute","et_builder"),REPLACE_MODULE_ATTRIBUTES:(0,Vt.__)("Replaced Module Attributes","et_builder")},r=e.getState()?.getIn(["content"]),o=t?.type??"",i="id"in t?t.id:"",a="name"in t?t.name:r?.[i]?.name??"",u=(0,s.select)("divi/module-library").getModule(a)?.title??"";let l=n?.[o];l?.includes("%s")&&(l=(0,Vt.sprintf)(l,u));const c=new Date,d=c.getTime(),p=c.toLocaleTimeString();(0,s.dispatch)("divi/history").addLayoutItem({label:l,moduleId:i,moduleLabel:u,moduleName:a,state:r,timestamp:d,humanTime:p,type:o,storeName:"divi/edit-post"})},jt=(t,e)=>{const n=(0,g.get)(t,"id"),r={label:(0,g.get)(e.getState(),["content",n,"name"]),details:""};if("EDIT_MODULE_ATTRIBUTE"===t.type){const e=(0,g.isString)(t.value)?t.value:JSON.stringify(t.value);r.details=`${t.attrName}: ${e}`}(0,s.dispatch)("divi/history").add("edit-post",t.type,n,r)},Gt=t=>{const e=(0,s.select)("divi/edit-post").getModuleWithChildren(t.id),n=Object.values(e).find((t=>!!(0,s.select)("divi/modal-library").isModuleEdited(t.id))),r=t.id===n?.id,o=!r&&void 0!==n,i=(0,s.select)("divi/edit-post").getParentModuleId(t.id);(r||o)&&("root"===i?(0,s.dispatch)("divi/modal-library").open({name:"divi/page-settings"}):(0,s.dispatch)("divi/modal-library").open({name:"divi/module",owner:i}))},Ft=t=>{if("caller"in t&&"global-layout"===t.caller)return;const e=[];let n="";const r=t=>(0,s.select)("divi/edit-post").getGlobalLayoutId(t),o=(0,s.select)("divi/module").getModuleCount();switch(t.type){case"ADD_COLUMN_VIA_DIVIDER":{const{id:o}=t;r(o)&&(n=o,e.push(r(o)));break}case"ADD_MODULE":{const{id:o,name:i}=t;if("root"===o)return;const a=(0,s.select)("divi/edit-post").getParentModule(o).id,u=(0,s.select)("divi/module-library").isChildModule(i)?(0,s.select)("divi/edit-post").getParentModule(a).id:(0,s.select)("divi/edit-post").getParentModule(o).id;r(u)&&!(0,s.select)("divi/module-library").isChildModule(i)&&(n=u,e.push(r(u)));break}case"ADD_ROW":{const{id:o}=t;r(o)&&(n=o,e.push(r(o)));break}case"CHANGE_COLUMN_STRUCTURE":{const{id:o}=t;r(o)&&(n=o,e.push(r(o)));break}case"CLONE_MODULE":{const{id:o}=t.params;r(o)&&(n=o,e.push(r(o)));break}case"COPY_MODULE_FROM_PAYLOAD":{const{targetId:o}=t.params;r(o)&&(n=o,e.push(r(o)));break}case"COPY_MODULES_FROM_PAYLOAD":{const{targetId:o}=t.params;r(o)&&(n=o,e.push(r(o)));break}case"EDIT_MODULE_ATTRIBUTE":{const{id:o}=t;r(o)&&(n=o,e.push(r(o)));break}case"EDIT_UNSYNC_ATTRS":{const{id:o}=t;r(o)&&(n=o,e.push(r(o)));break}case"MOVE_MODULE":{const{id:o,targetId:i}=t;r(o)&&(n=o,e.push(r(o))),r(i)&&(n=i,e.push(r(i)));break}case"MOVE_MODULES":{const{ids:o,targetId:i}=t;o.forEach((t=>{r(t)&&(n=t,e.push(r(t)))})),r(i)&&(n=i,e.push(r(i)));break}case"REMOVE_COLUMN":{const{id:o}=t;r(o)&&(n=o,e.push(r(o)));break}case"REMOVE_MODULE":{const{id:o}=t;r(o)&&(n=o,e.push(r(o)));break}case"REMOVE_MODULE_ATTRIBUTE":{const{id:o}=t;r(o)&&(n=o,e.push(r(o)));break}case"REPLACE_MODULE_ATTRIBUTES":{const{id:o}=t;r(o)&&(n=o,e.push(r(o)));break}default:return}(0,g.forEach)(e,(e=>{const i=[];let a="",u="",l="",c="";const d={addColumnViaDivider:()=>"ADD_COLUMN_VIA_DIVIDER"===t.type&&(0,s.dispatch)("divi/edit-post").addColumnViaDivider(c,t.dividerPosition,"global-layout"),addModule:()=>"ADD_MODULE"===t.type&&(0,s.dispatch)("divi/edit-post").addModule(c,t.name,t.props,t.position,t.newId,"global-layout"),addRow:()=>"ADD_ROW"===t.type&&(0,s.dispatch)("divi/edit-post").addRow(c,t.position,t.columnStructure,t.inner,"global-layout"),changeColumnStructure:()=>"CHANGE_COLUMN_STRUCTURE"===t.type&&(0,s.dispatch)("divi/edit-post").changeColumnStructure(c,t.columnStructure,"global-layout"),cloneModule:()=>"CLONE_MODULE"===t.type&&(0,s.dispatch)("divi/edit-post").cloneModule({id:c,caller:"global-layout",moduleCount:o}),copyModuleFromPayload:()=>"COPY_MODULE_FROM_PAYLOAD"===t.type&&(0,s.dispatch)("divi/edit-post").copyModuleFromPayload({payload:t.params.payload,position:t.params.position,targetId:c,caller:"global-layout",moduleCount:o}),copyModulesFromPayload:()=>"COPY_MODULES_FROM_PAYLOAD"===t.type&&(0,s.dispatch)("divi/edit-post").copyModulesFromPayload({payload:t.params.payload,position:t.params.position,targetId:c,caller:"global-layout",moduleCount:o}),editModuleAttribute:()=>{if("EDIT_MODULE_ATTRIBUTE"===t.type){const e=(0,s.select)("divi/edit-post").getModuleAttr(a,"unsyncAttrs");!(!("attrName"in t)||!Array.isArray(e))&&e.some((e=>e.attrName===t.attrName))||(0,s.dispatch)("divi/edit-post").editModuleAttribute({id:c,attrName:t.attrName,value:t.value,caller:"global-layout"})}},moveModule:()=>"MOVE_MODULE"===t.type&&(0,s.dispatch)("divi/edit-post").moveModule(u,t.position,l,"global-layout"),removeColumn:()=>"REMOVE_COLUMN"===t.type&&(0,s.dispatch)("divi/edit-post").removeColumn(c,"global-layout"),removeModule:()=>"REMOVE_MODULE"===t.type&&(0,s.dispatch)("divi/edit-post").removeModule(c,"global-layout"),removeModuleAttribute:()=>"REMOVE_MODULE_ATTRIBUTE"===t.type&&(0,s.dispatch)("divi/edit-post").removeModuleAttribute(c,t.attrName,"global-layout"),replaceModuleAttributes:()=>"REPLACE_MODULE_ATTRIBUTES"===t.type&&(0,s.dispatch)("divi/edit-post").replaceModuleAttributes(c,t.attrs,"global-layout"),editUnsyncAttrs:()=>{if("EDIT_UNSYNC_ATTRS"===t.type&&!1===t.isSynced){const t=(0,s.select)("divi/edit-post").getModuleAttrs(a),e=(0,s.select)("divi/edit-post").getModuleAttr(c,"unsyncAttrs")||[];(0,s.dispatch)("divi/edit-post").syncGlobalLayoutAttributes(c,t,e)}}},p=(0,g.camelCase)(t.type),m="EDIT_MODULE_ATTRIBUTE"!==t.type,f=(0,s.select)("divi/edit-post").getGlobalLayoutOwners(e);(0,g.forEach)(f,(t=>{(0,s.select)("divi/modal-library").isModuleEdited(t)||((t,e)=>{let n=!1;const r=(t,e)=>{const o=(0,s.select)("divi/edit-post").getParentModule(e).id;o&&o===t?n=!0:o&&"root"!==o&&r(t,o)};return r(t,e),n})(t,n)||t===n?a=t:i.push(t)}));const y=(0,s.select)("divi/global-layouts").getGlobalLayoutMap(e),h=(n,i,f=!1)=>{if("moveModule"!==p&&(!["cloneModule","removeModule","addRow","copyModuleFromPayload","copyModulesFromPayload"].includes(p)||!f)&&("id"in t&&n===t.id||"targetId"in t&&n===t.targetId)){c=i,d[p]();const n=(0,s.select)("divi/edit-post").getModuleAttr(a,"unsyncAttrs");if(!(!(!("attrName"in t)||!Array.isArray(n))&&n.some((e=>e.attrName===t.attrName)))){const t=(0,s.select)("divi/edit-post").getModuleWithChildren(a);(0,s.dispatch)("divi/global-layouts").setLayoutContent(e,t,a,m)}return}const I=y.filter((t=>n in t))?.[0]?.[n]?.children;Array.isArray(I)&&I.length&&(0,g.forEach)(I,((e,n)=>{const a=y.filter((t=>i in t))[0];if(!a)return;const c=a[i]?.children;if("MOVE_MODULE"===t.type){if(e===t.id&&(u=c[n]),e===t.targetId&&(l=c[n],!r(t.id)))return void(0,s.dispatch)("divi/edit-post").copyModule({id:t.id,position:t.position,targetId:l,moduleCount:o});if(!f&&""!==u&&""!==l)return void d[p]()}h(e,c[n],!1)}))};(0,g.forEach)(i,(t=>{h(a,t,!0)}));const I=(0,s.select)("divi/edit-post").getModuleAttr(a,"unsyncAttrs");if(!(!(!("attrName"in t)||!Array.isArray(I))&&I.some((e=>e.attrName===t.attrName)))){const t=(0,s.select)("divi/edit-post").getModuleWithChildren(a);(0,s.dispatch)("divi/global-layouts").setLayoutContent(e,t,a,m)}}))},xt=(t,e)=>{if("EDIT_MODULE_ATTRIBUTE"===t.type&&"modulePreset"!==t?.attrName)return;const n=(0,g.get)(e.getState()?.asMutable({deep:!0}),"content"),r=(0,J.populateUsedPresets)(n);(0,s.dispatch)("divi/edit-post").updateUsedPresets({presetType:"module",presets:r})};var zt=window.jQuery,Ht=n.n(zt);const $t=(t,e="")=>{let n=0;const r=setInterval((()=>{const o="wireframe"===(0,s.select)("divi/app-ui").getView(),i=Ht()(`${o?".et-vb-wireframe":"divi/section"===e?".et_pb_section":"divi/row"===e||"divi/row-inner"===e?".et_pb_row":"divi/column"===e||"divi/column-inner"===e?".et_pb_column":".et_pb_module"}[data-id="${t}"] .et-vb-add-module`);(i.length||n>1e3)&&(clearInterval(r),(0,J.openAddModuleModal)(i,t,!0)),n+=5}),5)},Wt=(0,g.debounce)(Yt,300),qt=(0,g.debounce)(Yt,500),Jt=(t,e)=>{!("caller"in t)||"history"!==t.caller&&"global-layout"!==t.caller?qt(t,e):Yt(t,e)},Qt={ADD_COLUMN_VIA_DIVIDER:[Ft,xt,Z,jt,Yt],ADD_MODULE:[(t,e)=>{const n=(0,g.get)(t,"name"),r=(0,g.get)(t,"position");if("divi/section"===n&&"after"===r){const r=(0,g.get)(t,"id"),o=(0,g.get)(e.getState(),"content").getIn(["root","children"]),i=o.indexOf(r),s=o[i+1];$t(s,n)}},(t,e)=>{const n=(0,g.get)(t,"name"),r=(0,s.select)("divi/module-library").getModuleCategory(n);if(!(0,g.includes)(["module","fullwidth-module"],r))return;const o=(0,s.select)("divi/module-library").getChildModules({moduleName:n});if((0,g.isEmpty)(o))return;const i=(0,s.select)("divi/app-preferences").get(["module","dummyContent"]),a=(0,g.get)(e.getState(),"content"),u=(0,g.get)(t,"id"),l=(0,g.get)(t,"position"),c="inside"===l?u:(0,g.get)(a,[u,"parent"]),d=a.getIn([c,"children"],[]).asMutable(),p="inside"===l?(0,g.last)(d):d[d.indexOf(u)+("before"===l?-1:1)],m=(0,s.select)("divi/module-library").getModule(n);m.template&&m.template.forEach((t=>{const e=t[0],r=(0,g.isString)(t[1])?{}:t[1],o=(0,s.select)("divi/module-library").getModule(e),a=i&&o?.placeholderContent?o?.placeholderContent:{};if((0,g.includes)(o.parentsName,n)){const t={attrs:(0,g.merge)({},a,r)};(0,s.dispatch)("divi/edit-post").addModule(p,e,t,"inside")}}))},Ft,xt,Z,jt,Wt],ADD_ROW:[(t,e)=>{const n=(0,g.get)(e.getState(),"content"),r=(0,g.get)(t,"id"),o=(0,g.get)(t,"position"),i="inside"===o?r:(0,g.get)(n,[r,"parent"]),s=n.getIn([i,"children"],[]).asMutable(),a="inside"===o?(0,g.last)(s):s[s.indexOf(r)+("before"===o?-1:1)],u=(0,g.get)(n,a),l=(0,g.head)((0,g.get)(u,"children")),c="divi/row-inner"===(0,g.get)(n,[a,"name"])?"divi/column-inner":"divi/column";$t(l,c)},Ft,xt,Z,jt,Yt],ADD_SPECIALTY_SECTION:[(t,e)=>{const n=(0,g.get)(t,["innerPosition"]).split(",").indexOf("1"),r=(0,g.get)(t,"id"),o=(0,g.get)(e.getState(),"content"),i=o.getIn(["root","children"]),s=i.indexOf(r),a=i["after"===(0,g.get)(t,"position")?s+1:s-1],u=o.getIn([a,"children"])[n];$t(u,"divi/column")},Z,jt,Yt],CHANGE_COLUMN_STRUCTURE:[Ft,xt,Z,jt,Yt],CLEAR_LAYOUT:[(t,e)=>{const n=(0,g.get)(e.getState(),"content").getIn(["root","children",0]);$t(n,"divi/section")},xt,Z,Yt],CLONE_MODULE:[Ft,xt,Z,Yt],CLONE_COLUMN:[Z,jt,Yt],COPY_MODULE:[Ft,xt,Z,jt],COPY_MODULE_FROM_PAYLOAD:[Ft,xt,Z,jt,Yt],COPY_MODULES_FROM_PAYLOAD:[Ft,xt,Z,jt,Yt],COPY_MODULE_FROM_LIBRARY:[Z],EDIT_CHILDREN:[Wt],EDIT_MODULE_ATTRIBUTE:[Ft,xt,jt,Jt],EDIT_UNSYNC_ATTRS:[Ft,xt,jt,Yt],IMPORT_CONTENT:[xt,Z,Yt],MERGE_GLOBAL_MODULES:[Z],MOVE_MODULE:[Ft,xt,jt,Yt],MOVE_MODULES:[Ft,xt,jt,Yt],REMOVE_COLUMN:[Ft,xt,jt,Gt,Z,Yt],REMOVE_MODULE:[Ft,xt,jt,Gt,Z,Yt],REMOVE_MODULE_ATTRIBUTE:[Ft,xt,jt,Yt],REPLACE_MODULE_ATTRIBUTES:[Ft,xt,jt,Yt],SET_LAYOUT_STATE:[Z],SYNC_GLOBAL_MODULE_ATTRIBUTES:[jt],SYNC_MODULE_GLOBAL_COLORS:[(t,e)=>{const n=e.getState().content,r=JSON.stringify({...n}),o=new RegExp('"var[(]--(?:gcid-([0-9a-z-]*))[)]"',"gi"),i=(0,g.uniq)(Array.from(r.matchAll(o)).map((t=>t[1])));if(i.length>0){const t=Number((0,s.select)("divi/settings").getSetting(["post","id"]));t&&(0,s.dispatch)("divi/global-data").updateGlobalColorsUsedInPosts(t,i)}},jt]},Kt=()=>t=>e=>{const n=(0,s.select)("divi/modal-library").getModalOwner("divi/module"),r=(0,s.select)("divi/edit-post").getGlobalLayoutId(n),o=(0,s.select)("divi/global-layouts").getLayout(r)?.preEditContent;if(!!r&&!!o)return(0,s.dispatch)("divi/global-layouts").openConfirmationPopup({id:r}),null;return t(e)},Xt={ADD_COLUMN_VIA_DIVIDER:[Kt],ADD_MODULE:[Kt],ADD_ROW:[Kt],ADD_SPECIALTY_SECTION:[Kt],CHANGE_COLUMN_STRUCTURE:[()=>t=>e=>{const n=(0,s.select)("divi/edit-post").getContent().getIn([e.id])?.props?.attrs?.module?.advanced?.columnStructure?.desktop?.value??"";e.columnStructureOrigin=n;return t(e)},Kt],CLEAR_LAYOUT:[Kt],CLONE_MODULE:[Kt],CLONE_COLUMN:[Kt],COPY_MODULE:[Kt],COPY_MODULE_FROM_LIBRARY:[Kt],COPY_MODULE_FROM_PAYLOAD:[Kt],COPY_MODULES_FROM_PAYLOAD:[Kt],DISABLE_GLOBAL_MODULE:[Kt],EDIT_MODULE_ATTRIBUTE:[()=>t=>e=>{if((0,s.select)("divi/global-data").isActivePreset()||"modulePreset"===e.attrName){return t(e)}const n=e.id,r=(0,s.select)("divi/edit-post").getGlobalLayoutId(n);if(!!!r){return t(e)}const o=e.attrName,i=(0,s.select)("divi/global-layouts").getLayout(r)?.preEditContent,a=!!i,u=(0,s.select)("divi/edit-post").getModuleAttrs(n),l=(0,s.select)("divi/edit-post").getModuleAttr(n,o),c=(0,g.isEqual)((0,g.cloneDeep)(e.value),(0,g.cloneDeep)(l));a||c||((0,s.dispatch)("divi/history").disableHistoryTracking(),(0,s.dispatch)("divi/global-layouts").setPreEditContent({id:r,content:u}));return t(e)}],IMPORT_CONTENT:[Kt],MOVE_MODULE:[Kt],MOVE_MODULES:[Kt],REMOVE_MODULE:[Kt],REMOVE_COLUMN:[Kt],REVERT_GLOBAL_MODULE_EDIT_STATE:[()=>t=>e=>{const{owner:n}=e,r=e.id,o=(0,s.select)("divi/global-layouts").getLayout(r)?.preEditContent?.asMutable(),i=(0,g.omit)(o,["globalModule","unsyncAttrs","modulePreset"]);(0,g.forEach)(i,((t,e)=>{(0,s.dispatch)("divi/edit-post").editModuleAttribute({id:n,attrName:e,value:t})})),(0,s.dispatch)("divi/global-layouts").deletePreEditContent({id:r}),(0,s.dispatch)("divi/history").enableHistoryTracking();return t(e)}]},Zt=(t,e,n,r,o="after",i="")=>{const s=t.getIn([e,"parent"],""),a="inside"===o?e:s,u=i||O(),l=t.getIn([s,"props","attrs","globalModule"],!1),c=t.getIn([s,"props","attrs","globalParent"],!1),d=l||c||!1,m=(0,v.applyFilters)("divi.addModule.attrs",r?.attrs,{state:t.asMutable({deep:!0}),name:n,id:u,parentId:a}),f={id:u,children:[],name:n,parent:a,props:(0,g.isEmpty)(m)?r:{...r,attrs:{...m}}},y=t.getIn([a,"children"],[]),h="inside"===o?(0,g.isArray)(y)?[...y,f.id]:[f.id]:p(f.id,e,y.asMutable(),o);return t=t.merge({[f.id]:f}).setIn([a,"children"],h),d?t.setIn([f.id,"props","attrs","globalParent"],d):t},te=(t,e,n="postContent")=>{const r=t.getIn(["content"]),o=r.getIn([e],{});if((0,g.isEmpty)(o))return t;const i=o.getIn(["parent"]),s=r.getIn([i,"children"],[]).asMutable(),a=s.indexOf(e);if(a<0)return t;const u=[...s];if(u.splice(a,1),"root"===i&&0===u.length){const e=O(),n=r.setIn([i,"children"],[e]).setIn([e],{id:e,name:"divi/section",children:[],parent:"root",props:{attrs:{}}});return t.setIn(["content"],n)}const l=r.setIn([i,"children"],u);return t.setIn(["content"],l).setIn(["layouts",n,"removedModules",e],{id:e,timestamp:Date.now()})},ee=(t,e,n)=>{let r=t.getIn(["content"]);const o=r.getIn([e,"children"],[]),i=n.split(","),s=(0,g.isArray)(o)?o.length:0,a=i.length,u="divi/row-inner"===r.getIn([e,"name"])?"divi/column-inner":"divi/column";if(r=r.setIn([e,"props","attrs","module","advanced","columnStructure","desktop","value"],n),s>a){const e=s-a,n=o.slice(0-e),i=o[a-1];(0,g.forEach)(n,(e=>{const n=r.getIn([e,"children"],[]),o=r.getIn([i,"children"],[]).concat(n);(0,g.forEach)(n,(t=>{r=r.setIn([t,"parent"],i)})),r=r.setIn([i,"children"],o),r=r.setIn([e,"children"],[]),r=te(t.setIn(["content"],r),e).getIn(["content"])}))}else if(s<a){const t=a-s;(0,g.forEach)(i.slice(0-t),(t=>{r=Zt(r,e,u,{attrs:{module:{advanced:{type:{desktop:{value:t}}}}}},"inside")}))}return(0,g.forEach)(o,((t,e)=>{r=i[e]?r.setIn([t,"props","attrs","module","advanced","type","desktop","value"],i[e]):r.without(t)})),t.setIn(["content"],r)},ne=(t,e,n,r,o=!1,i="")=>{const s=t.getIn([e]).parent,a="inside"===n?e:s,u=t.getIn([a])?.children,l=o?"divi/row-inner":"divi/row",c=t.getIn([a,"props","attrs","globalModule"],!1),d=t.getIn([a,"props","attrs","globalParent"],!1),m=c||d||!1,f=i||O(),y={id:f,name:l,children:[],parent:a,props:{attrs:{module:{advanced:{columnStructure:{desktop:{value:r}}}},...m&&{globalParent:m}}}},h="inside"===n?(0,g.isArray)(u)?[...u,f]:[f]:p(f,e,u.asMutable(),n);t=t.merge({[f]:y}).setIn([a,"children"],h);const I=r.split(","),M=I.length,E={};for(let t=0;t<M;t++){const e=O();E[e]={id:e,name:o?"divi/column-inner":"divi/column",parent:f,props:{attrs:{module:{advanced:{type:{desktop:{value:I[t]}}}}}},children:[]}}return m&&(t=t.setIn([y.id,"props","attrs","globalParent"],m)),t.merge(E).setIn([f,"children"],(0,g.keys)(E))};var re=window.divi.constantLibrary;const oe=(t,e)=>{const n=t.getIn(["content"]),{id:r}=e,o=n.getIn([r]);if((0,g.isEmpty)(o))return t;const i=o.getIn(["parent"]),s=n.getIn([i,"children"],[]).asMutable().filter((t=>t!==r));let a=n.setIn([i,"children"],s);const u=(0,J.populateContentTree)({tree:n,rootId:r});return(0,g.forEach)(u,((t,e)=>{a=a.without(e)})),t.setIn(["content"],a)},ie=(t,e,n,r,o="user")=>{const s=t.getIn([e,"props","attrs"],i()({})),a=n.split("."),u=a.length>1,l=u?a[0]:n,c=u?s.getIn([l],i()({})).setIn((0,g.tail)(a),r):r,d=t.getIn([e,"props","attrs","unsyncAttrs"])?.asMutable();if("global-layout"===o){if(Array.isArray(d)&&d.some((t=>t?.attrName===n)))return t}return t.setIn([e,"props","attrs",l],c)},se=(t,e,n)=>{const{root:r,...o}=e,i=t.getIn([n,"parent"]),s=t.getIn([i,"children"],[]).reduce(((t,e)=>e===n?t.concat(r.children):t.concat(e)),[]),a=o[e.root.children[0]].props.attrs,u=t.getIn([n,"props","attrs","unsyncAttrs"]).asMutable(),l={globalModule:t.getIn([n,"props","attrs","globalModule"])},c={...a,...u,...l},d=(t=>{const e=[],n=(t,r)=>{(0,g.forEach)(t,((t,o)=>{const i=[...r,o];"desktop"===o?e.push(r):(0,g.isObject)(t)&&n(t,i)}))};return n(t,[]),e})(u).map((t=>({attrName:t.join(".")})));return t.merge(o).setIn([i,"children"],s).without(n).setIn([e?.root?.children[0],"parent"],i).setIn([e?.root?.children[0],"props","attrs"],c).setIn([e?.root?.children[0],"props","attrs","unsyncAttrs"],d)},ae=(t,e,n,r)=>{if(!(0,v.applyFilters)("divi.editPost.moveModule.enable",!0,t,e,n,r))return t;const o=t,i=t.getIn([e,"parent"]),a=t.getIn([i,"children"]).filter((t=>t!==e));t=t.setIn([i,"children"],a);const u="inside"===n?r:t.getIn([r,"parent"]),l=(0,g.get)(t,[e,"name"],""),c=(0,g.get)(t,[u,"name"],""),d=(0,g.get)(t,[u,"props","attrs"])||{};if(!(0,s.select)("divi/module-library").isValidChild(c,d,l))return o;const m=t.getIn([u,"children"],[]),f="inside"===n?m.concat([e]):p(e,r,m.asMutable(),n);return t.setIn([e,"parent"],u).setIn([u,"children"],f)},ue=(t,e,n)=>{const r=n.split("."),o=r[0],i=r.length>1,s=t.getIn([e,"props","attrs"]);if(i){const n=(0,g.last)(r),i=(0,g.slice)(r,0,r.length-1),a=s.getIn(i);if(a){const r=(t=t.setIn([e,"props","attrs"].concat(i),a.without(n))).getIn([e,"props","attrs"]),s=r.getIn([o]),u=(0,J.removeEmptyObjectAttributes)(s?.asMutable({deep:!0}));(0,g.isEmpty)(u)?t=t.setIn([e,"props","attrs"],r.without(o)):(0,g.isEqual)(u,s?.asMutable({deep:!0}))||(t=t.setIn([e,"props","attrs",o],u))}return t}return t.setIn([e,"props","attrs"],s.without(n))},le=(t,e)=>{switch(e.type){case"ADD_COLUMN_VIA_DIVIDER":return G(),((t,e,n)=>{let r=t.getIn(["content"]);const o=r.getIn([e],{}),i=o.getIn(["props","attrs","module","advanced","columnStructure","desktop","value"],"4_4").split(","),s=o.getIn(["children"],[]).asMutable(),a="divi/row-inner"===(0,g.get)(o,"name"),u=i.length+1,l=(0,g.times)(u,(()=>`1_${u}`)).join(","),c=a?"divi/column-inner":"divi/column",d=0===n?0:n-1,p=(0,g.nth)(s,d);r=Zt(r,p,c,{},0===n?"before":"after");const m=t.setIn(["content"],r);return ee(m,e,l)})(t,e.id,e.dividerPosition);case"ADD_MODULE":return G(),t.set("content",Zt(t.getIn(["content"]),e.id,e.name,e.props,e.position,e.newId));case"ADD_ROW":return G(),t.set("content",ne(t.getIn(["content"]),e.id,e.position,e.columnStructure,e.inner));case"ADD_SPECIALTY_SECTION":return G(),t.set("content",((t,e,n,r,o)=>{if(!t.getIn([e]))return t;const s=(0,g.filter)(re.columnSpecialty,(t=>t.structure===r));if((0,g.size)(s)<1)return t;const a=(0,g.filter)(s,(t=>t.position===o));if((0,g.size)(a)<1)return t;const u=t.getIn(["root","children"]),l=O(),c=i()({id:l,name:"divi/section",parent:"root",children:[],props:{attrs:{module:{advanced:{type:{desktop:{value:"specialty"}}}}}}}),d=p(l,e,u.asMutable(),n);t=t.merge({[l]:c}).setIn(["root","children"],d);const m=r.split(","),f=m.length,y={},h=o.split(",");for(let t=0;t<f;t++){const e=O();y[e]={id:e,name:"divi/column",parent:l,props:{attrs:{module:{advanced:{type:{desktop:{value:m[t]}}}}}},children:[]},"1"===h[t]&&(y[e].props.attrs.module.advanced.specialtyColumns={desktop:{value:"2_3"===m[t]?"4":"3"}})}return t.merge(i()(y)).setIn([l,"children"],(0,g.keys)(y))})(t.getIn(["content"]),e.id,e.position,e.columnStructure,e.innerPosition));case"CHANGE_COLUMN_STRUCTURE":return G(),ee(t,e.id,e.columnStructure);case"CLEAR_LAYOUT":return G(),t.set("content",(()=>{const t=O(),e={root:{id:"root",name:"divi/root",children:[t],props:{attrs:{}}},[t]:{id:t,name:"divi/section",children:[],parent:"root",props:{attrs:{}}}};return i()(e)})());case"CLEAR_REMOVED_MODULES":return((t,e)=>{const n=e?.params?.layout??"postContent",r=t.getIn(["layouts",n,"removedModules"]);let o=t;return(0,g.forEach)(r,(r=>{const i=r?.id,s=(0,g.isObject)(t.getIn(["content",i])),a=t.getIn(["content",i,"parent"]),u=t.getIn(["content",a,"children"],[]),l=(0,g.includes)(u,i);s&&!l&&(o=oe(o,{id:i,caller:e?.params?.caller})),o=o.setIn(["layouts",n,"removedModules"],t.getIn(["layouts",n,"removedModules"]).without(i))})),o})(t,e);case"CLONE_MODULE":return G(),t.set("content",((t,e)=>{const{id:n,moduleAppearanceSettings:r,themeBuilderLayout:o,moduleCount:i}=e,{clonedParent:s,clonedParentChildren:a,clonedModules:u}=N(t,{moduleId:n,targetParentId:"",moduleAppearanceSettings:r,themeBuilderLayout:o,moduleCount:i});return t.getIn(["content"]).merge(u).setIn([s,"children"],a)})(t,e.params));case"CLONE_COLUMN":return G(),((t,e)=>{const n=t.getIn(["content"]),{id:r,moduleAppearanceSettings:o={},themeBuilderLayout:i="postContent",moduleCount:s}=e,a=n.getIn([r],{}).getIn(["name"],"");if("divi/column"!==a&&"divi/column-inner"!==a)return t;const{clonedParent:u,clonedParentChildren:l,clonedModules:c}=N(t,{moduleId:r,moduleAppearanceSettings:o,themeBuilderLayout:i,moduleCount:s}),d=n.getIn([u],{}).getIn(["props","attrs","module","advanced","columnStructure","desktop","value"],"4_4").split(",").length+1,p=(0,g.times)(d,(()=>`1_${d}`)).join(","),m=n.merge(c).setIn([u,"children"],l),f=t.setIn(["content"],m);return ee(f,u,p)})(t,e.params);case"COPY_MODULE":return G(),t.set("content",((t,e)=>{const n=t.getIn(["content"]),{id:r,position:o,targetId:i,moduleAppearanceSettings:s,themeBuilderLayout:a,moduleCount:u}=e,l="inside"===o?i:n.getIn([i,"parent"]),c=n.getIn([i,"props","attrs","globalParent"]),{clonedModuleId:d,clonedModules:m}=N(t,{moduleId:r,targetParentId:l,moduleAppearanceSettings:s,themeBuilderLayout:a,moduleCount:u}),g=n.getIn([l,"children"],[]),f="inside"===o?g.concat([d]):p(d,i,g.asMutable(),o);return c?n.merge(m).setIn([l,"children"],f).setIn([d,"props","attrs","globalParent"],c):n.merge(m).setIn([l,"children"],f)})(t,e.params));case"COPY_MODULE_FROM_LIBRARY":return G(),t.set("content",((t,e,n,r)=>{const o="inside"===n?r:t.getIn([r,"parent"]),s=t.getIn([o]).asMutable({deep:!0}),a=(0,J.maybeUnwrapPlaceholderBlock)(e.getIn(["content"],"")),u=(0,d.maybeConvertContent)(a);let l=i()(z(u,{...s,children:[]}));if("inside"!==n){const e=t.getIn([o,"children"],[]),i=l.getIn([o,"children"]),s=e.reduce(((t,e)=>e===r?"before"===n?t.concat([...i.asMutable(),e]):t.concat([e,...i.asMutable()]):t.concat(e)),[]);l=l.setIn([o,"children"],s)}if("global"===e.is_global){const t=l.getIn([o,"children"],[]);Object.keys(l.without(o)).forEach((n=>{l=t.includes(n)?l.setIn([n,"props","attrs","globalModule"],String(e.ID)):l.setIn([n,"props","attrs","globalParent"],String(e.ID))}))}return t.merge(l)})(t.getIn(["content"]),e.payload,e.position,e.targetId));case"COPY_MODULE_FROM_PAYLOAD":return G(),t.set("content",((t,e)=>{const n=t.getIn(["content"]),{payload:r,position:o,targetId:i,moduleAppearanceSettings:s,themeBuilderLayout:a,moduleCount:u}=e,l=r.moduleObjects.getIn([r.moduleId,"parent"]),c=n.getIn([l]),d="inside"===o?i:n.getIn([i,"parent"]),m=n.getIn([d]),g=n.getIn([i,"props","attrs","globalParent"]),f=r.moduleObjects.setIn([l],c).setIn([d],m),y=t.setIn(["content"],f),{clonedModuleId:h,clonedModules:I}=N(y,{moduleId:r.moduleId,targetParentId:d,moduleAppearanceSettings:s,themeBuilderLayout:a,moduleCount:u}),M=n.getIn([d,"children"],[]),E="inside"===o?M.concat([h]):p(h,i,M.asMutable(),o);return g?n.merge(I).setIn([d,"children"],E).setIn([h,"props","attrs","globalParent"],g):n.merge(I).setIn([d,"children"],E)})(t,e.params));case"COPY_MODULES_FROM_PAYLOAD":return G(),t.set("content",((t,e)=>{const{payload:n,position:r,targetId:o,moduleAppearanceSettings:s,themeBuilderLayout:a,moduleCount:u}=e;let l=o,c=r,d=t.getIn(["content"]);return(0,g.forEach)(n.moduleIds,(e=>{const r=n.moduleObjects.getIn([e,"parent"]),m=d.getIn([r]),g="inside"===c?l:d.getIn([l,"parent"]),f=d.getIn([g]),y=d.getIn([o,"props","attrs","globalParent"]),h=n.moduleObjects.setIn([r],m).setIn([g],f),I=t.setIn(["content"],h),{clonedModuleId:M,clonedModules:E}=N(I,{moduleId:e,targetParentId:g,moduleAppearanceSettings:s,themeBuilderLayout:a,moduleCount:u}),_=d.getIn([g,"children"],i()([])),O="inside"===c?_.concat([M]):p(M,l,_.asMutable(),c);l=M,c="after",y&&(d=d.merge(E).setIn([g,"children"],O).setIn([M,"props","attrs","globalParent"],y)),d=d.merge(E).setIn([g,"children"],O)})),d})(t,e.params));case"DISABLE_GLOBAL_MODULE":return G(),t.set("content",((t,e)=>{let n=t;const r=e=>{const o=t.getIn([e,"props","attrs"]).without("globalModule").without("globalParent");n=n.setIn([e,"props","attrs"],o);const i=t.getIn([e,"children"]);(0,g.isEmpty)(i)||(0,g.forEach)(i,(t=>{r(t)}))};return r(e),n})(t.getIn(["content"]),e.id));case"EDIT_CHILDREN":return G(),t.set("content",((t,e,n)=>t.setIn([e,"children"],n))(t.getIn(["content"]),e.id,e.children));case"IMPORT_CONTENT":return G(),t.set("content",(({state:t,content:e,presetIdsToReplace:n,defaultPresetAttrs:r,importOptionsValues:o})=>{const{replaceLayout:s}=o,a=z((0,d.maybeConvertContent)(e)),u=(0,g.filter)(a,["name","divi/section"]);let l=i()(a);if((0,g.forEach)(n,((t,e)=>{Object.values(a).filter((({name:t})=>t===e)).map((({id:t})=>t)).forEach((e=>{const n=l.getIn([e,"props","attrs","modulePreset"]);t[n]&&(l=l.setIn([e,"props","attrs","modulePreset"],t[n]))}))})),(0,g.forEach)(r,((t,e)=>{Object.values(a).filter((({name:t})=>t===e)).map((({id:t})=>t)).forEach((e=>{"default"===l.getIn([e,"props","attrs","modulePreset"])&&(l=l.setIn([e,"props","attrs"],(0,g.merge)({},t,l.getIn([e,"props","attrs"]).asMutable({deep:!0}))))}))})),"on"===s)return l.setIn(["root","children"],(0,g.values)((0,g.map)(u,"id")));const c=[...t.getIn(["root","children"]).asMutable(),...(0,g.map)(u,"id")];return t.merge(l).setIn(["root","children"],(0,g.values)(c))})({state:t.getIn(["content"]),content:e.content,presetIdsToReplace:e.presetIdsToReplace,defaultPresetAttrs:e.defaultPresetAttrs,importOptionsValues:e.importOptionsValues}));case"MERGE_GLOBAL_MODULES":return G(),t.set("content",se(t.getIn(["content"]),e.content,e.owner));case"MOVE_MODULE":return G(),t.set("content",ae(t.getIn(["content"]),e.id,e.position,e.targetId));case"MOVE_MODULES":return G(),t.set("content",((t,e,n,r)=>{const o=j(e,t,!0),s=(0,g.map)((0,g.values)(o),(t=>(0,J.getModuleType)(t.name,t.props.attrs))),a=(0,g.uniq)(s);if(a.length>1){const s=(0,J.extractLowestModuleType)(a),u=(0,J.getParentType)(s),l=u&&(0,g.isString)(u)?(0,J.getChildType)(u):"",c=(0,g.mapValues)(J.moduleTypeRanks,(()=>null)),d=(0,g.sortBy)((0,g.values)(o),(t=>J.moduleTypeRanks[(0,J.getModuleType)(t.name,t.props.attrs)]+e.indexOf(t.id)/100)),p=e=>{(0,g.forEach)(e,(e=>{const n=(0,J.getModuleType)(e.name,e.props.attrs);if((0,g.isNull)(c[n])){c[n]=e;const r=j(e.children,t,!0);p((0,g.values)(r))}}))};p(d);let m=!(0,g.isNull)(c.section);const f=!(0,g.isNull)(c["specialty-section"]),y=!(0,g.isNull)(c["fullwidth-section"]),h=!(0,g.isNull)(c["fullwidth-module"]),I=!(0,g.isNull)(c.row),M=!(0,g.isNull)(c.column),E=!(0,g.isNull)(c.module);if(!m&&E&&y&&!f){const e=O();t=Zt(t,r,"divi/section",{attrs:{}},"after",e),c.section=t?.[e]?.asMutable({deep:!0}),m=!0}if(m&&E){const e=!(0,g.isNull)(c.row),n=!(0,g.isNull)(c.column);if(!e){const e=O(),n=(t=ne(t,c.section.id,"inside","4_4",!1,e)).getIn([e,"children",0]);c.row=t?.[e]?.asMutable({deep:!0}),c.column=t?.[n]?.asMutable({deep:!0})}if(e&&!n){const e=(0,g.get)(c,["row","id"]),n=O(),r={attrs:{module:{advanced:{type:{desktop:{value:"4_4"}}}}}};t=ie(t,e,"module.advanced.columnStructure",i()({desktop:{value:"4_4"}})),t=Zt(t,e,"divi/column",r,"inside",n),c.column=t?.[n]?.asMutable({deep:!0})}}if(!y&&h&&(m||f)){const e=O();t=Zt(t,r,"divi/section",{attrs:{module:{advanced:{type:{desktop:{value:"fullwidth"}}}}}},"after",e),c["fullwidth-section"]=t?.[e]?.asMutable({deep:!0})}if(!m&&I&&!M){const e=O();t=ie(t,c.row.id,"module.advanced.columnStructure",i()({desktop:{value:"4_4"}})),t=Zt(t,c.row.id,"divi/column",{attrs:{module:{advanced:{type:{desktop:{value:"4_4"}}}}}},"inside",e),c.column=t?.[e]?.asMutable({deep:!0})}let _=null;(0,g.forEach)(d,(e=>{const o=(0,J.getModuleType)(e.name,e.props.attrs),i=(0,J.getParentType)(o);if((0,g.isArray)(l)?(0,g.includes)(l,o):l===o)t=(0,g.isNull)(_)?ae(t,e.id,n,r):ae(t,e.id,"after",_),_=e.id;else if((0,g.isString)(i)&&!(0,g.isEmpty)((0,g.get)(c,[i,"children"]))){const n=(0,g.get)(c,[o,"id"]);t=ae(t,e.id,"inside",(0,g.get)(t,[n,"parent"]))}else(0,g.isArray)(i)?(0,g.forEach)(i,(n=>{(0,g.isNull)(c[n])||(t=ae(t,e.id,"inside",(0,g.get)(c,[n,"id"])))})):i&&(0,g.isString)(i)&&!(0,g.isNull)(c[i])&&(t=ae(t,e.id,"inside",(0,g.get)(c,[i,"id"])))}))}else{let o=r;(0,g.forEach)(e,(e=>{t=ae(t,e,n,o),"after"===n&&(o=e)}))}return t})(t.getIn(["content"]),e.ids,e.position,e.targetId));case"EDIT_MODULE_ATTRIBUTE":return G(),t.set("content",ie(t.getIn(["content"]),e.id,e.attrName,e.value,e.caller));case"EDIT_UNSYNC_ATTRS":return G(),t.set("content",((t,e,n,r)=>{const o=t.getIn([e,"props","attrs","unsyncAttrs"])||[];return r?t.setIn([e,"props","attrs","unsyncAttrs"],[...o,n]):(0,g.isEmpty)(o)?t:t.setIn([e,"props","attrs","unsyncAttrs"],o.filter((t=>t?.attrName!==n?.attrName&&t?.subName!==n?.subName)))})(t.getIn(["content"]),e.id,e.attribute,e.isSynced));case"EDIT_MODULE_PROP":return G(),t.set("content",((t,e,n,r)=>t.setIn([e,"props",n],r))(t.getIn(["content"]),e.id,e.propName,e.propValue));case"REPLACE_MODULE_ATTRIBUTES":return G(),t.set("content",((t,e,n,r=!1)=>r?t.setIn([e,"props","attrs"],n):((0,g.forEach)(n,((n,r)=>{t=t.setIn([e,"props","attrs",r],n)})),t))(t.getIn(["content"]),e.id,e.attrs,e.replaceAllAttrs));case"REMOVE_GLOBAL_MODULE_ATTRIBUTE":return G(),t.set("content",((t,e)=>{const n=t.getIn([e,"props","attrs"]);return t.setIn([e,"props","attrs"],n.without("globalModule"))})(t.getIn(["content"]),e.id));case"REMOVE_GLOBAL_PARENT_ATTRIBUTE":return G(),t.set("content",((t,e)=>{const n=t.getIn([e,"props","attrs"]);return n?t.setIn([e,"props","attrs"],n.without("globalParent")):t})(t.getIn(["content"]),e.id));case"REMOVE_MODULE":return G(),te(t,e.id);case"REMOVE_MODULE_STATE_PROPERTIES":return oe(t,e.params);case"REMOVE_MODULE_ATTRIBUTE":return G(),t.set("content",ue(t.getIn(["content"]),e.id,e.attrName));case"REMOVE_MODULE_ATTRIBUTES":return G(),t.set("content",(n=t.getIn(["content"]),r=e.id,e.attrNames.forEach((t=>{n=ue(n,r,t)})),n));case"REMOVE_COLUMN":return G(),((t,e,n="postContent")=>{let r=t.getIn(["content"]);const o=r.getIn([e],{}),i=o.getIn(["name"],""),s="divi/column"===i||"divi/column-inner"===i;if((0,g.isEmpty)(o)||!s)return t;const a=o.getIn(["parent"]),u=r.getIn([a,"children"],[]).asMutable(),l=u.indexOf(e);if(l<0)return t;const c=u.length-1,d=(0,g.times)(c,(()=>1===c?"4_4":`1_${c}`)).join(","),p=[...u];p.splice(l,1),r=r.setIn([a,"children"],p);const m=t.setIn(["content"],r).setIn(["layouts",n,"removedModules",e],{id:e,timestamp:Date.now()});return ee(m,a,d)})(t,e.id);case"SET_GLOBAL_MODULE_ATTRIBUTE":return G(),t.set("content",((t,e,n)=>t.setIn([e,"props","attrs","globalModule"],n))(t.getIn(["content"]),e.id,e.value));case"SET_GLOBAL_PARENT_ATTRIBUTE":return G(),t.set("content",((t,e,n)=>t.setIn([e,"props","attrs","globalParent"],n))(t.getIn(["content"]),e.id,e.value));case"SET_LAYOUT_STATE":return G(),t.set(e.location,e.layoutState);case"SYNC_GLOBAL_LAYOUT_ATTRIBUTES":return G(),t.set("content",((t,e,n,r)=>{const o=r.map((t=>{const{attrName:e}=t;return e.split(".")})),i=t.asMutable({deep:!0});return t=(t=t.setIn([e,"props","attrs"],n)).setIn([e,"props","attrs","unsyncAttrs"],r),o.forEach((n=>{const r=(0,g.get)(i,[e,"props","attrs",...n]);t=t.setIn([e,"props","attrs",...n],r)})),t})(t.getIn(["content"]),e.id,e.attrs,e.unsyncAttrs));case"SYNC_MODULE_INLINE_FONT":return t.set("content",(t=>{const e={...t},n=(0,g.filter)(e,(t=>{const e=t.getIn(["props","attrs","content","decoration","inlineFont"],[]);return!(0,g.isEmpty)(e)}));return 0===n.length||(0,g.forEach)(n,(e=>{const n=e.getIn(["props","attrs","content","innerContent"],{});(0,g.forEach)(n,((n,r)=>{(0,g.forEach)(n,((n,o)=>{const i=H(n),s=[e.id,"props","attrs","content","decoration","inlineFont",r,o,"families"];t=t.setIn(s,i)}))}))})),t})(t.getIn(["content"])));case"SYNC_MODULE_GLOBAL_COLORS":return t.set("content",((t,e)=>{let n=JSON.stringify({...t});const r=new RegExp(/var[(]--(gcid-([0-9a-z-]*))[)]/,"g"),o=Array.from(n.matchAll(r));if(o.length>0){const t={},r=o.map((t=>t[1]));(0,g.forEach)(e,((e,n)=>{r.includes(n)&&(t[n]=e)})),(0,g.isEmpty)(t)||(0,g.forEach)(t,((t,e)=>{"inactive"===t.status&&(n=n.replace(new RegExp(`var[(]--${e}[)]`,"g"),t.color))}))}try{let e=i()(t);const r=JSON.parse(n);return Object.keys(r).forEach((t=>{e=e.setIn([t],r[t])})),e}catch(t){console.error(t)}return t})(t.getIn(["content"]),e.globalColors));case"UPDATE_USED_PRESETS":return t.set("presets",((t,e)=>t.setIn([e.presetType],e.presets))(t.getIn(["presets"]),{presetType:e.presetType,presets:e.presets}));case"REVERT_GLOBAL_MODULE_EDIT_STATE":return G(),t;default:return t}var n,r},ce=(t,e)=>{const n=t.getIn(["content",e]);return t.getIn(["content",(0,g.get)(n,"parent")])},de=U([B()(((t,e)=>{const n=[],r=e=>{const o=ce(t,e);"divi/root"!==o?.name?o?.id&&(n.push({id:o.id,name:o.name}),r(o.id)):n.push({id:o.id,name:(0,Vt.__)("Page","et_builder")})};return r(e),n})),(t,e,n)=>n||"top-to-bottom"],B()(((t,e)=>("top-to-bottom"===e&&t.reverse(),t)))),pe=U([t=>t],(t=>t.getIn(["content"]))),me=(t,e)=>{const n=t.getIn(["content",e,"props","attrs","globalModule"],i()({})),r=t.getIn(["content",e,"props","attrs","globalParent"],i()({}));return"string"==typeof n?String(n):"string"==typeof r?String(r):null},ge=(t,e)=>{const n=t.getIn(["content"]),r=[];return Object.keys(n).forEach((n=>{const o=t.getIn(["content",n,"props","attrs"],i()({}))?.globalModule;o===e&&r.push(n)})),i()(r)},fe=U([t=>t,(t,e)=>e],((t,e)=>t.getIn(["content",e]))),ye=i()({}),he=U([(t,e)=>t.getIn(["content",e,"props","attrs"],ye),(t,e,n)=>n],((t,e)=>{const n=e.split(".");return t.getIn(n,ye)})),Ie=U([t=>t,(t,e)=>e,(t,e,n)=>n],((t,e,n=i()({}))=>t.getIn(["content",e,"props","attrs"])||n)),Me=U([(t,e)=>t.getIn(["content",e])],(t=>t?.getIn(["name"])??"")),Ee=U([(t,e)=>e,t=>t.getIn(["content"])],B()(((t,e)=>(0,g.pickBy)(e,(e=>(0,g.includes)(t,e.id)))))),_e=(t,e,n)=>j(e,t.getIn(["content"]),n),Oe=(t,e)=>{const n=[e],r=t.getIn(["content"]),o=t=>{(0,g.forEach)((0,g.get)(t,"children",{}),(t=>{n.push(t),o(r.getIn([t]))}))};return o(r.getIn([e])),n},ve=(t,e)=>{const n=t.getIn(["content",e,"name"]),r=t?.content[e]?.props?.attrs?.asMutable({deep:!0});return(0,J.getModuleType)(n,r)},be=(t,e)=>{const n=t.getIn(["content",e]),r=t.getIn(["content",e,"children"]);let o={[e]:n,root:{...t.getIn(["content","root"]),children:[e]}};const i=e=>{e.forEach((e=>{o={...o,[e]:t.getIn(["content",e])};const n=t.getIn(["content",e,"children"]);n.length>0&&i(n)}))};return i(r),o},Ae=U([(t,e)=>t.getIn(["content",e])],(t=>t?.getIn(["parent"]))),Le=(t,e)=>{const n=ce(t,e),r=(0,g.get)(n,"name"),o=(0,g.get)(n,["props","attrs"],i()({})).asMutable({deep:!0});return(0,J.getModuleType)(r,o)},Te=U([t=>t.getIn(["content","root"])],(t=>t.getIn(["children"])?.asMutable()??[])),Ce=(t,e)=>{const n=t.getIn(["content",e]),r=t.getIn(["content",n?.parent,"children"])?.asMutable();return r||[]},De=t=>t.getIn(["presets"]),Se=(t,e,n)=>{const r=(0,l.isStickyModule)(e,t?.content),o=(0,l.isInsideStickyModule)(e,t?.content);return n?o:r||o},Ue=(t,e)=>{const n=t=>{const e=(0,s.select)("divi/edit-post").getModule(t);if(!e)return!1;const r="on"===(0,g.get)(e.props.attrs,["module","decoration","disabledOn","desktopAbove","value"],"off"),o="on"===(0,g.get)(e.props.attrs,["module","decoration","disabledOn","tabletOnly","value"],"off"),i="on"===(0,g.get)(e.props.attrs,["module","decoration","disabledOn","phone","value"],"off"),a=r&&o&&i;return a||"divi/root"===e.name?a:n(e.parent)};return n(e)},Re=t=>{if(1<t.getIn(["content","root","children"]).length)return!1;const e=t.getIn(["content","root","children",0]);if(e){const n=t.getIn(["content",e,"props","attrs"]);if(!(0,g.isEmpty)(n))return!1}const n=[],r=e=>{e&&e.children&&e.children.forEach((e=>{if(e){const o=t.getIn(["content",e]);o&&(-1===n.indexOf(e)&&n.push(e),r(o))}}))};return r(t.getIn(["content","root"])),!(1<n.length)},Pe=U([t=>t,(t,e)=>e],((t,e)=>{if("sticky"!==e?.state)return!1;if(!1===e?.modal?.isActive)return!1;if(e?.id===e?.modal?.owner)return!0;const n=de(t,e?.modal?.owner);return!!Object.values(n).find((t=>t?.id===e?.id))&&(0,l.isStickyModule)(e?.id,t?.content?.asMutable({deep:!0}))})),Ne=(t,e,n)=>{const r=t.getIn(["content",e]),{name:o}=r,i=(0,J.getModuleType)(r?.name,r?.attrs).replace(/fullwidth-|specialty-|-inner/gi,""),s=(0,g.capitalize)(o.replace(/divi\//,""));return{...n,layout_name:n.layout_name.replace("%module%",s),layout_type:i,module_width:o.includes("divi/fullwidth")?"fullwidth":"regular"}},we=U([(t,e)=>t.getIn(["content",e,"children"])||[],t=>t],((t,e)=>{let n={};return t.forEach((t=>{n={...n,[t]:e.getIn(["content",t])}})),n})),Be=n=>{if((0,s.select)("divi/edit-post"))return;(0,s.select)("divi/module")||(0,l.registerModuleStore)(),(0,s.select)("divi/module-library")||(0,c.registerModuleLibraryStore)(),(0,s.select)("divi/history")||(0,a.registerHistoryStore)();const r=n||i()(((t="postContent")=>{const e=(0,s.select)("divi/serialized-post").getState([t,"content"]),n=z(e);return{content:n,layouts:{postContent:{removedModules:{}}},presets:{module:(0,J.populateUsedPresets)(n)}}})("postContent")),o=(0,s.registerStore)("divi/edit-post",{actions:t,reducer:le,selectors:e,initialState:r});(0,u.applyMiddlewares)(o,Xt),(0,u.applyEffects)(o,Qt),Z({type:"SET_LAYOUT_STATE",location:"content",layoutState:r?.getIn(["content"])},o)}}(),(window.divi=window.divi||{}).editPost=r}();