/*! For license information please see app-ui.js.LICENSE.txt */
!function(){var e={620:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e,t){var r=n?n+e:e,i=this._events[r];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,a=i.length,s=new Array(a);o<a;o++)s[o]=i[o].fn;return s},o.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var d,u,c=this._events[s],l=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,o),!0;case 6:return c.fn.call(c.context,t,r,i,o,a),!0}for(u=1,d=new Array(l-1);u<l;u++)d[u-1]=arguments[u];c.fn.apply(c.context,d)}else{var p,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),l){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,i);break;default:if(!d)for(p=1,d=new Array(l-1);p<l;p++)d[p-1]=arguments[p];c[u].fn.apply(c[u].context,d)}}return!0},o.prototype.on=function(e,t,r){var o=new i(t,r||this),a=n?n+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],o]:this._events[a].push(o):(this._events[a]=o,this._eventsCount++),this},o.prototype.once=function(e,t,r){var o=new i(t,r||this,!0),a=n?n+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],o]:this._events[a].push(o):(this._events[a]=o,this._eventsCount++),this},o.prototype.removeListener=function(e,t,i,o){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return 0==--this._eventsCount?this._events=new r:delete this._events[a],this;var s=this._events[a];if(s.fn)s.fn!==t||o&&!s.once||i&&s.context!==i||(0==--this._eventsCount?this._events=new r:delete this._events[a]);else{for(var d=0,u=[],c=s.length;d<c;d++)(s[d].fn!==t||o&&!s[d].once||i&&s[d].context!==i)&&u.push(s[d]);u.length?this._events[a]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new r:delete this._events[a]}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new r:delete this._events[t])):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=n,o.EventEmitter=o,e.exports=o},86636:function(e,t,n){e.exports=function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){var n=t[a][1][e];return i(n||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var o=void 0,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,r){(function(e){"use strict";var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,a=new i(c),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var d=new e.MessageChannel;d.port1.onmessage=c,n=function(){d.port2.postMessage(0)}}var u=[];function c(){var e,t;r=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}r=!1}function l(e){1!==u.push(e)||r||n()}t.exports=l}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var r=e(1);function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],d=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,e!==i&&f(this,e)}function c(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function l(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return o.reject(e,t)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}function a(){t(i,r)}var s=m(a);"error"===s.status&&r(s.value)}function m(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function h(e){return e instanceof this?e:o.resolve(new this(i),e)}function v(e){var t=new this(i);return o.reject(t,e)}function g(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,d=-1,u=new this(i);++d<n;)c(e[d],d);return u;function c(e,i){function d(e){a[i]=e,++s!==n||r||(r=!0,o.resolve(u,a))}t.resolve(e).then(d,(function(e){r||(r=!0,o.reject(u,e))}))}}function b(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=-1,s=new this(i);++a<n;)d(e[a]);return s;function d(e){t.resolve(e).then((function(e){r||(r=!0,o.resolve(s,e))}),(function(e){r||(r=!0,o.reject(s,e))}))}}t.exports=u,u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(i);return this.state!==d?l(n,this.state===s?e:t,this.outcome):this.queue.push(new c(n,e,t)),n},c.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){l(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){o.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){l(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=m(p,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)f(e,r);else{e.state=s,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=h,u.reject=v,u.all=g,u.race=b},{1:1}],3:[function(e,t,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var a=o();function s(){try{if(!a||!a.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function d(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var u=Promise;function c(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function l(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function p(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function f(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var m="local-forage-detect-blob-support",h=void 0,v={},g=Object.prototype.toString,b="readonly",y="readwrite";function w(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function I(e){return new u((function(t){var n=e.transaction(m,y),r=d([""]);n.objectStore(m).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function _(e){return"boolean"==typeof h?u.resolve(h):I(e).then((function(e){return h=e}))}function S(e){var t=v[e.name],n={};n.promise=new u((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function E(e){var t=v[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function R(e,t){var n=v[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function O(e,t){return new u((function(n,r){if(v[e.name]=v[e.name]||x(),e.db){if(!t)return n(e.db);S(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var o=a.open.apply(a,i);t&&(o.onupgradeneeded=function(t){var n=o.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(m)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(e){e.preventDefault(),r(o.error)},o.onsuccess=function(){var t=o.result;t.onversionchange=function(e){e.target.close()},n(t),E(e)}}))}function M(e){return O(e,!1)}function A(e){return O(e,!0)}function k(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function T(e){return new u((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function N(e){return d([w(atob(e.data))],{type:e.type})}function C(e){return e&&e.__local_forage_encoded_blob}function D(e){var t=this,n=t._initReady().then((function(){var e=v[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return l(n,e,e),n}function P(e){S(e);for(var t=v[e.name],n=t.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,M(e).then((function(t){return e.db=t,k(e)?A(e):t})).then((function(r){e.db=t.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r})).catch((function(t){throw R(e,t),t}))}function L(e,t,n,r){void 0===r&&(r=1);try{var i=e.db.transaction(e.storeName,t);n(null,i)}catch(i){if(r>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return u.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),A(e)})).then((function(){return P(e).then((function(){L(e,t,n,r-1)}))})).catch(n);n(i)}}function x(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function W(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var i=v[n.name];i||(i=x(),v[n.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=D);var o=[];function a(){return u.resolve()}for(var s=0;s<i.forages.length;s++){var d=i.forages[s];d!==t&&o.push(d._initReady().catch(a))}var c=i.forages.slice(0);return u.all(o).then((function(){return n.db=i.db,M(n)})).then((function(e){return n.db=e,k(n,t._defaultConfig.version)?A(n):e})).then((function(e){n.db=i.db=e,t._dbInfo=n;for(var r=0;r<c.length;r++){var o=c[r];o!==t&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}}))}function B(e,t){var n=this;e=p(e);var r=new u((function(t,r){n.ready().then((function(){L(n._dbInfo,b,(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),C(e)&&(e=N(e)),t(e)},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return c(r,t),r}function j(e,t){var n=this,r=new u((function(t,r){n.ready().then((function(){L(n._dbInfo,b,(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;C(r)&&(r=N(r));var i=e(r,n.key,s++);void 0!==i?t(i):n.continue()}else t()},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return c(r,t),r}function F(e,t,n){var r=this;e=p(e);var i=new u((function(n,i){var o;r.ready().then((function(){return o=r._dbInfo,"[object Blob]"===g.call(t)?_(o.db).then((function(e){return e?t:T(t)})):t})).then((function(t){L(r._dbInfo,y,(function(o,a){if(o)return i(o);try{var s=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var d=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=d.error?d.error:d.transaction.error;i(e)}}catch(e){i(e)}}))})).catch(i)}));return c(i,n),i}function H(e,t){var n=this;e=p(e);var r=new u((function(t,r){n.ready().then((function(){L(n._dbInfo,y,(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(a.error)},o.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return c(r,t),r}function U(e){var t=this,n=new u((function(e,n){t.ready().then((function(){L(t._dbInfo,y,(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=o.error?o.error:o.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return c(n,e),n}function z(e){var t=this,n=new u((function(e,n){t.ready().then((function(){L(t._dbInfo,b,(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}}catch(e){n(e)}}))})).catch(n)}));return c(n,e),n}function V(e,t){var n=this,r=new u((function(t,r){e<0?t(null):n.ready().then((function(){L(n._dbInfo,b,(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName),s=!1,d=a.openKeyCursor();d.onsuccess=function(){var n=d.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},d.onerror=function(){r(d.error)}}catch(e){r(e)}}))})).catch(r)}));return c(r,t),r}function G(e){var t=this,n=new u((function(e,n){t.ready().then((function(){L(t._dbInfo,b,(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];o.onsuccess=function(){var t=o.result;t?(a.push(t.key),t.continue()):e(a)},o.onerror=function(){n(o.error)}}catch(e){n(e)}}))})).catch(n)}));return c(n,e),n}function $(e,t){t=f.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,i=this;if(e.name){var o=e.name===n.name&&i._dbInfo.db?u.resolve(i._dbInfo.db):M(e).then((function(t){var n=v[e.name],r=n.forages;n.db=t;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=t;return t}));r=e.storeName?o.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;S(e);var r=v[e.name],i=r.forages;t.close();for(var o=0;o<i.length;o++){var s=i[o];s._dbInfo.db=null,s._dbInfo.version=n}var d=new u((function(t,r){var i=a.open(e.name,n);i.onerror=function(e){i.result.close(),r(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}}));return d.then((function(e){r.db=e;for(var t=0;t<i.length;t++){var n=i[t];n._dbInfo.db=e,E(n._dbInfo)}})).catch((function(t){throw(R(e,t)||u.resolve()).catch((function(){})),t}))}})):o.then((function(t){S(e);var n=v[e.name],r=n.forages;t.close();for(var i=0;i<r.length;i++)r[i]._dbInfo.db=null;var o=new u((function(t,n){var r=a.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}));return o.then((function(e){n.db=e;for(var t=0;t<r.length;t++)E(r[t]._dbInfo)})).catch((function(t){throw(R(e,t)||u.resolve()).catch((function(){})),t}))}))}else r=u.reject("Invalid arguments");return c(r,t),r}var Z={_driver:"asyncStorage",_initStorage:W,_support:s(),iterate:j,getItem:B,setItem:F,removeItem:H,clear:U,length:z,key:V,keys:G,dropInstance:$};function q(){return"function"==typeof openDatabase}var Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",J="~~local_forage_type~",X=/^~~local_forage_type~([^~]+)~/,K="__lfsc__:",Q=K.length,ee="arbf",te="blob",ne="si08",re="ui08",ie="uic8",oe="si16",ae="si32",se="ur16",de="ui32",ue="fl32",ce="fl64",le=Q+ee.length,pe=Object.prototype.toString;function fe(e){var t,n,r,i,o,a=.75*e.length,s=e.length,d=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),c=new Uint8Array(u);for(t=0;t<s;t+=4)n=Y.indexOf(e[t]),r=Y.indexOf(e[t+1]),i=Y.indexOf(e[t+2]),o=Y.indexOf(e[t+3]),c[d++]=n<<2|r>>4,c[d++]=(15&r)<<4|i>>2,c[d++]=(3&i)<<6|63&o;return u}function me(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=Y[n[t]>>2],r+=Y[(3&n[t])<<4|n[t+1]>>4],r+=Y[(15&n[t+1])<<2|n[t+2]>>6],r+=Y[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function he(e,t){var n="";if(e&&(n=pe.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===pe.call(e.buffer))){var r,i=K;e instanceof ArrayBuffer?(r=e,i+=ee):(r=e.buffer,"[object Int8Array]"===n?i+=ne:"[object Uint8Array]"===n?i+=re:"[object Uint8ClampedArray]"===n?i+=ie:"[object Int16Array]"===n?i+=oe:"[object Uint16Array]"===n?i+=se:"[object Int32Array]"===n?i+=ae:"[object Uint32Array]"===n?i+=de:"[object Float32Array]"===n?i+=ue:"[object Float64Array]"===n?i+=ce:t(new Error("Failed to get type for BinaryArray"))),t(i+me(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n=J+e.type+"~"+me(this.result);t(K+te+n)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function ve(e){if(e.substring(0,Q)!==K)return JSON.parse(e);var t,n=e.substring(le),r=e.substring(Q,le);if(r===te&&X.test(n)){var i=n.match(X);t=i[1],n=n.substring(i[0].length)}var o=fe(n);switch(r){case ee:return o;case te:return d([o],{type:t});case ne:return new Int8Array(o);case re:return new Uint8Array(o);case ie:return new Uint8ClampedArray(o);case oe:return new Int16Array(o);case se:return new Uint16Array(o);case ae:return new Int32Array(o);case de:return new Uint32Array(o);case ue:return new Float32Array(o);case ce:return new Float64Array(o);default:throw new Error("Unkown type: "+r)}}var ge={serialize:he,deserialize:ve,stringToBuffer:fe,bufferToString:me};function be(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function ye(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var i=new u((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction((function(i){be(i,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=ge,i}function we(e,t,n,r,i,o){e.executeSql(n,r,i,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?o(e,a):be(e,t,(function(){e.executeSql(n,r,i,o)}),o)}),o):o(e,a)}),o)}function Ie(e,t){var n=this;e=p(e);var r=new u((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){we(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,t),r}function _e(e,t){var n=this,r=new u((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){we(n,i,"SELECT * FROM "+i.storeName,[],(function(n,r){for(var o=r.rows,a=o.length,s=0;s<a;s++){var d=o.item(s),u=d.value;if(u&&(u=i.serializer.deserialize(u)),void 0!==(u=e(u,d.key,s+1)))return void t(u)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,t),r}function Se(e,t,n,r){var i=this;e=p(e);var o=new u((function(o,a){i.ready().then((function(){void 0===t&&(t=null);var s=t,d=i._dbInfo;d.serializer.serialize(t,(function(t,u){u?a(u):d.db.transaction((function(n){we(n,d,"INSERT OR REPLACE INTO "+d.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){o(s)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void o(Se.apply(i,[e,s,n,r-1]));a(t)}}))}))})).catch(a)}));return c(o,n),o}function Ee(e,t,n){return Se.apply(this,[e,t,n,1])}function Re(e,t){var n=this;e=p(e);var r=new u((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){we(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,t),r}function Oe(e){var t=this,n=new u((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){we(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return c(n,e),n}function Me(e){var t=this,n=new u((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){we(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return c(n,e),n}function Ae(e,t){var n=this,r=new u((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){we(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,t),r}function ke(e){var t=this,n=new u((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){we(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return c(n,e),n}function Te(e){return new u((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var i=[],o=0;o<r.rows.length;o++)i.push(r.rows.item(o).name);t({db:e,storeNames:i})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Ne(e,t){t=f.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,i=this;return c(r=e.name?new u((function(t){var r;r=e.name===n.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(Te(r))})).then((function(e){return new u((function(t,n){e.db.transaction((function(r){function i(e){return new u((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var o=[],a=0,s=e.storeNames.length;a<s;a++)o.push(i(e.storeNames[a]));u.all(o).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):u.reject("Invalid arguments"),t),r}var Ce={_driver:"webSQLStorage",_initStorage:ye,_support:q(),iterate:_e,getItem:Ie,setItem:Ee,removeItem:Re,clear:Oe,length:Me,key:Ae,keys:ke,dropInstance:Ne};function De(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Pe(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function Le(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function xe(){return!Le()||localStorage.length>0}function We(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=Pe(e,t._defaultConfig),xe()?(t._dbInfo=n,n.serializer=ge,u.resolve()):u.reject()}function Be(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return c(n,e),n}function je(e,t){var n=this;e=p(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return c(r,t),r}function Fe(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,o=localStorage.length,a=1,s=0;s<o;s++){var d=localStorage.key(s);if(0===d.indexOf(r)){var u=localStorage.getItem(d);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,d.substring(i),a++)))return u}}}));return c(r,t),r}function He(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return c(r,t),r}function Ue(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length))}return r}));return c(n,e),n}function ze(e){var t=this.keys().then((function(e){return e.length}));return c(t,e),t}function Ve(e,t){var n=this;e=p(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return c(r,t),r}function Ge(e,t,n){var r=this;e=p(e);var i=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new u((function(i,o){var a=r._dbInfo;a.serializer.serialize(t,(function(t,r){if(r)o(r);else try{localStorage.setItem(a.keyPrefix+e,t),i(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}}))}))}));return c(i,n),i}function $e(e,t){if(t=f.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,i=this;return r=e.name?new u((function(t){e.storeName?t(Pe(e,i._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):u.reject("Invalid arguments"),c(r,t),r}var Ze={_driver:"localStorageWrapper",_initStorage:We,_support:De(),iterate:Fe,getItem:je,setItem:Ge,removeItem:Ve,clear:Be,length:ze,key:He,keys:Ue,dropInstance:$e},qe=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Ye=function(e,t){for(var n=e.length,r=0;r<n;){if(qe(e[r],t))return!0;r++}return!1},Je=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Xe={},Ke={},Qe={INDEXEDDB:Z,WEBSQL:Ce,LOCALSTORAGE:Ze},et=[Qe.INDEXEDDB._driver,Qe.WEBSQL._driver,Qe.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function it(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function ot(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Je(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var at=function(){function e(t){for(var n in i(this,e),Qe)if(Qe.hasOwnProperty(n)){var r=Qe[n],o=r._driver;this[n]=o,Xe[o]||this.defineDriver(r)}this._defaultConfig=ot({},rt),this._config=ot({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new u((function(t,n){try{var r=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(i);for(var o=nt.concat("_initStorage"),a=0,s=o.length;a<s;a++){var d=o[a];if((!Ye(tt,d)||e[d])&&"function"!=typeof e[d])return void n(i)}var l=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=u.reject(t);return c(n,arguments[arguments.length-1]),n}},n=0,r=tt.length;n<r;n++){var i=tt[n];e[i]||(e[i]=t(i))}};l();var p=function(n){Xe[r]&&console.info("Redefining LocalForage driver: "+r),Xe[r]=e,Ke[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(p,n):p(!!e._support):p(!0)}catch(e){n(e)}}));return l(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Xe[e]?u.resolve(Xe[e]):u.reject(new Error("Driver not found."));return l(r,t,n),r},e.prototype.getSerializer=function(e){var t=u.resolve(ge);return l(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return l(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;Je(e)||(e=[e]);var i=this._getSupportedDrivers(e);function o(){r._config.driver=r.driver()}function a(e){return r._extend(e),o(),r._ready=r._initStorage(r._config),r._ready}function s(e){return function(){var t=0;function n(){for(;t<e.length;){var i=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(i).then(a).catch(n)}o();var s=new Error("No available storage method found.");return r._driverSet=u.reject(s),r._driverSet}return n()}}var d=null!==this._driverSet?this._driverSet.catch((function(){return u.resolve()})):u.resolve();return this._driverSet=d.then((function(){var e=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=s(i)}))})).catch((function(){o();var e=new Error("No available storage method found.");return r._driverSet=u.reject(e),r._driverSet})),l(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Ke[e]},e.prototype._extend=function(e){ot(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)it(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),st=new at;t.exports=st},{3:3}]},{},[4])(4)},33042:function(e,t,n){var r;!function(){"use strict";var i=function e(t){var n,r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),i={use_static:!1};function o(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function a(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:n})}function s(e,t){a(e,t,(function(){throw new v("The "+t+" method cannot be invoked on an Immutable data structure.")}))}"object"!=typeof(n=t)||Array.isArray(n)||null===n||void 0!==t.use_static&&(i.use_static=Boolean(t.use_static));var d="__immutable_invariants_hold";function u(e){return"object"!=typeof e||(null===e||Boolean(Object.getOwnPropertyDescriptor(e,d)))}function c(e,t){return e===t||e!=e&&t!=t}function l(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}var p=["setPrototypeOf"],f=p.concat(["push","pop","sort","splice","shift","unshift","reverse"]),m=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),h=p.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function v(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function g(e,t){for(var n in a(e,d,!0),t)t.hasOwnProperty(n)&&s(e,t[n]);return Object.freeze(e),e}function b(e,t){var n=e[t];a(e,t,(function(){return G(n.apply(e,arguments))}))}function y(e,t,n){var r=n&&n.deep;if(e in this&&(r&&this[e]!==t&&l(t)&&l(this[e])&&(t=G.merge(this[e],t,{deep:!0,mode:"replace"})),c(this[e],t)))return this;var i=O.call(this);return i[e]=G(t),_(i)}v.prototype=new Error,v.prototype.constructor=Error;var w=G([]);function I(e,t,n){var r=e[0];if(1===e.length)return y.call(this,r,t,n);var i,o=e.slice(1),a=this[r];if("object"==typeof a&&null!==a)i=G.setIn(a,o,t);else{var s=o[0];i=""!==s&&isFinite(s)?I.call(w,o,t):x.call(L,o,t)}if(r in this&&a===i)return this;var d=O.call(this);return d[r]=i,_(d)}function _(e){for(var t in m){if(m.hasOwnProperty(t))b(e,m[t])}i.use_static||(a(e,"flatMap",E),a(e,"asObject",M),a(e,"asMutable",O),a(e,"set",y),a(e,"setIn",I),a(e,"update",B),a(e,"updateIn",F),a(e,"getIn",H));for(var n=0,r=e.length;n<r;n++)e[n]=G(e[n]);return g(e,f)}function S(){return new Date(this.getTime())}function E(e){if(0===arguments.length)return this;var t,n=[],r=this.length;for(t=0;t<r;t++){var i=e(this[t],t,this);Array.isArray(i)?n.push.apply(n,i):n.push(i)}return _(n)}function R(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach((function(e,t,n){"number"==typeof e&&(n[t]=e.toString())})),e=function(e,n){return-1!==t.indexOf(n)}}var n=o(this);for(var r in this)this.hasOwnProperty(r)&&!1===e(this[r],r)&&(n[r]=this[r]);return V(n)}function O(e){var t,n,r=[];if(e&&e.deep)for(t=0,n=this.length;t<n;t++)r.push(A(this[t]));else for(t=0,n=this.length;t<n;t++)r.push(this[t]);return r}function M(e){"function"!=typeof e&&(e=function(e){return e});var t,n={},r=this.length;for(t=0;t<r;t++){var i=e(this[t],t,this),o=i[0],a=i[1];n[o]=a}return V(n)}function A(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,d)||e instanceof Date?e:G.asMutable(e,{deep:!0})}function k(e,t){for(var n in e)Object.getOwnPropertyDescriptor(e,n)&&(t[n]=e[n]);return t}function T(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var n,r,i=Array.isArray(e),a=t&&t.deep,s=t&&t.mode||"merge",d=t&&t.merger;function u(e,r,i){var s,u=G(r[i]),p=d&&d(e[i],u,t),f=e[i];void 0===n&&void 0===p&&e.hasOwnProperty(i)&&c(u,f)||(c(f,s=void 0!==p?p:a&&l(f)&&l(u)?G.merge(f,u,t):u)&&e.hasOwnProperty(i)||(void 0===n&&(n=k(e,o(e))),n[i]=s))}function p(e,t){for(var r in e)t.hasOwnProperty(r)||(void 0===n&&(n=k(e,o(e))),delete n[r])}if(i)for(var f=0,m=e.length;f<m;f++){var h=e[f];for(r in h)h.hasOwnProperty(r)&&u(void 0!==n?n:this,h,r)}else{for(r in e)Object.getOwnPropertyDescriptor(e,r)&&u(this,e,r);"replace"===s&&p(this,e)}return void 0===n?this:V(n)}function N(e,t){var n=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return G.merge(this,e,{deep:n,mode:"replace"})}var C,D,P,L=G({});function x(e,t,n){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var r=e[0];if(1===e.length)return W.call(this,r,t,n);var i,a=e.slice(1),s=this[r];if(i=this.hasOwnProperty(r)&&"object"==typeof s&&null!==s?G.setIn(s,a,t):x.call(L,a,t),this.hasOwnProperty(r)&&s===i)return this;var d=k(this,o(this));return d[r]=i,V(d)}function W(e,t,n){var r=n&&n.deep;if(this.hasOwnProperty(e)&&(r&&this[e]!==t&&l(t)&&l(this[e])&&(t=G.merge(this[e],t,{deep:!0,mode:"replace"})),c(this[e],t)))return this;var i=k(this,o(this));return i[e]=G(t),V(i)}function B(e,t){var n=Array.prototype.slice.call(arguments,2),r=this[e];return G.set(this,e,t.apply(r,[r].concat(n)))}function j(e,t){for(var n=0,r=t.length;null!=e&&n<r;n++)e=e[t[n]];return n&&n==r?e:void 0}function F(e,t){var n=Array.prototype.slice.call(arguments,2),r=j(this,e);return G.setIn(this,e,t.apply(r,[r].concat(n)))}function H(e,t){var n=j(this,e);return void 0===n?t:n}function U(e){var t,n=o(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(n[t]=A(this[t]));else for(t in this)this.hasOwnProperty(t)&&(n[t]=this[t]);return n}function z(){return{}}function V(e){return i.use_static||(a(e,"merge",T),a(e,"replace",N),a(e,"without",R),a(e,"asMutable",U),a(e,"set",W),a(e,"setIn",x),a(e,"update",B),a(e,"updateIn",F),a(e,"getIn",H)),g(e,p)}function G(e,t,n){if(u(e)||function(e){return"object"==typeof e&&null!==e&&(60103===e.$$typeof||e.$$typeof===r)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then(G);if(Array.isArray(e))return _(e.slice());if(e instanceof Date)return o=new Date(e.getTime()),i.use_static||a(o,"asMutable",S),g(o,h);var o,s=t&&t.prototype,d=(s&&s!==Object.prototype?function(){return Object.create(s)}:z)();if(null==n&&(n=64),n<=0)throw new v("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var c in n-=1,e)Object.getOwnPropertyDescriptor(e,c)&&(d[c]=G(e[c],void 0,n));return V(d)}function $(e){return function(){var t=[].slice.call(arguments),n=t.shift();return e.apply(n,t)}}function Z(e,t){return function(){var n=[].slice.call(arguments),r=n.shift();return Array.isArray(r)?t.apply(r,n):e.apply(r,n)}}return G.from=G,G.isImmutable=u,G.ImmutableError=v,G.merge=$(T),G.replace=$(N),G.without=$(R),G.asMutable=(C=U,D=O,P=S,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?D.apply(t,e):t instanceof Date?P.apply(t,e):C.apply(t,e)}),G.set=Z(W,y),G.setIn=Z(x,I),G.update=$(B),G.updateIn=$(F),G.getIn=$(H),G.flatMap=$(E),G.asObject=$(M),i.use_static||(G.static=e({use_static:!0})),Object.freeze(G),G}();void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}()},93967:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,o(n)))}return e}function o(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};!function(){"use strict";n.r(r),n.d(r,{BuilderBar:function(){return _t},BuilderBarContainer:function(){return St},PageBar:function(){return yt},PageBarContainer:function(){return wt},ResponsiveDragHandleContainer:function(){return an},ResponsiveMaximumDragLimitContainer:function(){return dn},Sidebar:function(){return tn},SidebarContainer:function(){return nn},SidebarDockingIndicator:function(){return rn},addSidebarRow:function(){return ln},dockModalToSidebar:function(){return pn},dockModalToSidebarRow:function(){return fn},effects:function(){return zn},exitVisualBuilder:function(){return u},getAppFrameMarginLeft:function(){return cr},getAppFrameMarginTop:function(){return lr},getAppFrameMaximumDragLimitStyles:function(){return pr},getAppFrameMaximumPossibleZoom:function(){return fr},getAppFrameMaximumWidth:function(){return mr},getAppFrameStyle:function(){return vr},getAppFrameWidth:function(){return hr},getAppFrameZoom:function(){return tr},getAttributeState:function(){return gr},getBreakpoint:function(){return br},getDockingAreas:function(){return Ir},getDraggedToUndockSidebarModal:function(){return _r},getElementProperty:function(){return ir},getElements:function(){return rr},getGlobalPreload:function(){return Sr},getHoveredDockingArea:function(){return Er},getHoveredSidebarDockingAreaId:function(){return Rr},getHoveredSidebarRowDockingArea:function(){return Or},getModuleInteractionEventTarget:function(){return Mr},getModuleInteractionStatus:function(){return Ar},getModulesPermissions:function(){return kr},getResizePosition:function(){return zr},getSidebarMaximumWidth:function(){return Tr},getSidebarModalDimension:function(){return Nr},getSidebarModalInfo:function(){return Cr},getSidebarModalNames:function(){return Dr},getSidebarProps:function(){return Pr},getSidebarRow:function(){return Lr},getSidebarRowDimensionLimits:function(){return xr},getSidebarRowHeight:function(){return yr},getSidebarRowOffset:function(){return wr},getSidebarRowSidebar:function(){return Br},getSidebarRowsHeight:function(){return Wr},getView:function(){return sr},getViewItem:function(){return dr},getViews:function(){return jr},getWindow:function(){return or},getWindowAutoScroll:function(){return Fr},hasInteraction:function(){return Hr},hasModulesPermission:function(){return Ur},hasUnsavedChanges:function(){return ht},isElementVisible:function(){return Vr},isInteractionLayerActive:function(){return Gr},isSidebarModal:function(){return $r},isUserDefinedWindowProperty:function(){return ar},isViewBreakpoint:function(){return ur},onModuleInteractionEvent:function(){return mn},onZoomIn:function(){return c},onZoomOut:function(){return l},registerAppUiStore:function(){return ti},registerListeners:function(){return ni},registerPermissions:function(){return ft},removeSidebarRow:function(){return hn},replaceSidebarModal:function(){return vn},resetState:function(){return gn},resetWindow:function(){return bn},saveCloudLibrary:function(){return Le},savePage:function(){return xe},savePageAsDraft:function(){return We},setAppFrameResizeStatus:function(){return yn},setAppFrameZoom:function(){return wn},setAttributeState:function(){return In},setDraggedToUndockSidebarModal:function(){return _n},setElementProperty:function(){return Sn},setElementVisibility:function(){return En},setGlobalPreload:function(){return Rn},setHoveredSidebarDockingArea:function(){return On},setInteractionLayer:function(){return Mn},setModulePermission:function(){return An},setSidebarMinimumWidth:function(){return kn},setSidebarRowActiveModal:function(){return Tn},setSidebarRowHeight:function(){return Nn},setSidebarRowResizingStatus:function(){return Cn},setView:function(){return Dn},setWindow:function(){return Pn},setWindowAutoScroll:function(){return Ln},toggleHelpModal:function(){return Be},toggleModuleInteraction:function(){return xn},togglePageBarModal:function(){return Fe},togglePageSettingsModal:function(){return He},toggleWireframeView:function(){return Ue},undockModalFromSidebarRow:function(){return Wn},updateSidebarRowLimits:function(){return Bn}});var e={};n.r(e),n.d(e,{addSidebarRow:function(){return ln},dockModalToSidebar:function(){return pn},dockModalToSidebarRow:function(){return fn},onModuleInteractionEvent:function(){return mn},removeSidebarRow:function(){return hn},replaceSidebarModal:function(){return vn},resetState:function(){return gn},resetWindow:function(){return bn},setAppFrameResizeStatus:function(){return yn},setAppFrameZoom:function(){return wn},setAttributeState:function(){return In},setDraggedToUndockSidebarModal:function(){return _n},setElementProperty:function(){return Sn},setElementVisibility:function(){return En},setGlobalPreload:function(){return Rn},setHoveredSidebarDockingArea:function(){return On},setInteractionLayer:function(){return Mn},setModulePermission:function(){return An},setSidebarMinimumWidth:function(){return kn},setSidebarRowActiveModal:function(){return Tn},setSidebarRowHeight:function(){return Nn},setSidebarRowResizingStatus:function(){return Cn},setView:function(){return Dn},setWindow:function(){return Pn},setWindowAutoScroll:function(){return Ln},toggleModuleInteraction:function(){return xn},undockModalFromSidebarRow:function(){return Wn},updateSidebarRowLimits:function(){return Bn}});var t={};n.r(t),n.d(t,{getAppFrameMarginLeft:function(){return cr},getAppFrameMarginTop:function(){return lr},getAppFrameMaximumDragLimitStyles:function(){return pr},getAppFrameMaximumPossibleZoom:function(){return fr},getAppFrameMaximumWidth:function(){return mr},getAppFrameStyle:function(){return vr},getAppFrameWidth:function(){return hr},getAppFrameZoom:function(){return tr},getAttributeState:function(){return gr},getBreakpoint:function(){return br},getDockingAreas:function(){return Ir},getDraggedToUndockSidebarModal:function(){return _r},getElementProperty:function(){return ir},getElements:function(){return rr},getGlobalPreload:function(){return Sr},getHoveredDockingArea:function(){return Er},getHoveredSidebarDockingAreaId:function(){return Rr},getHoveredSidebarRowDockingArea:function(){return Or},getModuleInteractionEventTarget:function(){return Mr},getModuleInteractionStatus:function(){return Ar},getModulesPermissions:function(){return kr},getResizePosition:function(){return zr},getSidebarMaximumWidth:function(){return Tr},getSidebarModalDimension:function(){return Nr},getSidebarModalInfo:function(){return Cr},getSidebarModalNames:function(){return Dr},getSidebarProps:function(){return Pr},getSidebarRow:function(){return Lr},getSidebarRowDimensionLimits:function(){return xr},getSidebarRowHeight:function(){return yr},getSidebarRowOffset:function(){return wr},getSidebarRowSidebar:function(){return Br},getSidebarRowsHeight:function(){return Wr},getView:function(){return sr},getViewItem:function(){return dr},getViews:function(){return jr},getWindow:function(){return or},getWindowAutoScroll:function(){return Fr},hasInteraction:function(){return Hr},hasModulesPermission:function(){return Ur},isElementVisible:function(){return Vr},isInteractionLayerActive:function(){return Gr},isSidebarModal:function(){return $r},isUserDefinedWindowProperty:function(){return ar},isViewBreakpoint:function(){return ur}});var i=window.vendor.React,o=n.n(i),a=window.lodash,s=window.divi.data,d=window.divi.window;const u=e=>{d.topWindow.location.href=e},c=()=>{const e=(0,s.select)("divi/app-ui").getAppFrameZoom({format:"percentage"}),t=e+10>100?100:e+10;(0,s.dispatch)("divi/app-ui").setAppFrameZoom({value:t,setter:"user"})},l=()=>{const e=(0,s.select)("divi/app-ui").getAppFrameZoom({format:"percentage"}),t=e-10<10?10:e-10;(0,s.dispatch)("divi/app-ui").setAppFrameZoom({value:t,setter:"user"})};var p=window.jQuery,f=n.n(p);function m(e){this.message=e}m.prototype=new Error,m.prototype.name="InvalidCharacterError";var h="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new m("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,o=0,a="";r=t.charAt(o++);~r&&(n=i%4?64*n+r:r,i++%4)?a+=String.fromCharCode(255&n>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return a};function v(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(h(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return h(t)}}function g(e){this.message=e}g.prototype=new Error,g.prototype.name="InvalidTokenError";var b=function(e,t){if("string"!=typeof e)throw new g("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(v(e.split(".")[n]))}catch(e){throw new g("Invalid token specified: "+e.message)}},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var S=function(){function e(t){_(this,e),this.type=t,"string"==typeof(arguments.length<=1?void 0:arguments[1])?(this.name=arguments.length<=1?void 0:arguments[1],this.items=arguments.length<=2?void 0:arguments[2]):(this.name=null,this.items=arguments.length<=1?void 0:arguments[1]),Array.isArray(this.items)||(this.items=[this.items])}return y(e,[{key:"toJSON",value:function(){return{name:this.name,_functionTreePrimitive:!0,type:this.type,items:this.items}}}]),e}(),E=function(e){function t(){var e;_(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return w(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this,"sequence"].concat(r)))}return I(t,e),t}(S),R=function(e){function t(){var e;_(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return w(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this,"parallel"].concat(r)))}return I(t,e),t}(S),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var T=function(e){function t(e){M(this,t);var n=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.message||e));return n.name="FunctionTreeError",n}return k(t,e),O(t,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,stack:this.stack}}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),N=function(e){function t(e,n,r,i){M(this,t);var o=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));return o.name="FunctionTreeExecutionError",o.execution=e,o.funcDetails=n,o.payload=r,o}return k(t,e),O(t,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,execution:{name:this.execution.name},funcDetails:{name:this.funcDetails.name,functionIndex:this.funcDetails.functionIndex},payload:this.payload,stack:this.stack}}}]),t}(T),C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function D(e){if(e.displayName)return e.displayName;if(e.name)return e.name;var t=e.toString(),n=void 0;return 0===t.indexOf("async function")?n="async function ":0===t.indexOf("function")&&(n="function "),t=(t=t.substr(n?n.length:0)).substr(0,t.indexOf("("))}function P(e){return e&&!Array.isArray(e)&&"object"===(void 0===e?"undefined":C(e))&&!(e instanceof S)}function L(e,t,n,r){if(n instanceof S){var i=n.toJSON();return Object.assign(i,{items:L(e,t,i.items,n instanceof R).items})}if(Array.isArray(n))return new E(n.reduce((function(r,i,o){if(i instanceof S){var a=i.toJSON();return r.concat(Object.assign(a,{items:L(e,t,a.items,i instanceof R).items}))}if("function"==typeof i){var s={name:i.displayName||D(i),functionIndex:t.push(i)-1,function:i},d=n[o+1];return P(d)&&(s.outputs={},Object.keys(d).forEach((function(n){if(i.outputs&&!~i.outputs.indexOf(n))throw new T("Outputs object doesn't match list of possible outputs defined for function.");s.outputs[n]=L(e,t,"function"==typeof d[n]?[d[n]]:d[n])}))),r.concat(s)}if(P(i))return r;if(Array.isArray(i)){var u=L(e,t,i);return r.concat(u)}throw new T('Unexpected entry in "'+e+'". '+function(e,t){return"\n[\n"+e.map((function(e){return e===t?"  "+(void 0===t?"undefined":C(t))+", <-- PROBLEM":"function"==typeof e?"  "+D(e)+",":e instanceof S?"  [ "+e.type.toUpperCase()+" ],":Array.isArray(e)?"  [ SEQUENCE ],":"  { PATHS },"})).join("\n")+"\n]\n  "}(n,i))}),[])).toJSON();throw new T("Unexpected entry in tree")}var x=function(e,t){return L(e,[],"function"==typeof t?[t]:t)},W=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var B=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.path=t,this.payload=n}return W(e,[{key:"toJSON",value:function(){return{path:this.path,payload:this.payload,_functionTreePath:!0}}}]),e}(),j=B,F=n(620),H=n.n(F);function U(e,t){return e._functionTreePrimitive&&e.type===t}function z(e,t,n,r,i,o,a,s,d){!function t(d,u,c,l,p){n((function(){function n(e){t(d,u+1,e,c,p)}function f(n,i){return function(o){var a=Object.assign({},c,o?o.payload:{});if(o&&n.outputs){var s=Object.keys(n.outputs);if(!~s.indexOf(o.path))throw new N(e,n,c,"function "+n.name+" must use one of its possible outputs: "+s.join(", ")+".");r(n,o.path,a),t(n.outputs[o.path].items,0,a,c,i)}else i(a)}}var m=d[u];if(m)if(U(m,"sequence"))t(m.items,0,c,l,n);else if(U(m,"parallel")){var h=m.items.length,v=[];o(c,h),m.items.forEach((function(r,i){return r.function?e.runFunction(r,c,l,f(r,(function(e){v.push(e),v.length===h?(s(e,h),n(Object.assign.apply(Object,[{}].concat(v)))):a(e,h-v.length)}))):t(r.items,0,c,l,(function(e){v.push(e),v.length===h?(s(e,h),n(Object.assign.apply(Object,[{}].concat(v)))):a(e,h-v.length)})),v}))}else e.runFunction(m,c,l,f(m,n));else d!==e.staticTree&&i(c),p(c)}))}([e.staticTree],0,t,null,d)}var V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function G(e){return e&&(e instanceof Promise||"function"==typeof e.then&&"function"==typeof e.catch)}function $(e){return!(null!==e&&"object"===(void 0===e?"undefined":V(e))&&!Array.isArray(e)&&e.constructor!==Object)}var Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var J=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.wrap,i=void 0===r||r,o=n.ignoreDefinition,a=void 0!==o&&o;Y(this,e),this.definition=t,"function"!=typeof t&&(a||this.verifyDefinition(t),this.wrap=i,this.ProviderConstructor=function(e){this.context=e},this.ProviderConstructor.prototype=t,this.WrappedProviderConstructor=function(e,t){this.context=t,this.providerName=e},this.WrappedProviderConstructor.prototype=Object.keys(a?{}:t).reduce((function(e,n){var r=t[n];return e[n]=function(){for(var e=this,t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];var a=r.apply(this,i);return G(a)?a.then((function(t){return e.context.debugger.send({type:"provider",datetime:Date.now(),method:e.providerName+"."+n,args:i,isPromise:!0,isRejected:!1,returnValue:$(t)?t:"[CAN_NOT_SERIALIZE]"}),t})).catch((function(t){throw e.context.debugger.send({method:e.providerName+"."+n,args:i,isPromise:!0,isRejected:!0}),t})):(this.context.debugger.send({type:"provider",datetime:Date.now(),method:this.providerName+"."+n,args:i,returnValue:$(a)?a:"[CAN_NOT_SERIALIZE]"}),a)},e}),{}))}return q(e,[{key:"verifyDefinition",value:function(e){if(!this.ignoreDefinition){if("object"!==(void 0===e?"undefined":Z(e))||null===e)throw new Error("The definition passed as Provider is not valid");Object.keys(e).forEach((function(t){if("function"!=typeof e[t])throw new Error("The property "+t+" passed to Provider is not a method")}))}}},{key:"get",value:function(e){return"function"==typeof this.definition?this.definition(e):new this.ProviderConstructor(e)}},{key:"getWrapped",value:function(e,t){return"function"==typeof this.definition?this.definition(t):new this.WrappedProviderConstructor(e,t)}}]),e}(),X=J,K=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ee=function(){function e(){Q(this,e)}return K(e,[{key:"getValue",value:function(){throw new Error('Extending ResolveValue requires you to add a "getValue" method')}}]),e}();!function(e){function t(e){Q(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.cvalue=e,n}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(t,e),K(t,[{key:"getValue",value:function(e){var t=e.resolve,n=this.cvalue;return t.isResolveValue(n)?t.value(n):Object.keys(n).reduce((function(e,r){return e[r]=t.value(n[r]),e}),{})}}])}(ee);var te=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ne=function(e){function t(e,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.type=e,o.getter=n,o.strings=r,o.values=i,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),te(t,[{key:"getTags",value:function(){return[this].concat(this.getNestedTags())}},{key:"getPath",value:function(e){var t=this;return this.strings.reduce((function(n,r,i){var o=t.values[i];return o instanceof ee?n+r+o.getValue(e):n+r+(void 0!==o?o:"")}),"")}},{key:"getValue",value:function(e){return this.getter(this.getPath(e),e)}},{key:"getNestedTags",value:function(){var e=this;return this.strings.reduce((function(n,r,i){var o=e.values[i];return o instanceof t?n.concat(o):n}),[])}},{key:"toString",value:function(){return this.type+"`"+this.pathToString()+"`"}},{key:"pathToString",value:function(){var e=this;return this.strings.reduce((function(n,r,i){var o=e.values[i];return o instanceof t?n+r+"${"+o.toString()+"}":n+r+(void 0!==o?o:"")}),"")}}]),t}(ee);function re(e,t){return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(i.some((function(e){return void 0===e})))throw new Error("One of the values passed inside the tag interpolated to undefined. Please check.");return new ne(e,t,n,i)}}var ie=new X({isTag:function(e){if(!(e instanceof ne))return!1;for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!n.length||n.reduce((function(t,n){return t||n===e.type}),!1)},isResolveValue:function(e){return e instanceof ee},value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e instanceof ee?e.getValue(t?Object.assign({},this.context,t):this.context):e},path:function(e){if(e instanceof ne)return e.getPath(this.context);throw new Error("You are extracting a path from an argument that is not a Tag.")}},{wrap:!1}),oe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function se(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e){return!e||"object"===(void 0===e?"undefined":ae(e))&&!Array.isArray(e)}function ce(e,t,n,r){var i=e;return i.execution=t,i.functionDetails=n,i.payload=Object.assign({},r,{_execution:{id:t.id,functionIndex:n.functionIndex},error:e.toJSON?e.toJSON():{name:e.name,message:e.message,stack:e.stack}}),i}var le=function(){function e(t,n,r,i){de(this,e),this.id=Date.now()+"_"+Math.floor(1e4*Math.random()),this.name=t||n.name||this.id,this.staticTree=n,this.functionTree=r,this.datetime=Date.now(),this.errorCallback=i,this.hasThrown=!1,this.isAsync=!1,this.runFunction=this.runFunction.bind(this)}return oe(e,[{key:"runFunction",value:function(e,t,n,r){if(!this.hasThrown){var i=this.createContext(e,t,n),o=this.functionTree,a=this.errorCallback,s=this,d=void 0;o.emit("functionStart",s,e,t);try{d=e.function(i)}catch(u){return this.hasThrown=!0,a(ce(u,s,e,t),s,e,t)}if(G(d))o.emit("asyncFunction",s,e,t,d),this.isAsync=!0,d.then((function(n){if(n instanceof j)o.emit("functionEnd",s,e,t,n),r(n.toJSON());else{if(e.outputs)throw o.emit("functionEnd",s,e,t,n),new N(s,e,t,new Error("The result "+JSON.stringify(n)+" from function "+e.name+" needs to be a path of either "+Object.keys(e.outputs)));if(!ue(n))throw o.emit("functionEnd",s,e,t,n),new N(s,e,t,new Error("The result "+JSON.stringify(n)+" from function "+e.name+" is not a valid result"));o.emit("functionEnd",s,e,t,n),r({payload:n})}})).catch((function(n){if(!s.hasThrown)if(n instanceof Error)s.hasThrown=!0,a(ce(n,s,e,t),s,e,t);else if(n instanceof j)o.emit("functionEnd",s,e,t,n),r(n.toJSON());else if(e.outputs){var i=new N(s,e,t,new Error("The result "+JSON.stringify(n)+" from function "+e.name+" needs to be a path of either "+Object.keys(e.outputs)));s.hasThrown=!0,a(ce(i,s,e,t),s,e,t)}else if(ue(n))o.emit("functionEnd",s,e,t,n),r({payload:n});else{var d=new N(s,e,t,new Error("The result "+JSON.stringify(n)+" from function "+e.name+" is not a valid result"));s.hasThrown=!0,a(ce(d,s,e,t),s,e,t)}}));else if(d instanceof j)o.emit("functionEnd",s,e,t,d),r(d.toJSON());else if(e.outputs){var u=new N(s,e,t,new Error("The result "+JSON.stringify(d)+" from function "+e.name+" needs to be a path of either "+Object.keys(e.outputs)));this.hasThrown=!0,a(ce(u,s,e,t),s,e,t)}else if(ue(d))o.emit("functionEnd",s,e,t,d),r({payload:d});else{var c=new N(s,e,t,new Error("The result "+JSON.stringify(d)+" from function "+e.name+" is not a valid result"));this.hasThrown=!0,a(ce(c,s,e,t),s,e,t)}}}},{key:"createContext",value:function(e,t,n){var r=this.functionTree.contextProviders,i={execution:this,props:t||{},functionDetails:e,path:e.outputs?Object.keys(e.outputs).reduce((function(e,t){return e[t]=function(e){return new j(t,e)},e}),{}):null},o=r.debugger&&r.debugger.get(i,e,t,n),a=Object.keys(r).reduce((function(i,o){var a=r[o];return i[o]=a instanceof X?a.get(i,e,t,n):a,i}),i);return o?Object.keys(a).reduce((function(t,n){var i=r[n];return i&&i instanceof X&&i.wrap?t[n]="function"==typeof i.wrap?i.wrap(a,e):i.getWrapped(n,a):t[n]=a[n],t}),{}):a}}]),e}();!function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};de(this,t);var r=se(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(r.cachedTrees=[],r.cachedStaticTrees=[],r.executeBranchWrapper=n.executeBranchWrapper||function(e){e()},"object"!==(void 0===e?"undefined":ae(e))||null===e||Array.isArray(e))throw new Error("You have to pass an object of context providers to FunctionTree");var i=Object.keys(e);if(i.indexOf("props")>=0||i.indexOf("path")>=0||i.indexOf("resolve")>=0||i.indexOf("execution")>=0||i.indexOf("debugger")>=0)throw new Error('You are trying to add a provider with protected key. "props", "path", "resolve", "execution" and "debugger" are protected');return r.contextProviders=Object.assign({},e,{resolve:ie}),r.run=r.run.bind(r),r}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(t,e),oe(t,[{key:"run",value:function(){var e=this,t=void 0,n=void 0,r=void 0,i=void 0,o=void 0,a=[].slice.call(arguments);if(a.forEach((function(e){"string"==typeof e?t=e:Array.isArray(e)||e instanceof S?n=e:n||"function"!=typeof e?"function"==typeof e?i=e:r=e:n=e})),!n)throw new Error("function-tree - You did not pass in a function tree");var s=function(i,a){var s=e.cachedTrees.indexOf(n);-1===s?(o=x(t,n),e.cachedTrees.push(n),e.cachedStaticTrees.push(o)):o=e.cachedStaticTrees[s];var d=new le(t,o,e,(function(t,n,r,i){e.emit("error",t,n,r,i),a(t)}));e.emit("start",d,r),z(d,r,e.executeBranchWrapper,(function(t,n,r){e.emit("pathStart",n,d,t,r)}),(function(t){e.emit("pathEnd",d,t)}),(function(t,n){e.emit("parallelStart",d,t,n)}),(function(t,n){e.emit("parallelProgress",d,t,n)}),(function(t,n){e.emit("parallelEnd",d,t,n)}),(function(t){e.emit("end",d,t),i===a?i(null,t):i(t)}))};if(!i)return new Promise(s);s(i,i)}}])}(H());var pe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var fe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=e.nextWatchId++;this.id="Watch_"+n,this.rawId=n,this.name=null,this.type=t,this.executedCount=0,this.controller=null,this.modulePath="",this.dependencyMap=null}return pe(e,[{key:"create",value:function(e,t,n){return this.name=n,this.controller=e,this.modulePath=t,this}},{key:"registerDependencies",value:function(){this.dependencyMap=this.createDependencyMap(),this.controller.dependencyStore.addEntity(this,this.dependencyMap),this.controller.devtools&&(this.controller.devtools.updateWatchMap(this,this.dependencyMap),this.controller.devtools.sendWatchMap([],[],0,0))}},{key:"destroy",value:function(){this.dependencyMap&&(this.controller.dependencyStore.removeEntity(this,this.dependencyMap),this.controller.devtools&&(this.controller.devtools.updateWatchMap(this,null,this.dependencyMap),this.controller.devtools.sendWatchMap([],[],0,0)))}},{key:"toJSON",value:function(){return{id:this.id,executedCount:this.executedCount,type:this.type,name:this.name}}}]),e}();fe.nextWatchId=0;var me=fe,he=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ge=function(){function e(t,n){ve(this,e),this.computed=t,this.propsTags=t.propsTags,this.nestedPath=n}return he(e,[{key:"getValue",value:function(e){return this.nestedPath.reduce((function(e,t){return e&&e[t]}),this.computed.getValue(e))}},{key:"getDependencyMap",value:function(){return this.computed.getDependencyMap()}},{key:"clone",value:function(){return this.computed.clone()}},{key:"destroy",value:function(){return this.computed.destroy()}}]),e}(),be=function(e){function t(e){ve(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Compute"));return n.computedCallback=e,n.isDirty=!0,n.value=null,n.props=null,n.getters=null,n.stateTags=[],n.propsTags=[],n.onUpdate=n.onUpdate.bind(n),n.dynamicGetter=n.dynamicGetter.bind(n),n.dynamicGetter.path=n.dynamicPathGetter.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),he(t,[{key:"createDependencyMap",value:function(){return this.controller.createDependencyMap(this.stateTags,this.props,this.modulePath)}},{key:"getDependencyMap",value:function(){return this.dependencyMap}},{key:"onUpdate",value:function(){this.isDirty=!0}},{key:"clone",value:function(){return new t(this.computedCallback).create(this.controller,this.modulePath,this.name+" (clone)")}},{key:"compute",value:function(){return this.executedCount++,this.computedCallback(this.getDynamicGetter())}},{key:"getDynamicGetter",value:function(){return this.stateTags=[],this.propsTags=[],this.dynamicGetter}},{key:"parseDependencies",value:function(e){var t=this;if(!(e instanceof ne))throw new Error('Cerebral - Only tags are allowed in the dynamic "get" of Compute');e.getTags().forEach((function(e){"props"===e.type?t.propsTags.push(e):t.stateTags.push(e)}))}},{key:"dynamicGetter",value:function(e){this.parseDependencies(e);var t=e.getValue(this.getters);return _e(t)?t.getValue(this.props):t}},{key:"dynamicPathGetter",value:function(e){return e.getPath(this.getters)}},{key:"hasChangedProps",value:function(e){var t=this,n=this.controller.createContext(e);return this.propsTags.reduce((function(e,r){return!!e||r.getValue(t.getters)!==r.getValue(n)}),!1)}},{key:"getValue",value:function(e){if(!this.controller)throw new Error("This Cerebral Compute has not been added to a module");if(!this.isDirty&&this.propsTags.length&&this.hasChangedProps(e)&&(this.isDirty=!0),this.isDirty){this.getters=this.controller.createContext(e),this.props=e,this.value=this.compute();var t=this.dependencyMap;this.dependencyMap=this.createDependencyMap(),this.controller.dependencyStore.updateEntity(this,t,this.dependencyMap),this.controller.devtools&&(this.controller.devtools.updateWatchMap(this,this.dependencyMap,t),this.controller.devtools.updateComputedState(this.name,this.value)),this.isDirty=!1}return this.value}},{key:"toString",value:function(){return this.getValue(this.props)}}]),t}(me);"function"==typeof Symbol&&Symbol.iterator;var ye=[];function we(e,t){-1===ye.indexOf(e)&&(ye.push(e),console.warn(e+" is DEPRECATED - "+t))}function Ie(e,t){var n=t.execution.name.split(".");return n.splice(0,n.length-1).concat(e).join(".")}function _e(e){return e instanceof be||e instanceof ge}re("string",(function(e){return e})),re("path",(function(e){return e})),re("signal",(function(e,t){return we("tags.signal",'use the "sequences" tag instead'),t.controller.getSequence(e)})),re("signals",(function(e,t){return we("tags.signals",'use the "sequences" tag instead'),t.controller.getSequences(e)})),re("sequences",(function(e,t){return t.controller.getSequence(e)||t.controller.getSequences(e)})),re("state",(function(e,t){return t.controller.getState(e)})),re("module",(function(e,t){return we("tags.module",'use the "moduleState" tag instead'),t.controller.getState(Ie(e,t))})),re("moduleState",(function(e,t){return t.controller.getState(Ie(e,t))})),re("moduleSequences",(function(e,t){return t.controller.getSequence(Ie(e,t))||t.controller.getSequences(Ie(e,t))})),re("props",(function(e,t){return function(e,t){return t.split(".").reduce((function(e,n,r){if(r>0&&void 0===e)throw new Error('Cannot extract value at path "'+t+'" ("'+n+'" is not defined).');return e[n]}),e)}(t.props,e)}));const Se={tags:"tags",categories:"categories",packs:"packs",favoritePacks:"favorites",cloudStatus:"activate",layout:"layouts",section:"sections",row:"rows",module:"modules",tb_template:"templates",tb_set:"template-sets",code_css:"snippets-css",code_css_no_selector:"snippets-css-ns",code_html:"snippets"};var Ee=n(86636),Re=n.n(Ee);const Oe={cache:{},offlineCacheTable:"DiviCloud",offlineCacheVersion:"1.4",cacheKey:"",init(e,t){window.ETCloudCache=window.ETCloudCache||{},this.cacheKey=e,(0,a.has)(window.ETCloudCache,e)||(0,a.set)(window.ETCloudCache,e,{}),this.getOfflineCache("cloud-cache-version").then((e=>{if(this.offlineCacheVersion!==e){Re().createInstance({name:this.offlineCacheTable}).clear().then((()=>{this.setOfflineCache("cloud-cache-version",this.offlineCacheVersion)}))}})),this.cache=window.ETCloudCache[e]},addData(e,t,n=!1,r=!1){if(n)(0,a.set)(window.ETCloudCache,e,t);else{const n=r?window.ETCloudCache[r]:this.cache;(0,a.set)(n,e,t)}},getData(e,t=[],n=!1){return n?(0,a.get)(window.ETCloudCache[n],e,t):(0,a.get)(this.cache,e,t)},clearData(){window.ETCloudCache={},(0,a.set)(window.ETCloudCache,this.cacheKey,{}),this.cache=window.ETCloudCache[this.cacheKey]},setOfflineCache(e,t,n=!1,r="items"){const i=Re().createInstance({name:this.offlineCacheTable});return n?i.getItem(e).then((n=>{let o=t;return o="array"===r?(0,a.merge)(n,t):n?(0,a.concat)(n,t).filter((function({id:e,item_location:t},n){const r=t||"local";return!this.has(n=e+r)&&this.add(n)}),new Set):t,i.setItem(e,o)})):i.setItem(e,t)},getOfflineCache(e){return Re().createInstance({name:this.offlineCacheTable}).getItem(e).then((e=>e))}};function Me(e="user",t=""){if("predefined"===e)return et_cloud_data.predefined_items_url;const n=function(e){try{return b(e)}catch(e){return"invalid-token"}}(t);return`${"invalid-token"===n?"":(0,a.get)(n,["aud",[1]],"")}/wp-json/cloud/v1`}function Ae(e,t={},n={},r=!1,i=0,o="",s=0){return ke().then((d=>{const u=(0,a.get)(d,"accessToken","");if(""===u)return r&&r({error:"auth_error"}),new Promise((e=>e({error:"auth_error"})));const c=(0,a.get)(d,"sharedFolders",[]),l=(0,a.find)(c,["id",s]);return l&&!o&&(o=`${l.endpoint}/cloud/v1`),function(e,t,n={},r={},i=!1,o=0,s=""){if(0!==o)return Ne({type:"post",resource:t,resourceId:o,accessToken:e,providedBaseUrl:s},n).then((e=>(i&&i(e),e)));const d=[];(0,a.isEmpty)(r)||(0,a.forEach)(r,((t,n)=>{(0,a.isEmpty)(t)||(0,a.forEach)(t,(t=>{d.push(Te(t,n,e,s))}))}));"fullwidth"===n.width&&d.push(Te("fullwidth","module_width",e,s));return(0,a.isEmpty)(d)?Ne({type:"post",resource:t,accessToken:e,providedBaseUrl:s},n).then((t=>(i&&i(t,e),t))):Promise.all(d).then((r=>{const o=(0,a.groupBy)(r,"taxonomy");return(0,a.forEach)(["categories","tags","module_width"],(e=>{const t=(0,a.get)(o,[e],[]);let r=[];(0,a.isEmpty)(t)||(r=(0,a.map)((0,a.keys)((0,a.keyBy)(t,"id")),a.toInteger)),n[e]=r})),Ne({type:"post",resource:t,accessToken:e,providedBaseUrl:s},n).then((t=>(i&&i(t,e),t)))}))}(u,e,t,n,r,i,o)})).catch((e=>(r&&r({error:e}),{error:e})))}function ke(e="",t=!1){return Oe.getOfflineCache("refreshTokenPart").then((n=>new Promise((r=>{f().ajax({type:"POST",url:et_cloud_data.ajaxurl,dataType:"json",data:{action:"et_cloud_update_tokens",et_cloud_token_nonce:et_cloud_data.nonces.et_cloud_refresh_token,et_cloud_access_token:e,et_cloud_save_session:t,et_cloud_refresh_token_part:n},complete(e){const t=(0,a.get)(e,"responseJSON.data",{});Oe.setOfflineCache("refreshTokenPart",t.refreshTokenPart).then((()=>r(t)))}})}))))}function Te(e,t,n,r=""){return new Promise((i=>{if((0,a.isUndefined)(e)||""===e)return i({});return Ne({type:"post",resource:t,accessToken:n,providedBaseUrl:r},{name:e}).then((e=>{if(e.error&&"term_exists"!==e.error)return i({});const n="term_exists"===(0,a.get)(e,"code","")?e.data.term_id:e.id;i({taxonomy:t,id:n})}))}))}function Ne(e={},t={}){const{type:n,resource:r,resourceId:i,source:o,queryString:s,providedUrl:d,providedBaseUrl:u,etAccount:c,accessToken:l,includeHeaders:p}=e;let f=d||"";const m="predefined"===o&&"cloudStatus"!==r?`${(0,a.get)(c,"username","")}:${(0,a.get)(c,"apiKey","")}`:l,h=("predefined"!==o||"favoritePacks"===r||"layout"===r||"cloudStatus"===r)&&!d;if(!f){const e=u&&""!==u?u:Me(o,m),t=function(e){return(0,a.get)(Se,e,e)}(r);f=`${e}/${t}`,i&&(f=`${f}/${i}`),s&&(f=`${f}?${s}`)}const v={method:n,mode:"cors"};(0,a.isEmpty)(t)||(v.body=JSON.stringify(t));const g=d?{"Content-Type":"application/x-www-form-urlencoded"}:{"Content-Type":"application/json; charset=UTF-8",Accept:"application/json"};if(h){if(!m)return new Promise((e=>e({code:"missing_token",error:"Your Divi Cloud session has ended. Please try logging in again. If you continue to experience authorization failures, try closing Library modal and opening it again so that your authorization token can be regenerated."})));g.Authorization=`Bearer ${m}`,v.credentials="same-origin"}return v.headers=g,function(e,t,n=!1){const r="post"===t.method?300:15;return t.signal=(e=>{const t=new AbortController;return setTimeout((()=>t.abort()),1e3*e),t})(r).signal,fetch(e,t).then((e=>{if(503===e.status)throw new Error(`${e.status} - ${e.statusText}`);return e.json().then((t=>({totalPages:e.headers.get("x-wp-totalpages"),totalItems:e.headers.get("x-wp-total"),totalCloudItems:e.headers.get("X-ET-API-CLOUD-ITEM-COUNT"),body:t})))})).then((e=>(0,a.get)(e,"body.code")?{error:e.body.code,...e.body}:n?e:e.body)).catch((t=>(console.log("CLOUD API REQUEST ERROR:",e,t),{error:t})))}(f,v,p)}var Ce=window.vendor.wp.i18n,De=window.divi.rest,Pe=window.divi.serializedPost;const Le=e=>{(0,s.dispatch)("divi/modal-library").open({name:"divi/progress-bar",dimension:{width:500,height:150},attributes:{progress:10,heading:(0,Ce.__)("Saving to Cloud","et_builder")}});const t=(0,s.select)("divi/edit-post").getContent(),n=(0,Pe.serializeModuleFlatObjects)(t.asMutable({deep:!0})),r=(0,s.select)("divi/page-settings").getSettings(),i=(0,s.select)("divi/serialized-post").getUsedGlobalColorIds(),o=(0,s.select)("divi/global-data").getGlobalColorsToExport(i),a=(0,s.select)("divi/settings").getSetting(["layout","type"]),d=new FormData;(0,s.dispatch)("divi/rest").setInProgress("sync-to-server",!0),(0,s.dispatch)("divi/rest").setInProgress("sync-to-server--publish",!0),d.append("content",n),d.append("global_colors",JSON.stringify(o)),d.append("post",e),d.append("context","et_builder"),d.append("return_content","true");const u=t=>{(0,De.loggedFetch)({method:"POST",restRoute:"/divi/v1/portability/export",data:t},!0).then((n=>{const r=n?.timestamp||"";if(void 0!==n.page&&void 0!==n.totalPages){const e=t;e.append("page",String(Number(n.page)+1)),e.append("timestamp",r),(0,s.dispatch)("divi/modal-library").setAttributes({name:"divi/progress-bar",attributes:{progress:Math.floor(Number(n.page)/Number(n.totalPages)*80)},merge:!0}),u(e)}else{const t={content:JSON.stringify(n)};(0,s.dispatch)("divi/modal-library").setAttributes({name:"divi/progress-bar",attributes:{progress:90},merge:!0}),Ae(a,t,[],(()=>{(0,s.dispatch)("divi/rest").setInProgress("sync-to-server",!1),(0,s.dispatch)("divi/rest").setInProgress("sync-to-server--publish",!1),(0,s.dispatch)("divi/modal-library").setAttributes({name:"divi/progress-bar",attributes:{progress:100},merge:!0}),setTimeout((()=>{(0,s.dispatch)("divi/modal-library").close({name:"divi/progress-bar"})}),1e3)}),e,"")}})).then((()=>{(0,s.dispatch)("divi/history").setSavedState({content:n,settings:r})})).catch((e=>{console.log(e)}))};u(d)},xe=()=>{(0,s.dispatch)("divi/serialized-post").syncToServer({syncType:"publish"})},We=()=>{(0,s.dispatch)("divi/serialized-post").syncToServer({syncType:"draft"})},Be=({isActive:e})=>{e?(0,s.dispatch)("divi/modal-library").close({name:"divi/help"}):((0,s.dispatch)("divi/help").setCurrentListName("divi/default"),(0,s.dispatch)("divi/help").setCurrentVideo(0),(0,s.dispatch)("divi/modal-library").open({name:"divi/help"}))};var je=window.divi.constantLibrary;const Fe=({isModalActive:e,modalName:t,modalOffset:n,modalWidth:r,buttonOffset:i,owner:o})=>{if(e)(0,s.dispatch)("divi/modal-library").close({name:t});else{const e="divi/add-to-library"===t,d=28+10,u=r-28,c=je.modal.defaults.offset.left===n?.left&&je.modal.defaults.offset.left===n?.top||e&&(0,a.isEmpty)(o)?{top:i.top+d,left:i.left-u}:{};(0,s.dispatch)("divi/modal-library").open({name:t,offset:c,owner:o,attributes:{saveToDiviCloud:"off"}})}},He=({isActive:e})=>{e?(0,s.dispatch)("divi/modal-library").close({name:"divi/page-settings"}):(0,s.dispatch)("divi/modal-library").open({name:"divi/page-settings"})},Ue=({isActive:e})=>{e?(f()("html").attr("data-et-app-view","desktop"),(0,s.dispatch)("divi/app-ui").setView("desktop"),(0,s.dispatch)("divi/app-preferences").set(["app","view"],"desktop")):(f()("html").attr("data-et-app-view","wireframe"),(0,s.dispatch)("divi/app-ui").setView("wireframe"),(0,s.dispatch)("divi/app-preferences").set(["app","view"],"wireframe"))},ze=({postTitle:e,updatePostTitle:t})=>{const n=(0,i.useRef)(e),[r,a]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{r||(n.current=e)}),[e]),o().createElement("h1",{className:"et-vb-page-bar-title",contentEditable:!0,suppressContentEditableWarning:!0,onFocus:()=>{n.current=e,a(!0)},onInput:e=>{const n=e.target;t(n?.innerText)},onBlur:()=>{a(!1)},dangerouslySetInnerHTML:{__html:r?n?.current:e}})},Ve=()=>{const{postTitle:e}=(0,s.useSelect)((e=>({postTitle:e("divi/page-settings").getSetting("postTitle")}))),{update:t}=(0,s.useDispatch)("divi/page-settings");return o().createElement(ze,{postTitle:e,updatePostTitle:e=>{t("postTitle",e)}})};var Ge=n(93967),$e=n.n(Ge),Ze=window.divi.iconLibrary,qe=window.divi.tooltip;const Ye=({name:e,active:t,iconSvg:n,label:r,onClick:a,style:s})=>{const[d,u]=(0,i.useState)(!1);return o().createElement("button",{className:$e()({"et-vb-page-bar-button":!0,[`et-vb-page-bar-button--${e}`]:!0,"et-vb-page-bar-button--active":t,"et-vb-page-bar-button--hover":d}),onClick:a,type:"button","data-tooltip-id":`et-vb-page-bar-tooltip-${e}`,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:s},o().createElement(Ze.IconSvg,{name:n?.name,color:"transparent",iconComponentProps:{color:"#FFFFFF"}}),o().createElement(qe.TooltipContainer,{id:`et-vb-page-bar-tooltip-${e}`,windowLocation:"top",position:"page-settings"===e?"center-right":"bottom-center",verticalDistance:20},r))},Je=({name:e,active:t,iconSvg:n,label:r,onClick:a})=>{const[s,d]=(0,i.useState)(!1);return o().createElement("button",{className:$e()({"et-vb-page-bar-responsive-button":!0,[`et-vb-page-bar-responsive-button--${e}`]:!0,"et-vb-page-bar-responsive-button--active":t,"et-vb-page-bar-responsive-button--hover":s}),onClick:a,type:"button","data-tooltip-id":`et-vb-page-bar-tooltip-${e}`,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1)},o().createElement(Ze.IconSvg,{name:n?.name,color:"transparent",iconComponentProps:{color:t||s?"#ffffff":"#5C6978"}}),o().createElement(qe.TooltipContainer,{id:`et-vb-page-bar-tooltip-${e}`,windowLocation:"top",position:"bottom-center",verticalDistance:20},r))},Xe=e=>{e.preventDefault(),(0,s.dispatch)("divi/app-ui").resetWindow({attr:"width",windowLocation:"app",setter:"user"})};var Ke=window.divi.fieldLibrary;const Qe=({defaultValue:e,enable:t,hasReset:n,name:r,onBlur:i,onChange:a,onFocus:s,onResetClick:d,value:u})=>{if(!t)return null;const c="zoom"===r?o().createElement(Ze.IconSvg,{size:10,name:"divi/search-enhancement",viewBox:"6 6 18 18"}):o().createElement(Ze.IconSvg,{size:10,name:"divi/responsive-width",color:"#A2B0C1",viewBox:"2 1 18 18"});return o().createElement("div",{className:$e()({"et-vb-page-bar-responsive-select-wrapper":!0,[`et-vb-page-bar-responsive-select-wrapper--${r}`]:!0})},o().createElement(Ke.Text,{name:`et-vb-page-bar-responsive-select--${r}`,defaultValue:e,value:u,onBlur:i,onChange:a,onFocus:s,renderBefore:()=>o().createElement("div",{className:"et-vb-page-bar-responsive-select-icon"},c),renderAfter:()=>n?o().createElement("button",{className:"et-vb-page-bar-responsive-select-reset et-vb-page-bar-responsive-select-button--reset",onClick:d,type:"button","aria-label":(0,Ce.__)("Reset","et_builder")},o().createElement(Ze.IconSvg,{size:10,name:"divi/responsive-reset",color:"#A2B0C1",viewBox:"-3 -3 20 20"})):null,showPlaceholderOnEmpty:!0}))};Qe.defaultProps={onBlur:a.noop,onChange:a.noop,onFocus:a.noop,onResetClick:a.noop};const et=(0,a.debounce)((({defaultAppFrameWidth:e,appFrameMaximumWidth:t,editedValue:n,resetWindow:r,setEditedValue:i,setWindow:o,valueRefCurrent:a})=>{const s=parseInt(n);if(n){if(s>t)return void i("");const n=Number.isNaN(s)?e:s;o({attr:"width",value:n,windowLocation:"app",setter:"user",allowBreakpointSwitching:!0});i((d=String(n),`${parseInt(d)}px`))}else a&&r({attr:"width",windowLocation:"app",setter:"user"}),i("");var d}),800),tt=()=>{const{appFrameMaximumWidth:e,appWindowWidth:t,isAppWindowWidthModified:n,view:r}=(0,s.useSelect)((e=>({appFrameMaximumWidth:e("divi/app-ui").getAppFrameMaximumWidth(),appWindowWidth:e("divi/app-ui").getWindow("width","app"),isAppWindowWidthModified:e("divi/app-ui").isUserDefinedWindowProperty({attr:"width",windowLocation:"app"}),view:e("divi/app-ui").getView()}))),{resetWindow:a,setAppFrameResizeStatus:d,setWindow:u}=(0,s.useDispatch)("divi/app-ui"),c="wireframe"!==r,l=(0,i.useRef)(""),[p,f]=(0,i.useState)(!1),[m,h]=(0,i.useState)("");return(0,i.useEffect)((()=>{n?(l.current=`${t}px`,h(`${t}px`)):(l.current="",h(""))}),[n,t]),o().createElement(Qe,{defaultValue:`${t}px`,enable:c,hasReset:n,onFocus:()=>{f(!0),d({status:!0,triggeringElement:"page-bar-select-resize",position:!1})},onBlur:()=>{f(!1),d({status:!1,triggeringElement:!1,position:!1})},onChange:n=>{et({defaultAppFrameWidth:t,appFrameMaximumWidth:e,editedValue:n.inputValue,resetWindow:a,setEditedValue:h,setWindow:u,valueRefCurrent:l.current}),h(n.inputValue)},onResetClick:Xe,name:"width",value:p?m:l.current})};var nt=window.vendor.wp.hooks,rt=window.divi.uiLibrary;const it=()=>{const e=(0,s.select)("divi/app-ui").getView(),t=(0,s.select)("divi/app-ui").getAppFrameMaximumPossibleZoom({format:"percentage",view:e,roundingUpPercentage:!1}),n=(0,s.select)("divi/app-ui").getAppFrameZoom({format:"percentage"});return[{name:"reset",label:(0,Ce.__)("Reset","et_builder"),onClick:()=>{(0,s.dispatch)("divi/app-ui").setAppFrameZoom({value:100,setter:"visualBuilder"}),(0,s.dispatch)("divi/right-click-options").unset()},bottomSeparator:!0},{name:"zoom-out",enable:n-10>=10,label:(0,Ce.__)("Zoom Out","et_builder"),onClick:()=>{l(),(0,s.dispatch)("divi/right-click-options").unset()},shortcut:rt.isAppleOS?["⌘","-"]:["Ctrl","-"]},{name:"zoom-to-75",enable:t>=75,label:(0,Ce.__)("Zoom to 75%","et_builder"),onClick:()=>{(0,s.dispatch)("divi/app-ui").setAppFrameZoom({value:75,setter:"user"}),(0,s.dispatch)("divi/right-click-options").unset()}},{name:"zoom-to-50",enable:t>=50,label:(0,Ce.__)("Zoom to 50%","et_builder"),onClick:()=>{(0,s.dispatch)("divi/app-ui").setAppFrameZoom({value:50,setter:"user"}),(0,s.dispatch)("divi/right-click-options").unset()}},{name:"zoom-to-25",enable:t>=25,label:(0,Ce.__)("Zoom to 25%","et_builder"),onClick:()=>{(0,s.dispatch)("divi/app-ui").setAppFrameZoom({value:25,setter:"user"}),(0,s.dispatch)("divi/right-click-options").unset()}}]},ot=(0,a.debounce)((({appFrameZoom:e,defaultAppFrameZoom:t,editedValue:n,setAppFrameZoom:r,setEditedValue:i})=>{const o=Math.round(parseFloat(n));if(n){const n=1,a=o>t||o<n?e:Number.isNaN(o)?t:o;r({value:a,setter:"user"}),i(`${a}%`)}else e&&r({value:t,setter:"visualBuilder"}),i("")}),800),at=()=>{const{appFrameZoom:e,defaultAppFrameZoom:t}=(0,s.useSelect)((e=>{const t=e("divi/app-ui").getView();return{appFrameZoom:e("divi/app-ui").getAppFrameZoom({format:"percentage"}),defaultAppFrameZoom:e("divi/app-ui").getAppFrameMaximumPossibleZoom({format:"percentage",view:t,roundingUpPercentage:!1})}})),{setAppFrameZoom:n}=(0,s.useDispatch)("divi/app-ui"),r=e&&t!==e,[a,d]=(0,i.useState)(!1),[u,c]=(0,i.useState)("");(0,i.useEffect)((()=>{(0,nt.addFilter)("divi.rightClickOptions.optionsMap","divi",(e=>(e.pageBarResponsiveSelectZoom=it,e)))}),[]);const l=a?u:t===e?"":`${e}%`;return o().createElement(Qe,{defaultValue:`${t}%`,enable:!0,hasReset:r,onFocus:n=>{d(!0);!u&&t===e||u===`${e}%`||c(`${e}%`),(e=>{const t=(0,s.select)("divi/app-ui").getElementProperty({elementName:"adminBar",propertyGroup:"dimension",propertyName:"height"}),n=(0,s.select)("divi/app-ui").getElementProperty({elementName:"pageBar",propertyGroup:"dimension",propertyName:"height"}),r=e.target?.getBoundingClientRect()?.left;(0,s.dispatch)("divi/right-click-options").set({cursorPosition:{x:r,y:t+n+5},optionType:"pageBarResponsiveSelectZoom",owner:{optionType:"pageBarResponsiveSelectZoom"},windowLocation:"top"})})(n)},onBlur:()=>{d(!1)},onChange:r=>{c(r.inputValue),ot({appFrameZoom:e,defaultAppFrameZoom:t,editedValue:r.inputValue,setAppFrameZoom:n,setEditedValue:c})},onResetClick:()=>{c("");const e=(0,s.select)("divi/app-ui").getView(),t=(0,s.select)("divi/app-ui").getAppFrameMaximumPossibleZoom({format:"percentage",view:e,roundingUpPercentage:!1});n({value:t,setter:"visualBuilder"})},name:"zoom",value:l})},st=({currentResponsiveView:e,onResponsiveDesktop:t,onResponsiveTablet:n,onResponsivePhone:r})=>o().createElement("div",{className:"et-vb-page-bar-responsive-controls"},o().createElement("div",{className:"et-vb-page-bar-responsive-buttons-wrapper"},o().createElement(Je,{name:"desktop",active:"desktop"===e,iconSvg:{name:"divi/desktop-enhancement"},label:(0,Ce.__)("Desktop","et_builder"),onClick:t}),o().createElement(Je,{name:"tablet",active:"tablet"===e,iconSvg:{name:"divi/tablet-enhancement"},label:(0,Ce.__)("Tablet","et_builder"),onClick:n}),o().createElement(Je,{name:"phone",active:"phone"===e,iconSvg:{name:"divi/phone-enhancement"},label:(0,Ce.__)("Phone","et_builder"),onClick:r})),window.diviDev?.experiments?.responsiveViews?.pageBarWidth&&o().createElement(tt,null),window.diviDev?.experiments?.responsiveViews?.pageBarZoom&&o().createElement(at,null)),dt=()=>{f()("html").attr("data-et-app-view","desktop"),(0,s.dispatch)("divi/app-ui").setView("desktop");const e=(0,s.select)("divi/app-ui").getAppFrameMaximumPossibleZoom({view:"desktop",format:"percentage",roundingUpPercentage:!1});(0,s.dispatch)("divi/app-ui").setAppFrameZoom({value:e,setter:"visualBuilder"})},ut=()=>{f()("html").attr("data-et-app-view","tablet"),(0,s.dispatch)("divi/app-ui").setView("tablet");const e=(0,s.select)("divi/app-ui").getAppFrameMaximumPossibleZoom({view:"tablet",format:"percentage",roundingUpPercentage:!1});(0,s.dispatch)("divi/app-ui").setAppFrameZoom({value:e,setter:"visualBuilder"})},ct=()=>{f()("html").attr("data-et-app-view","phone"),(0,s.dispatch)("divi/app-ui").setView("phone");const e=(0,s.select)("divi/app-ui").getAppFrameMaximumPossibleZoom({view:"phone",format:"percentage",roundingUpPercentage:!1});(0,s.dispatch)("divi/app-ui").setAppFrameZoom({value:e,setter:"visualBuilder"})},lt=()=>{const{currentResponsiveView:e}=(0,s.useSelect)((e=>({currentResponsiveView:e("divi/app-ui").getView()})));return o().createElement(st,{currentResponsiveView:e,onResponsiveDesktop:dt,onResponsiveTablet:ut,onResponsivePhone:ct})},pt=()=>{const e=(0,s.select)("divi/settings")?.getSetting(["preferences","appAdminBar","visible"]),t=(0,s.select)("divi/settings").getSetting(["conditionalTags","is_tb"]),n=(0,s.select)("divi/app-ui").getElementProperty({elementName:"adminBar",propertyGroup:"dimension",propertyName:"height"});return e&&!t?n:0},ft=()=>{const e=(0,s.select)("divi/settings").getSetting(["layout","type"]),t={section:["root","section","fullwidth-section","specialty-section","unsupported","layout"],row:["root","section","fullwidth-section","specialty-section","row","row-inner","unsupported","layout"],module:["root","section","fullwidth-section","specialty-section","row","row-inner","column","specialty-column","column-inner","module","fullwidth-module","child-module","unsupported","layout"]};if(e in t){t[e].forEach((e=>{["add","delete"].forEach((t=>{(0,s.dispatch)("divi/app-ui").setModulePermission({moduleType:e,permissionType:t,permissionValue:!1})}))}))}};var mt=window.divi.moduleUtils;const ht=()=>{const e=(0,Pe.serializeModuleFlatObjects)((0,s.select)("divi/edit-post").getContent()?.asMutable({deep:!0})),t=(0,s.select)("divi/page-settings").getSettings()?.asMutable({deep:!0}),n=(0,s.select)("divi/history").getSavedState()?.asMutable({deep:!0}),r=e=>(0,mt.maybeUnwrapPlaceholderBlock)(e).replace(/\r\n/g,"\n"),i=!(0,a.isEqual)(r(n?.content??""),r(e)),o=!(0,a.isEqual)(n?.settings,t);return i||o},vt=e=>{const{isCreatingPreview:t,isSyncToServerInProgress:n,postStatus:r,postUrl:a,isThemeBuilder:c,remoteItemId:l,elements:{save:p,preview:f}}=e,[m,h]=(0,i.useState)(n?"active":"idle"),v=(0,i.useRef)(),g=(0,i.useRef)(!1),b=(0,i.useRef)(!1),y="publish"===r,w="idle"===m,I=e=>{b.current||ht()&&e.preventDefault()},_=()=>{c?window.jQuery(window).trigger("et-tb-close-modal"):window.history.length>2?window.history.back():f?u(a):d.topWindow.close()},S=()=>{b.current=!0,l?(()=>{const{id:e}=(0,s.select)("divi/settings").getSetting(["post"]);return(0,De.loggedFetch)({method:"POST",restRoute:"/divi/v1/divi-library/update-item",keepalive:!0,data:{data:{itemPayload:{updateType:"delete_permanently"},clickedItem:{id:e}}}})})().then(_).catch((e=>{console.log("Failed to remove temporary cloud layout.",e)})):_()},E=()=>{We()},R=()=>{l?Le(l):xe()};(0,i.useEffect)((()=>(clearTimeout(v.current),n?h("active"):n||"active"!==m||(h("done"),v.current=setTimeout((()=>h("idle")),1e3)),()=>clearTimeout(v.current))),[n]),(0,i.useEffect)((()=>{g.current&&"done"===m&&S()}),[m]),(0,i.useEffect)((()=>(d.topWindow.addEventListener("beforeunload",I),()=>{d.topWindow.removeEventListener("beforeunload",I)})),[]);const O={active:{label:(0,Ce.__)("Saving","et_builder"),iconName:"divi/loading",iconAnimation:"rotate-center"},done:{label:(0,Ce.__)("Saved","et_builder"),iconName:"divi/check",iconAnimation:null},idle:{label:l?(0,Ce.__)("Save Cloud Item","et_builder"):"publish"!==r?(0,Ce.__)("Publish","et_builder"):(0,Ce.__)("Save","et_builder"),iconName:null,iconAnimation:null}}?.[m],M=O.iconName?o().createElement(Ze.IconSvg,{name:O.iconName,animation:O.iconAnimation,color:"#fff",styles:{margin:"-4px auto"}}):O.label;return o().createElement("div",{className:"et-vb-page-bar-right-side-save-button"},o().createElement("a",{onClick:e=>{e.preventDefault(),g.current=ht(),g.current?(0,s.dispatch)("divi/modal-library").open({name:"divi/unsaved-changes",attributes:{onDiscardAndExit:()=>{S()},onSaveAndExit:()=>{y?R():E()},onCloseModal:()=>{g.current=!1}}}):S()},href:c?"#":a,className:"et-vb-page-bar-save-button et-vb-page-bar-save-button--exit"},(0,Ce.__)("Exit","et_builder")),!c&&f?o().createElement("button",{onClick:()=>{(0,s.dispatch)("divi/serialized-post").syncToServer({syncType:"preview"})},className:$e()({"et-vb-page-bar-save-button":!0,"et-vb-page-bar-save-button--preview":!0,"et-vb-page-bar-save-button--preview-saving":t}),type:"button"},t?(0,Ce.__)("Creating Preview Link...","et_builder"):(0,Ce.__)("Preview","et_builder")):null,y||!w||l?null:o().createElement("button",{onClick:E,className:"et-vb-page-bar-save-button et-vb-page-bar-save-button--draft",type:"button"},(0,Ce.__)("Save Draft","et_builder")),p?o().createElement("button",{onClick:R,className:"et-vb-page-bar-save-button",type:"button",disabled:!w},M):null)},gt=({buttons:e,isCreatingPreview:t,isSyncToServerInProgress:n,isThemeBuilder:r,postStatus:i,postUrl:a,remoteItemId:s,elements:{addToLibrary:d,clear:u,colorMode:c,history:l,pageSaveBarButton:p,portability:f,redo:m,undo:h},hasUndo:v,hasRedo:g})=>o().createElement("div",{className:"et-vb-page-bar-tools"},o().createElement("div",{className:"et-vb-page-bar-tools-action-buttons"},c&&o().createElement(Ke.Toggle,{name:"interface-mode",value:e.appColorMode.active?"on":"off",onChange:e.appColorMode.onClick,className:"et-vb-page-bar-color-mode-toggle"}),h&&o().createElement(Ye,{name:"undo",active:!1,iconSvg:{name:"divi/modal-undo-enhancement"},label:(0,Ce.__)("Undo","et_builder"),onClick:e.undo.onClick,style:{opacity:v?null:.4}}),m&&o().createElement(Ye,{name:"redo",active:!1,iconSvg:{name:"divi/modal-redo-enhancement"},label:(0,Ce.__)("Redo","et_builder"),onClick:e.redo.onClick,style:{opacity:g?null:.4}}),l&&o().createElement(Ye,{name:"history",active:e.history.active,iconSvg:{name:"divi/clock-enhancement"},label:(0,Ce.__)("History","et_builder"),onClick:e.history.onClick}),f&&o().createElement(Ye,{name:"portability",active:e.portability.active,iconSvg:{name:"divi/portability-enhancement"},label:(0,Ce.__)("Export & Import","et_builder"),onClick:e.portability.onClick}),u&&o().createElement(Ye,{name:"clear-layout",active:e.clearLayout.active,iconSvg:{name:"divi/delete"},label:(0,Ce.__)("Clear Layout","et_builder"),onClick:e.clearLayout.onClick}),d&&o().createElement(Ye,{name:"add-to-library",active:e.addToLibrary.active,iconSvg:{name:"divi/save-enhancement"},label:(0,Ce.__)("Add to Library","et_builder"),onClick:e.addToLibrary.onClick})),o().createElement(vt,{isSyncToServerInProgress:n,isCreatingPreview:t,postStatus:i,postUrl:a,remoteItemId:s,elements:p,isThemeBuilder:r})),bt=({remoteItemId:e,elements:t})=>{const{addToLibraryModalDimension:n,addToLibraryModalOffset:r,addToLibraryModalOwner:i,appColorMode:d,clearLayoutModalDimension:u,clearLayoutModalOffset:c,hasUndo:l,hasRedo:p,historyModalDimension:f,historyModalOffset:m,isAddToLibraryModalOpen:h,isClearLayoutModalOpen:v,isCreatingPreview:g,isHistoryModalOpen:b,isPortabilityModalOpen:y,isSyncToServerInProgress:w,portabilityModalDimension:I,portabilityModalOffset:_,postStatus:S,postUrl:E,isThemeBuilder:R}=(0,s.useSelect)((e=>({addToLibraryModalDimension:e("divi/modal-library")?.getModal("divi/add-to-library")?.dimension,addToLibraryModalOwner:e("divi/modal-library")?.getModal("divi/add-to-library")?.owner,addToLibraryModalOffset:e("divi/modal-library")?.getModal("divi/add-to-library")?.offset,appColorMode:e("divi/app-preferences").get(["app","colorMode"]),clearLayoutModalDimension:e("divi/modal-library")?.getModal("divi/clear-layout")?.dimension,clearLayoutModalOffset:e("divi/modal-library")?.getModal("divi/clear-layout")?.offset,hasUndo:e("divi/history").hasUndo(),hasRedo:e("divi/history").hasRedo(),historyModalDimension:e("divi/modal-library")?.getModal("divi/history")?.dimension,historyModalOffset:e("divi/modal-library")?.getModal("divi/history")?.offset,isAddToLibraryModalOpen:e("divi/modal-library")?.getModal("divi/add-to-library")?.isActive,isClearLayoutModalOpen:e("divi/modal-library")?.getModal("divi/clear-layout")?.isActive,isCreatingPreview:e("divi/rest").isInProgress("sync-to-server--preview"),isHistoryModalOpen:e("divi/modal-library")?.getModal("divi/history")?.isActive,isPortabilityModalOpen:e("divi/modal-library")?.getModal("divi/portability")?.isActive,isSyncToServerInProgress:e("divi/rest").isInProgress("sync-to-server--draft")||e("divi/rest").isInProgress("sync-to-server--publish"),portabilityModalDimension:e("divi/modal-library")?.getModal("divi/portability")?.dimension,portabilityModalOffset:e("divi/modal-library")?.getModal("divi/portability")?.offset,postStatus:e("divi/settings").getSetting(["post","status"]),postUrl:e("divi/settings").getSetting(["post","url"]),isThemeBuilder:e("divi/settings").getSetting(["conditionalTags","is_tb"])}))),{undo:O,redo:M}=(0,s.useDispatch)("divi/history");return o().createElement(gt,{buttons:{addToLibrary:{onClick:e=>{const t=e.nativeEvent.target;Fe({isModalActive:h,modalName:"divi/add-to-library",modalOffset:r,modalWidth:n?.width??280,buttonOffset:{top:t.getBoundingClientRect().top,left:t.getBoundingClientRect().left},owner:""})},active:h&&(0,a.isEmpty)(i)},clearLayout:{onClick:e=>{const t=e.nativeEvent.target;Fe({isModalActive:v,modalName:"divi/clear-layout",modalOffset:c,modalWidth:u?.width??280,buttonOffset:{top:t.getBoundingClientRect().top,left:t.getBoundingClientRect().left}})},active:v},history:{onClick:e=>{const t=e.nativeEvent.target;Fe({isModalActive:b,modalName:"divi/history",modalOffset:m,modalWidth:f?.width??280,buttonOffset:{top:t.getBoundingClientRect().top,left:t.getBoundingClientRect().left}})},active:b},portability:{onClick:e=>{e.preventDefault(),e.stopPropagation();const t=e.nativeEvent.target;Fe({isModalActive:y,modalName:"divi/portability",modalOffset:_,modalWidth:I?.width??280,buttonOffset:{top:t.getBoundingClientRect().top,left:t.getBoundingClientRect().left}})},active:y},appColorMode:{onClick:e=>{const t="on"===e.inputValue?"light":"dark";(0,s.dispatch)("divi/app-preferences").set(["app","colorMode"],t)},active:"light"===d},redo:{onClick:e=>{e.preventDefault(),p&&M()}},undo:{onClick:e=>{e.preventDefault(),l&&O()}}},elements:t,hasUndo:l,hasRedo:p,remoteItemId:e,isCreatingPreview:g,isSyncToServerInProgress:w,postUrl:E,postStatus:"publish"===S?"publish":"draft",isThemeBuilder:R})},yt=e=>{const{adminBarHeight:t,brandedModalHeaderHeight:n,buttons:r,remoteItemId:i,elements:{addToLibrary:a,clear:s,colorMode:d,history:u,pageSaveBarButton:c,pageSettings:l,portability:p,redo:f,responsiveButtons:m,undo:h}}=e;return o().createElement("div",{className:"et-vb-page-bar",style:{top:t+n}},o().createElement("div",{className:"et-vb-page-bar-settings"},l?o().createElement(Ye,{name:"page-settings",active:r.pageSettings.active,iconSvg:{name:"divi/settings-enhancement"},label:(0,Ce.__)("Page Settings","et_builder"),onClick:r.pageSettings.onClick}):null,o().createElement(Ve,null)),m&&o().createElement(lt,null),o().createElement(bt,{remoteItemId:i,elements:{addToLibrary:a,clear:s,colorMode:d,history:u,pageSaveBarButton:c,portability:p,redo:f,undo:h}}))},wt=()=>{const{adminBarHeight:e,brandedModalHeaderHeight:t,postStatus:n,isPageSettingsModalOpen:r,isEditingLibraryLayout:i,remoteItemId:d}=(0,s.useSelect)((e=>({isEditingLibraryLayout:e("divi/settings").isEditingLibraryLayout(),remoteItemId:e("divi/settings").getSetting(["layout","remoteItemId"]),adminBarHeight:e("divi/app-ui").getElementProperty({elementName:"adminBar",propertyGroup:"dimension",propertyName:"height"}),brandedModalHeaderHeight:e("divi/app-ui").getElementProperty({elementName:"brandedModalHeader",propertyGroup:"dimension",propertyName:"height"}),postStatus:e("divi/settings").getSetting(["post","status"]),isPageSettingsModalOpen:e("divi/modal-library")?.getModal("divi/page-settings")?.isActive})));(0,a.includes)(["publish","draft"],n)||console.warn(`Invalid post status: ${n}. Visual Builder only expects post status to be either 'draft' or 'publish'`);const u={addToLibrary:!d,clear:!i,colorMode:!0,history:!0,pageSaveBarButton:{save:!0,preview:!i},pageSettings:!d,portability:!i,redo:!0,responsiveButtons:!0,undo:!0};return o().createElement(yt,{adminBarHeight:e,brandedModalHeaderHeight:t,buttons:{pageSettings:{onClick:()=>{He({isActive:r})},active:r}},elements:u,remoteItemId:d})},It=({name:e,active:t,iconSvg:n,label:r,onClick:a})=>{const[s,d]=(0,i.useState)(!1);return o().createElement("button",{className:$e()({"et-vb-builder-bar-button":!0,[`et-vb-builder-bar-button--${e}`]:!0,"et-vb-builder-bar-button--active":t,"et-vb-builder-bar-button--hover":s}),onClick:a,type:"button","data-tooltip-id":`et-vb-builder-bar-tooltip-${e}`,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1)},o().createElement(Ze.IconSvg,{name:n?.name,color:"transparent",iconComponentProps:{color:"add-layout"===e?t?"#326BFF":"#ffffff":t?"#326BFF":s?"#273039":"#A2B0C1"}}),o().createElement(qe.TooltipContainer,{id:`et-vb-builder-bar-tooltip-${e}`,windowLocation:"top",position:"center-right"},r))},_t=({adminBarHeight:e,brandedModalHeaderHeight:t,canAddLayout:n,isActionOnHoverActive:r,isBuilderSettingsModalOpen:i,isHelpModalOpen:a,isLayersModalOpen:s,isLoadLayoutOpen:d,isParentActionOnHoverActive:u,isWireframeView:c,isXRayActive:l,onClickActionOnHover:p,onClickBuilderSettings:f,onClickHelp:m,onClickLayers:h,onClickLoadLayout:v,onClickParentActionOnHover:g,onClickWireframeView:b,onClickXRay:y,pageBarHeight:w})=>o().createElement("div",{className:"et-vb-builder-bar-wrap",style:{top:e+t+w}},n&&o().createElement(It,{active:d,iconSvg:{name:"divi/add"},label:(0,Ce.__)("Add Layout","et_builder"),name:"add-layout",onClick:v}),o().createElement(It,{active:s,iconSvg:{name:"divi/layers-enhancement"},label:(0,Ce.__)("Layers","et_builder"),name:"layers",onClick:h}),o().createElement(It,{active:c,iconSvg:{name:"divi/wireframe-enhancement"},label:(0,Ce.__)("Wireframe View","et_builder"),name:"wireframe-view",onClick:b}),o().createElement("div",{className:"et-vb-builder-bar-separator"}),o().createElement(It,{active:r,iconSvg:{name:"divi/hover-actions-enhancement"},label:(0,Ce.__)("Action Icons On Hover","et_builder"),name:"interaction-action-on-hover",onClick:p}),o().createElement(It,{active:u,iconSvg:{name:"divi/parent-hover-actions-enhancement"},label:(0,Ce.__)("Parent Action Icons On Hover ","et_builder"),name:"interaction-parent-action-on-hover",onClick:g}),o().createElement(It,{active:l,iconSvg:{name:"divi/xray-enhancement"},label:(0,Ce.__)("X-Ray","et_builder"),name:"interaction-x-ray",onClick:y}),o().createElement("div",{className:"et-vb-builder-bar-separator"}),o().createElement(It,{active:i,iconSvg:{name:"divi/tools-enhancement"},label:(0,Ce.__)("Builder Settings","et_builder"),name:"builder-settings",onClick:f}),o().createElement(It,{active:a,iconSvg:{name:"divi/question-enhancement"},label:(0,Ce.__)("Help","et_builder"),name:"help",onClick:m})),St=()=>{const{adminBarHeight:e,brandedModalHeaderHeight:t,builderBarWidth:n,isActionOnHoverActive:r,isBuilderSettingsModalOpen:a,isEditingLibraryLayout:d,isHelpModalOpen:u,isLoadLayoutOpen:c,isParentActionOnHoverActive:l,isWireframeView:p,isXRayActive:f,layoutType:m,pageBarHeight:h,sidebarLeftWidth:v,sidebarRightWidth:g,topWindowHeight:b,topWindowWidth:y}=(0,s.useSelect)((e=>({isBuilderSettingsModalOpen:e("divi/modal-library").getModal("divi/builder-settings")?.isActive,isHelpModalOpen:e("divi/modal-library").getModal("divi/help")?.isActive,isLoadLayoutOpen:e("divi/modal-library").getModal("divi/load-layout")?.isActive,isWireframeView:"wireframe"===e("divi/app-ui").getView(),isActionOnHoverActive:e("divi/app-ui").isInteractionLayerActive("actionOnHover"),isParentActionOnHoverActive:e("divi/app-ui").isInteractionLayerActive("parentActionOnHover"),isXRayActive:e("divi/app-ui").isInteractionLayerActive("xRay"),isEditingLibraryLayout:e("divi/settings").isEditingLibraryLayout(),layoutType:e("divi/settings").getSetting(["layout","type"]),adminBarHeight:e("divi/app-ui").getElementProperty({elementName:"adminBar",propertyGroup:"dimension",propertyName:"height"}),brandedModalHeaderHeight:e("divi/app-ui").getElementProperty({elementName:"brandedModalHeader",propertyGroup:"dimension",propertyName:"height"}),pageBarHeight:e("divi/app-ui").getElementProperty({elementName:"pageBar",propertyGroup:"dimension",propertyName:"height"}),topWindowWidth:e("divi/app-ui").getWindow("width","top"),topWindowHeight:e("divi/app-ui").getWindow("height","top"),builderBarWidth:e("divi/app-ui").getElementProperty({elementName:"builderBar",propertyGroup:"dimension",propertyName:"width"}),sidebarLeftWidth:e("divi/app-ui").getElementProperty({elementName:"sidebarLeft",propertyGroup:"dimension",propertyName:"width"}),sidebarRightWidth:e("divi/app-ui").getElementProperty({elementName:"sidebarRight",propertyGroup:"dimension",propertyName:"width"})}))),w=(0,s.useSelect)((e=>e("divi/app-preferences").get(["app","isLayersView"])));(0,i.useEffect)((()=>{w&&(0,s.dispatch)("divi/modal-library").open({name:"divi/layers"})}),[]);const{setInteractionLayer:I}=(0,s.useDispatch)("divi/app-ui"),_=(0,s.useSelect)((e=>e("divi/modal-library").getModal("divi/layers")?.isActive)),S=!d||"layout"===m,E=(e,t,n)=>{(0,s.dispatch)("divi/app-preferences").set(["app","interactionLayers"],{actionOnHover:e,parentActionOnHover:t,xRay:n})};return o().createElement(_t,{adminBarHeight:e,brandedModalHeaderHeight:t,canAddLayout:S,isActionOnHoverActive:r,isBuilderSettingsModalOpen:a,isHelpModalOpen:u,isLayersModalOpen:_,isLoadLayoutOpen:c,isParentActionOnHoverActive:l,isWireframeView:p,isXRayActive:f,onClickActionOnHover:()=>{I({name:"actionOnHover",active:!r}),E(!r,l,f)},onClickBuilderSettings:()=>{a?(0,s.dispatch)("divi/modal-library").close({name:"divi/builder-settings"}):(0,s.dispatch)("divi/modal-library").open({name:"divi/builder-settings"})},onClickHelp:()=>{Be({isActive:u})},onClickLayers:()=>{_?((0,s.dispatch)("divi/modal-library").close({name:"divi/layers"}),(0,s.dispatch)("divi/app-preferences").set(["app","isLayersView"],!1)):((0,s.dispatch)("divi/modal-library").open({name:"divi/layers"}),(0,s.dispatch)("divi/app-preferences").set(["app","isLayersView"],!0))},onClickLoadLayout:()=>{if(c)(0,s.dispatch)("divi/modal-library").close({name:"divi/load-layout"});else{const t=32;(0,s.dispatch)("divi/modal-library").close({name:"divi/add-module"}),(0,s.dispatch)("divi/modal-library").open({name:"divi/load-layout",dimension:{width:y-(n+v+g+2*t),height:b-(e+h+2*t)},offset:{top:e+h+t,left:n+v+t}})}},onClickParentActionOnHover:()=>{I({name:"parentActionOnHover",active:!l}),E(r,!l,f)},onClickWireframeView:()=>{Ue({isActive:p})},onClickXRay:()=>{I({name:"xRay",active:!f}),E(r,l,!f)},pageBarHeight:h})};let Et=-1;const Rt=({dimension:e,position:t,setElementProperty:n})=>{const[r,a]=(0,i.useState)(!1),s="left"===t?"sidebarLeft":"sidebarRight",u=r=>{const i="left"===t?r?.screenX-Et:Et-r?.screenX;n({elementName:s,propertyGroup:"dimension",propertyName:"width",value:e?.width+i})},c=()=>{Et=-1,a(!1),d.topWindow.removeEventListener("mousemove",u),d.topWindow.removeEventListener("mouseup",c)};return o().createElement(o().Fragment,null,o().createElement("div",{className:$e()({"et-vb-sidebar-resize-handle":!0,[`et-vb-sidebar-resize-handle--${t}`]:!0,"et-vb-sidebar-resize-handle--resizing":r}),onMouseDown:e=>{a(!0),Et=e?.screenX,d.topWindow.addEventListener("mousemove",u),d.topWindow.addEventListener("mouseup",c)},role:"button",tabIndex:0},o().createElement("span",{className:"et-vb-sidebar-resize-handle-label"},(0,Ce.__)("Drag to resize","et_builder"))),r?o().createElement("div",{className:"et-vb-sidebar-resize-handle-mousetrap"}):null)},Ot=({position:e})=>{const{setElementProperty:t}=(0,s.useDispatch)("divi/app-ui"),{dimension:n,dimensionMinimum:r,sidebarMaximumWidth:i}=(0,s.useSelect)((t=>{const n=t("divi/app-ui").getSidebarProps(e);return{...n,dimensionMinimum:t("divi/modal-library").getMaximumModalDimensionMinimum(n.activeModals),sidebarMaximumWidth:t("divi/app-ui").getSidebarMaximumWidth(e)}}));return o().createElement(Rt,{dimension:n,position:e,setElementProperty:e=>{const{width:n,height:o}=r,a=n??0,s=o??0;if("dimension"===e.propertyGroup){if("width"===e.propertyName){if(a>=e.value)return void t({...e,value:a});if(i<=e.value)return void t({...e,value:i})}if("height"===e.propertyName&&s>=e.value)return void t({...e,value:s})}t(e)}})};var Mt=window.divi.errorBoundary,At=window.divi.draggable;const kt=({active:e,isDragging:t,label:n,modalName:r,navContextMenuCallback:i,onElementClick:a,onElementDrag:s,onElementRelease:d,placeholderStyle:u,sidebarRowId:c,style:l})=>{const p=t&&o().createElement("button",{className:"et-vb-sidebar-row-nav et-vb-sidebar-row-nav-drag-placeholder",style:u,type:"button"},n);return o().createElement(o().Fragment,null,o().createElement(At.Draggable,{key:`sidebar-row-nav-${r}`,isTopWindow:!0,className:$e()({"et-vb-sidebar-row-nav":!0,"et-vb-sidebar-row-nav--active":e,"et-vb-sidebar-row-nav--dragging":t}),type:"button",style:l,onContextMenu:e=>{e.preventDefault(),e.stopPropagation(),i({sidebarRowId:c,modalName:r,cursorPosition:{x:e.clientX,y:e.clientY},trigger:"navItem"})},onElementClick:a,onElementDrag:s,onElementRelease:d},n),p)};var Tt,Nt=new Uint8Array(16);function Ct(){if(!Tt&&!(Tt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Tt(Nt)}var Dt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Pt=function(e){return"string"==typeof e&&Dt.test(e)},Lt=[],xt=0;xt<256;++xt)Lt.push((xt+256).toString(16).substr(1));var Wt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Lt[e[t+0]]+Lt[e[t+1]]+Lt[e[t+2]]+Lt[e[t+3]]+"-"+Lt[e[t+4]]+Lt[e[t+5]]+"-"+Lt[e[t+6]]+Lt[e[t+7]]+"-"+Lt[e[t+8]]+Lt[e[t+9]]+"-"+Lt[e[t+10]]+Lt[e[t+11]]+Lt[e[t+12]]+Lt[e[t+13]]+Lt[e[t+14]]+Lt[e[t+15]]).toLowerCase();if(!Pt(n))throw TypeError("Stringified UUID is invalid");return n};var Bt=function(e,t,n){var r=(e=e||{}).random||(e.rng||Ct)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return Wt(r)};let jt={screenX:0,screenY:0},Ft=[],Ht=!1,Ut=!1,zt=!1,Vt=!1,Gt="multiInstanceModal",$t=!1;const Zt=({active:e,sidebarRowId:t,modalName:n,navContextMenuCallback:r,setActiveModal:d})=>{const[u,c]=(0,i.useState)(!1),[l,p]=(0,i.useState)({}),[f,m]=(0,i.useState)({}),h=(0,s.select)("divi/modal-library").getModalLabelsByNames([n])?.[n];return o().createElement(kt,{active:e,isDragging:u,label:h,modalName:n,navContextMenuCallback:r,onElementClick:({event:e})=>{jt={screenX:e.screenX,screenY:e.screenY},Ut=(0,s.select)("divi/app-ui").isSidebarModal(n);const t=(0,s.select)("divi/modal-library").getModal(n),r=t?.dimension?.width??400;Gt=t?.type??"multiInstanceModal",$t=t?.snappable,Ft=(0,s.select)("divi/app-ui").getDockingAreas({type:Gt,width:r}),$t&&Ut&&(Vt=(0,s.select)("divi/app-ui").getSidebarModalInfo(n).sidebarRowId,Ht={id:"string"==typeof Vt?Vt:"",type:"sidebar-modal"})},onElementDrag:({sinceMouseDown:e,domRect:t})=>{const r={left:e.x+t.left,top:e.y+t.top};if(u||(c(!0),m({content:"",position:"relative",width:t.width,height:t.height,opacity:0}),(0,s.dispatch)("divi/modal-library").setDraggingState({name:n,status:!0})),p({...l,position:"fixed",top:r.top,left:r.left}),$t){const e=(0,s.select)("divi/app-ui").getHoveredDockingArea(r,Ft);if(Ut){Ht=!!e&&{id:e?.id,type:e?.type};"object"==typeof e&&Vt===e.id?zt&&(zt=!1):zt||(zt=!0)}else{const t=!!e&&{id:e?.id,type:e?.type};t!==Ht&&(Ht=t,(0,s.dispatch)("divi/app-ui").setHoveredSidebarDockingArea({sidebarDockingArea:t}))}}},onElementRelease:({event:e,sinceMouseDown:r,domRect:i})=>{const o={screenX:e.screenX,screenY:e.screenY};if((0,a.isEqual)(jt,o))d({sidebarRowId:t,activeModal:n});else{if(p({}),c(!1),m({}),$t)if(Ut)zt&&!Ht&&((0,s.dispatch)("divi/app-ui").undockModalFromSidebarRow({modalName:n,sidebarRowId:(0,s.select)("divi/app-ui").getSidebarModalInfo(n)?.sidebarRowId}),(0,s.dispatch)("divi/modal-library").setOffset({name:n,offset:{left:r.x+i.left,top:r.y+i.top}}));else{const e={"sidebar-row":"above","sidebar-modal":"inside","sidebar-row-last":"below"};if("object"==typeof Ht)switch(Ht.type){case"sidebar-row":case"sidebar-modal":case"sidebar-row-last":(0,s.dispatch)("divi/app-ui").dockModalToSidebarRow({modalName:n,modalType:Gt,newSidebarRowId:Bt(),sidebarRowId:Ht.id,position:(0,a.includes)(["above","inside","below"],e[Ht.type])?e[Ht.type]:"above"});break;case"sidebar":(0,s.dispatch)("divi/app-ui").dockModalToSidebar({modalName:n,modalType:Gt,newSidebarRowId:Bt(),sidebarName:(0,a.includes)(["sidebarLeft","sidebarRight"],Ht.id)?Ht?.id:"sidebarLeft"})}}Ht=!1,Vt=!1,(0,s.dispatch)("divi/app-ui").setHoveredSidebarDockingArea({sidebarDockingArea:!1})}(0,s.dispatch)("divi/modal-library").setDraggingState({name:n,status:!1}),jt={screenX:0,screenY:0}},placeholderStyle:f,sidebarRowId:t,style:l})};let qt=-1,Yt=0,Jt=0;const Xt=({height:e,heightMaxLimit:t,heightMinLimit:n,resizing:r,setHeight:a,setResizeStatus:s,sidebarRowId:u,updateLimits:c})=>{(0,i.useEffect)((()=>{Yt=t,Jt=n}),[t,n]);const l=t=>{const n=e+(t?.screenY-qt);n<Yt&&n>Jt&&a({sidebarRowId:u,height:n})},p=()=>{qt=-1,s({sidebarRowId:u,status:!1}),d.topWindow.removeEventListener("mousemove",l),d.topWindow.removeEventListener("mouseup",p)};return o().createElement(o().Fragment,null,o().createElement("div",{className:"et-vb-sidebar-row-resize-handle",onMouseDown:e=>{c(u),s({sidebarRowId:u,status:!0}),qt=e?.screenY,d.topWindow.addEventListener("mousemove",l),d.topWindow.addEventListener("mouseup",p)},role:"button",tabIndex:0},o().createElement("span",{className:"et-vb-sidebar-row-resize-handle-label"},(0,Ce.__)("Drag to resize","et_builder"))),r?o().createElement("div",{className:"et-vb-sidebar-row-resize-handle-mousetrap"}):null)},Kt=({height:e,resizing:t,sidebarRowId:n})=>{const{setSidebarRowHeight:r,updateSidebarRowLimits:i,setSidebarRowResizingStatus:a}=(0,s.useDispatch)("divi/app-ui"),{max:d,min:u}=(0,s.useSelect)((e=>{const t=e("divi/app-ui").getSidebarRowDimensionLimits(n,"height");return{max:t.max,min:t.min}}));return o().createElement(Xt,{height:e,heightMaxLimit:d,heightMinLimit:u,resizing:t,setHeight:r,setResizeStatus:a,sidebarRowId:n,updateLimits:i})},Qt=({activeDockingArea:e,activeModal:t,component:n,componentProps:r,height:s,id:d,index:u,isDraggedToUndock:c,modalIds:l,modalLabels:p,multiModal:f=!0,navContextMenuCallback:m=a.noop,resizing:h,setActiveModal:v})=>{const g=f?40:0,b="sidebar-modal"===e&&o().createElement(o().Fragment,null,o().createElement("span",{className:"et-vb-sidebar-row-docking-area-highlight--modal et-vb-sidebar-row-docking-area-highlight--modal--top"}),o().createElement("span",{className:"et-vb-sidebar-row-docking-area-highlight--modal et-vb-sidebar-row-docking-area-highlight--modal--right"}),o().createElement("span",{className:"et-vb-sidebar-row-docking-area-highlight--modal et-vb-sidebar-row-docking-area-highlight--modal--bottom"}),o().createElement("span",{className:"et-vb-sidebar-row-docking-area-highlight--modal et-vb-sidebar-row-docking-area-highlight--modal--left"})),y="sidebar-row"===e&&o().createElement("span",{className:"et-vb-sidebar-row-docking-area-highlight--row"}),w="sidebar-row-last"===e&&o().createElement("span",{className:"et-vb-sidebar-row-docking-area-highlight--row-last"});return o().createElement(o().Fragment,null,o().createElement(Mt.ErrorBoundary,{key:"sidebar-row-id",componentName:"sidebar-row-modal"},o().createElement("div",{className:$e()({"et-vb-sidebar-row":!0,"et-vb-sidebar-row--resizing":h,"et-vb-sidebar-row--multi-modal":f,"et-vb-sidebar-row--single-modal":!f,"et-vb-sidebar-row--dragged-to-undock":c,"et-vb-sidebar-row--first":0===u,"et-vb-sidebar-row-docking-area--row":"sidebar-row"===e,"et-vb-sidebar-row-docking-area--row-last":"sidebar-row-last"===e,"et-vb-sidebar-row-docking-area--modal":"sidebar-modal"===e}),style:{height:s}},b,y,w,f&&o().createElement("div",{className:"et-vb-sidebar-row-navs",onContextMenu:e=>{e.preventDefault(),e.stopPropagation(),m({sidebarRowId:d,modalName:t,cursorPosition:{x:e.clientX,y:e.clientY},trigger:"navWrapper"})}},l?.map((e=>o().createElement(Zt,{key:`sidebar-row-nav-${e}`,active:t===e,label:p?.[e],modalName:e,navContextMenuCallback:m,setActiveModal:v,sidebarRowId:d})))),o().createElement("div",{className:"et-vb-sidebar-row-content",style:{height:s-g}},(0,a.isFunction)(n)?(0,i.createElement)(n,r):null),o().createElement(Kt,{height:s,sidebarRowId:d,resizing:h}))))},en=e=>{const{id:t,sidebarWidth:n}=e,{sidebarRow:r,sidebarRowHeight:o,hoveredSidebarRowDockingArea:a,modalLabels:d,sidebarModalDraggedToUndock:u,component:c,type:l,tab:p,group:f,owner:m,isActiveModal:h}=(0,s.useSelect)((e=>{const n=e("divi/app-ui"),r=e("divi/modal-library"),o=n.getSidebarRow(t),a=n.getSidebarRowHeight(t),s=n.getHoveredSidebarRowDockingArea(t),d=r.getModalLabelsByNames(o?.modalIds),u=n.getDraggedToUndockSidebarModal(),c=o?.activeModal,l=r.getModalProperty({modalName:c,property:"component"}),p=r.getModalProperty({modalName:c,property:"type"}),f=r.getModalProperty({modalName:c,property:"tab"}),m=r.getModalProperty({modalName:c,property:"group"}),h=r.getModalProperty({modalName:c,property:"owner"}),v=r.isModalActive(c);return(0,i.useMemo)((()=>({sidebarRow:o,sidebarRowHeight:a,hoveredSidebarRowDockingArea:s,modalLabels:d,sidebarModalDraggedToUndock:u,component:l,type:p,tab:f,group:m,owner:h,isActiveModal:v})),[o,a,s,d,u,l,p,f,m,h,v])})),v="object"==typeof u&&t===u?.sidebarRowId,g=r?.activeModal,{setSidebarRowActiveModal:b}=(0,s.useDispatch)("divi/app-ui"),{open:y,openGroup:w}=(0,s.useDispatch)("divi/modal-library");(0,i.useEffect)((()=>{h||(y({name:r?.activeModal}),w({name:r?.activeModal,tabName:"content",groupId:"page",groupIds:["page"]}))}),[r?.activeModal]);const I=h?r?.activeModal:"",_=(0,i.useCallback)((({cursorPosition:e,sidebarRowId:t,modalName:n,trigger:r})=>{(0,s.dispatch)("divi/right-click-options").set({cursorPosition:e,optionType:"sidebarRowNav",owner:{optionType:"sidebarRowNav",id:t,modalName:n,trigger:r},windowLocation:"top"})}),[s.dispatch]),S={...e,height:o,resizing:r?.resizing,activeModal:I,activeDockingArea:a,isDraggedToUndock:v,modalIds:r?.modalIds,modalLabels:d,multiModal:r?.multiModal,setActiveModal:b,navContextMenuCallback:_,component:c,componentProps:{tab:p,group:f,name:g,type:l,owner:m,dimension:{width:n}}};return(0,i.createElement)(Qt,S)},tn=({position:e,dimension:t,offset:n,rowIds:r})=>o().createElement(o().Fragment,null,o().createElement("div",{className:`et-vb-sidebar et-vb-sidebar--${e}`,style:{...t,...n}},o().createElement(Ot,{position:e}),o().createElement("div",{className:"et-vb-sidebar-row-wrapper"},r.map(((e,n)=>o().createElement(en,{key:`sidebar-row-${e}`,id:e,index:n,sidebarWidth:t.width})))))),nn=({position:e})=>{const t="left"===e?"sidebarLeft":"sidebarRight",{setSidebarMinimumWidth:n}=(0,s.useDispatch)("divi/app-ui"),{dimension:r,dimensionMinimum:o,offset:a,rowIds:d}=(0,s.useSelect)((t=>{const n=t("divi/app-ui").getSidebarProps(e);return{...n,dimensionMinimum:t("divi/modal-library").getMaximumModalDimensionMinimum(n.activeModals)}}));(0,i.useEffect)((()=>{n({sidebarName:t,minimumWidth:o?.width??0})}),[o.width]);const u={dimension:{width:Math.max(o?.width??0,r?.width),height:Math.max(o?.height??0,r?.height)},rowIds:d,offset:a,position:e};return(0,i.createElement)(tn,u)},rn=({adminBarHeight:e,builderBarWidth:t,pageBarHeight:n,dockingArea:r})=>{if(!r)return null;return o().createElement("div",{className:"et-vb-sidebar-docking-indicator",style:{top:e+n+3,bottom:3,left:"sidebarLeft"===r?t+3:null,right:"sidebarRight"===r?3:null}})},on=({appFrameMarginLeft:e,appFrameMarginTop:t,appFrameWidth:n,getWindow:r,isAppWindowWidthModified:i,isAppFrameCoversAppArea:a,isDragged:d,position:u,resetWindow:c,setWindow:l,topWindowWidth:p,view:f,zoomScale:m})=>{const h=["tablet","phone"];if(!h.includes(f)&&!i)return null;if(h.includes(f)&&a)return null;const v="left"===u,g=(n-n*m)/2,b="left"===u?e+g:null,y="right"===u?p-(e+n)-2+g:null;let w;return o().createElement(At.Draggable,{key:`app-frame-responsive-drag-handle--${u}`,isTopWindow:!0,className:$e()({"et-vb-app-frame-responsive-drag-wrapper":!0,"et-vb-app-frame-responsive-drag-wrapper--dragged":d,[`et-vb-app-frame-responsive-drag-wrapper--${u}`]:!0}),onElementClick:()=>{(0,s.dispatch)("divi/app-ui").setAppFrameResizeStatus({status:!0,triggeringElement:"app-frame-draggable-handle",position:u})},onElementDrag:e=>{const t=e?.sinceMouseDown?.x??0;w=n+(v?-1*t*2:2*t),l({attr:"width",value:w,windowLocation:"app",setter:"user"})},onElementRelease:()=>{(0,s.dispatch)("divi/app-ui").setAppFrameResizeStatus({status:!1,triggeringElement:!1,position:!1});const e=r("width","app");"desktop"===f&&e<w&&c({attr:"width",windowLocation:"app",setter:"user"})},style:{top:t,left:b,right:y}},o().createElement("div",{className:$e()({"et-vb-app-frame-responsive-drag-handle":!0,[`et-vb-app-frame-responsive-drag-handle--${u}`]:!0})},o().createElement("span",{className:"et-vb-app-frame-responsive-drag-handle-label"},(0,Ce.__)("Resize window","et_builder"))),o().createElement("span",{className:$e()({"et-vb-app-frame-responsive-drag-width":!0,[`et-vb-app-frame-responsive-drag-width--${u}`]:!0})},o().createElement("span",{className:"et-vb-app-frame-responsive-drag-width-number"},n),o().createElement("span",{className:"et-vb-app-frame-responsive-drag-width-unit"},"px")))},an=({position:e})=>{const{appAreaWidth:t,appFrameMarginLeft:n,appFrameMarginTop:r,appFrameWidth:i,getWindow:a,resizePosition:d,isAppWindowWidthModified:u,topWindowWidth:c,view:l,zoomScale:p}=(0,s.useSelect)((e=>({appAreaWidth:e("divi/app-ui").getElementProperty({elementName:"appArea",propertyGroup:"dimension",propertyName:"width"}),appFrameMarginLeft:e("divi/app-ui").getAppFrameMarginLeft(),appFrameMarginTop:e("divi/app-ui").getAppFrameMarginTop(),appFrameWidth:e("divi/app-ui").getAppFrameWidth(),getWindow:e("divi/app-ui").getWindow,resizePosition:e("divi/app-ui").getResizePosition({triggeringElement:"app-frame-draggable-handle"}),isAppWindowWidthModified:e("divi/app-ui").isUserDefinedWindowProperty({attr:"width",windowLocation:"app"}),topWindowWidth:e("divi/app-ui").getWindow("width","top"),view:e("divi/app-ui").getView(),zoomScale:e("divi/app-ui").getAppFrameZoom({format:"decimal"})}))),{resetWindow:f,setWindow:m}=(0,s.useDispatch)("divi/app-ui"),h=i>=t;return o().createElement(on,{appFrameMarginLeft:parseInt(n),appFrameMarginTop:parseInt(r),appFrameWidth:i,getWindow:a,isAppWindowWidthModified:u,isAppFrameCoversAppArea:h,isDragged:!!d&&d===e,position:e,resetWindow:f,setWindow:m,topWindowWidth:c,view:l,zoomScale:p})},sn=({view:e,styles:t})=>["tablet","phone"].includes(e)?o().createElement("div",{className:"et-vb-app-frame-responsive-maximum-drag-limit",style:t}):null,dn=()=>{const{styles:e,view:t}=(0,s.useSelect)((e=>({view:e("divi/app-ui").getView(),styles:e("divi/app-ui").getAppFrameMaximumDragLimitStyles()})));return o().createElement(sn,{view:t,styles:e})};var un=window.divi.middleware,cn=window.divi.settings;const ln=({order:e,sidebarPosition:t,modal:n,newSidebarRowId:r})=>({type:"ADD_SIDEBAR_ROW",sidebarPosition:t,order:e,modal:(0,s.select)("divi/modal-library").getModal(n)?n:"",newSidebarRowId:r}),pn=({modalName:e,modalType:t,sidebarName:n,newSidebarRowId:r})=>({type:"DOCK_MODAL_TO_SIDEBAR",modalName:e,modalType:t,sidebarName:n,newSidebarRowId:r}),fn=({modalName:e,modalType:t,newSidebarRowId:n,position:r="inside",sidebarRowId:i})=>({type:"DOCK_MODAL_TO_SIDEBAR_ROW",modalName:e,modalType:t,newSidebarRowId:n,position:r,sidebarRowId:i}),mn=e=>({type:"ON_MODULE_INTERACTION_EVENT",event:e}),hn=({sidebarName:e,sidebarRowId:t})=>({type:"REMOVE_SIDEBAR_ROW",sidebarName:e,sidebarRowId:t}),vn=({modalName:e,overwrittenModalName:t})=>({type:"REPLACE_SIDEBAR_MODAL",modalName:e,overwrittenModalName:t}),gn=e=>({type:"RESET_STATE",initialState:e}),bn=e=>({type:"RESET_WINDOW",params:e}),yn=e=>({type:"SET_APP_FRAME_RESIZE_STATUS",params:e}),wn=e=>({type:"SET_APP_FRAME_ZOOM",params:e}),In=e=>({type:"SET_ATTRIBUTE_STATE",attributeState:e}),_n=e=>({type:"SET_DRAGGED_TO_UNPIN_SIDEBAR_MODAL",modalName:e}),Sn=({elementName:e,propertyGroup:t,propertyName:n,value:r})=>({type:"SET_ELEMENT_PROPERTY",elementName:e,propertyGroup:t,propertyName:n,value:r}),En=({elementName:e,visibility:t})=>({type:"SET_ELEMENT_VISIBILITY",elementName:e,visibility:t}),Rn=e=>({type:"SET_GLOBAL_PRELOAD",globalPreload:e}),On=({sidebarDockingArea:e})=>({type:"SET_HOVERED_SIDEBAR_DOCKING_AREA",sidebarDockingArea:e}),Mn=e=>({type:"SET_INTERACTION_LAYER",params:e}),An=e=>({...e,type:"SET_MODULE_PERMISSION"}),kn=e=>({type:"SET_SIDEBAR_MINIMUM_WIDTH",params:e}),Tn=({sidebarRowId:e,activeModal:t})=>({type:"SET_SIDEBAR_ROW_ACTIVE_MODAL",sidebarRowId:e,activeModal:t}),Nn=({sidebarRowId:e,height:t})=>({type:"SET_SIDEBAR_ROW_HEIGHT",sidebarRowId:e,height:t}),Cn=({sidebarRowId:e,status:t})=>({type:"SET_SIDEBAR_ROW_RESIZING_STATUS",sidebarRowId:e,status:t}),Dn=e=>({type:"SET_VIEW",view:e}),Pn=e=>({type:"SET_WINDOW",params:e}),Ln=(e,t=10,n="")=>({type:"SET_WINDOW_AUTO_SCROLL",direction:e,distance:t,location:n}),xn=e=>({type:"TOGGLE_MODULE_INTERACTION",status:e}),Wn=({modalName:e,sidebarRowId:t,intent:n="undocking"})=>({type:"UNDOCK_MODAL_FROM_SIDEBAR_ROW",modalName:e,sidebarRowId:t,intent:n}),Bn=e=>({type:"UPDATE_SIDEBAR_ROW_LIMITS",sidebarRowId:e}),jn=(e,t)=>{const n=e?.modalName;if("DOCK_MODAL_TO_SIDEBAR"===e.type){const t="sidebarLeft"===e.sidebarName?"left":"right";(0,s.dispatch)("divi/modal-library").setSidebarPosition({name:n,sidebarPosition:t})}if("DOCK_MODAL_TO_SIDEBAR_ROW"===e.type){const{sidebarRowId:r}=e;(0,a.includes)(t.getState().getIn(["elements","sidebarLeft","props","rowIds"]),r)?(0,s.dispatch)("divi/modal-library").setSidebarPosition({name:n,sidebarPosition:"left"}):(0,a.includes)(t.getState().getIn(["elements","sidebarRight","props","rowIds"]),r)&&(0,s.dispatch)("divi/modal-library").setSidebarPosition({name:n,sidebarPosition:"right"})}"UNDOCK_MODAL_FROM_SIDEBAR_ROW"===e.type&&"undocking"===e.intent&&(0,s.dispatch)("divi/modal-library").setSidebarPosition({name:n,sidebarPosition:!1})};let Fn,Hn,Un;const zn={DOCK_MODAL_TO_SIDEBAR_ROW:[jn],DOCK_MODAL_TO_SIDEBAR:[jn],SET_WINDOW_AUTO_SCROLL:(e,t)=>{const{direction:n,distance:r,location:i}=e,o="layers"===i?d.topWindow.document.querySelector('.et-vb-modal-panel[data-id="layers"]'):window,a="layers"===i?"scrollTop":null,s="top"===n||"bottom"===n;(n!==Fn||r!==Hn)&&(clearInterval(Un),s&&(Un=setInterval((()=>{const e=a in o?o?.[a]:window.scrollY,i="top"===n?e-r:e+r,s="desktop"===t.getState()?.breakpoint?window:d.topWindow;(o??s).scrollTo({top:i,left:s.pageXOffset,behavior:"smooth"})}),100)),Fn=n,Hn=r)},UNDOCK_MODAL_FROM_SIDEBAR_ROW:[jn]},Vn=e=>"singleInstanceModal"!==e,Gn=(e,t)=>{const n=e.getIn(["elements",t.sidebarName,"props","rowIds"])?.asMutable()??[];if(!n.includes(t.sidebarRowId))return e;const r=n.filter((e=>e!==t.sidebarRowId)),i=e.getIn(["elements",t.sidebarName,"visible"]),o=r?.length>0&&i;return e.setIn(["elements",t.sidebarName,"props","rowIds"],r).setIn(["elements",t.sidebarName,"visible"],o).setIn(["sidebarRows"],e.getIn(["sidebarRows"]).without(t.sidebarRowId))};function $n(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}var Zn=e=>Array.isArray(e)?e:[e];function qn(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>"function"==typeof e))){const n=e.map((e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${n}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Yn(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}Symbol(),Object.getPrototypeOf({});var Jn="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function Xn(e,t={}){let n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:r}=t;let i,o=0;function a(){let t=n;const{length:a}=arguments;for(let e=0,n=a;e<n;e++){const n=arguments[e];if("function"==typeof n||"object"==typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=r}}const s=t;let d;if(1===t.s?d=t.v:(d=e.apply(null,arguments),o++),s.s=1,r){const e=i?.deref?.()??i;null!=e&&r(e,d)&&(d=e,0!==o&&o--);i="object"==typeof d&&null!==d||"function"==typeof d?new Jn(d):d}return s.v=d,d}return a.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},a.resetResultsCount()},a.resultsCount=()=>o,a.resetResultsCount=()=>{o=0},a}function Kn(e,...t){const n="function"==typeof e?{memoize:e,memoizeOptions:t}:e,r=(...e)=>{let t,r=0,i=0,o={},a=e.pop();"object"==typeof a&&(o=a,a=e.pop()),$n(a,`createSelector expects an output function after the inputs, but received: [${typeof a}]`);const s={...n,...o},{memoize:d,memoizeOptions:u=[],argsMemoize:c=Xn,argsMemoizeOptions:l=[],devModeChecks:p={}}=s,f=Zn(u),m=Zn(l),h=qn(e),v=d((function(){return r++,a.apply(null,arguments)}),...f);const g=c((function(){i++;const e=Yn(h,arguments);return t=v.apply(null,e),t}),...m);return Object.assign(g,{resultFunc:a,memoizedResultFunc:v,dependencies:h,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>t,recomputations:()=>r,resetRecomputations:()=>{r=0},memoize:d,argsMemoize:c})};return Object.assign(r,{withTypes:()=>r}),r}var Qn=Kn(Xn),er=Object.assign(((e,t=Qn)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const n=Object.keys(e);return t(n.map((t=>e[t])),((...e)=>e.reduce(((e,t,r)=>(e[n[r]]=t,e)),{})))}),{withTypes:()=>er});const tr=Qn([e=>e.getIn(["elements","appFrame"]),(e,t)=>t],((e,t)=>{const n=e.getIn(["props","zoom","value"],100);return"decimal"===(t.format??"percentage")?n/100:n})),nr={width:0,height:0},rr=Qn([e=>e?.getIn(["elements"]),e=>e?.getIn(["window","width","top","value"]),e=>e?.getIn(["window","height","top","value"])],((e,t,n)=>{const r={visible:e.adminBar.visible,dimension:e.adminBar.visible?{width:t,height:e.adminBar.dimension.height}:nr,offset:{top:e.adminBar.offset.top,left:e.adminBar.offset.left}},i={visible:e.brandedModalHeader.visible,dimension:e.brandedModalHeader.visible?{width:t,height:e.brandedModalHeader.dimension.height}:nr,offset:{top:r.dimension.height,left:e.brandedModalHeader.offset.left}},o={visible:e.pageBar.visible,dimension:e.pageBar.visible?{width:t,height:e.pageBar.dimension.height}:nr,offset:{top:r.dimension.height+i.dimension.height,left:e.pageBar.offset.left}},a=r.dimension.height+i.dimension.height+o.dimension.height,s={visible:e.builderBar.visible,dimension:e.builderBar.visible?{width:e.builderBar.dimension.width,height:n-a}:nr,offset:{top:r.dimension.height+o.dimension.height,left:e.builderBar.offset.left}},d="number"==typeof e.sidebarLeft.props?.minimumWidth?e.sidebarLeft.props?.minimumWidth:0,u={visible:e.sidebarLeft.visible,dimension:e.sidebarLeft.visible?{width:Math.max(d,e.sidebarLeft.dimension.width),height:n-a}:nr,offset:{top:a,left:s.dimension.width}},c="number"==typeof e.sidebarRight.props?.minimumWidth?e.sidebarRight.props?.minimumWidth:0,l={visible:e.sidebarRight.visible,dimension:e.sidebarRight.visible?{width:Math.max(c,e.sidebarRight.dimension.width),height:n-a}:nr,offset:{top:a,right:e.sidebarRight.offset.right}};return{adminBar:r,appArea:{visible:e.appArea.visible,dimension:e.appArea.visible?{width:t-(s.dimension.width+u.dimension.width+l.dimension.width),height:n-a}:nr},appFrame:{visible:e.appFrame.visible,dimension:e.appFrame.visible?{width:t-(s.dimension.width+u.dimension.width+l.dimension.width),height:n-a}:nr,props:e.appFrame.props},brandedModalHeader:i,builderBar:s,pageBar:o,sidebarLeft:u,sidebarRight:l}})),ir=Qn([e=>rr(e),(e,t)=>t],((e,t)=>{const{elementName:n,propertyGroup:r,propertyName:i}=t,o=e?.[n],a=o?.[r],s=a?.[i];return s})),or=Qn([e=>e.getIn(["window"]),(e,t)=>t,(e,t,n)=>n,(e,t,n,r)=>r],((e,t,n,r)=>e.getIn([t,n,"value"],r))),ar=Qn([(e,t)=>e.getIn(["window",t.attr,t.windowLocation,"setter"])],(e=>"user"===e)),sr=Qn([e=>e],(e=>e.getIn(["view"],"desktop"))),dr=(e,t)=>e.getIn(["views",t],{width:"",height:"",label:"",icon:"",breakpoint:"desktop",type:"interface",maximum:{width:1400},minimum:{width:981}}),ur=(e,t)=>{const n=sr(e);return dr(e,n)?.breakpoint===t},cr=Qn([e=>or(e,"width","top"),e=>or(e,"width","app"),e=>ir(e,{elementName:"builderBar",propertyGroup:"dimension",propertyName:"width"}),e=>ir(e,{elementName:"sidebarLeft",propertyGroup:"dimension",propertyName:"width"}),e=>ir(e,{elementName:"sidebarRight",propertyGroup:"dimension",propertyName:"width"}),e=>tr(e,{format:"decimal"}),e=>ar(e,{attr:"width",windowLocation:"app"}),e=>ur(e,"desktop")],((e,t,n,r,i,o,a,s)=>{if(s&&!a&&!(1!==o))return`${n+r}px`;return`${n+r+(0,rt.getAppFrameMarginSides)({builderBarWidth:n,appWindowWidth:t,sidebarLeftWidth:r,sidebarRightWidth:i,topWindowWidth:e,isDesktopBreakpoint:s,isUserDefinedAppWindowWidth:a,zoomScale:o})}px`})),lr=Qn([e=>ir(e,{elementName:"adminBar",propertyGroup:"dimension",propertyName:"height"}),e=>ir(e,{elementName:"pageBar",propertyGroup:"dimension",propertyName:"height"})],((e,t)=>`${e+t}px`)),pr=Qn([e=>ir(e,{elementName:"builderBar",propertyGroup:"dimension",propertyName:"width"}),e=>ir(e,{elementName:"sidebarLeft",propertyGroup:"dimension",propertyName:"width"}),e=>ir(e,{elementName:"sidebarRight",propertyGroup:"dimension",propertyName:"width"}),e=>or(e,"width","top"),e=>{const t=sr(e);return dr(e,t)?.maximum?.width??or(e,"width","app")},e=>tr(e,{format:"decimal"}),e=>ar(e,{attr:"width",windowLocation:"app"}),e=>ur(e,"desktop")],((e,t,n,r,i,o,a,s)=>{const d=i*o;return{width:d,left:e+t+(0,rt.getAppFrameMarginSides)({builderBarWidth:e,appWindowWidth:d,sidebarLeftWidth:t,sidebarRightWidth:n,topWindowWidth:r,isDesktopBreakpoint:s,isUserDefinedAppWindowWidth:a,zoomScale:o})}})),fr=Qn([e=>ir(e,{elementName:"appArea",propertyGroup:"dimension",propertyName:"width"}),e=>ir(e,{elementName:"appFrame",propertyGroup:"dimension",propertyName:"width"}),e=>or(e,"width","app"),(e,t)=>t?.format??"percentage",e=>ar(e,{attr:"width",windowLocation:"app"}),(e,t)=>dr(e,t?.view)?.minimum?.width??0,(e,t)=>t?.roundingUpPercentage??!1],((e,t,n,r,i,o,a)=>{const s=i?n>e?e/n:1:t<o?t/o:1;return"decimal"===r?s:a?Math.floor(100*s):100*s})),mr=Qn([e=>tr(e,{format:"percentage"}),e=>ir(e,{elementName:"appArea",propertyGroup:"dimension",propertyName:"width"})],((e,t)=>t*(100/e))),hr=Qn([e=>{if("user"===e.getIn(["window","width","app","setter"]))return`${or(e,"width","app")}px`;const t=sr(e),n=dr(e,t);return n?.width?n.width:"100vw"},e=>or(e,"width","top"),e=>ar(e,{attr:"width",windowLocation:"app"}),e=>tr(e,{format:"decimal"}),e=>ur(e,"desktop"),e=>ir(e,{elementName:"appArea",propertyGroup:"dimension",propertyName:"width"}),e=>{const t=sr(e),n=dr(e,t)?.minimum?.width;return n}],((e,t,n,r,i,o,a)=>{if("100vw"===e)return i&&!n?o*(1/r):o;const s=(0,rt.parseAppFrameWidthValue)(e,t);return n?s:s>=o?o>=a?o:a:s})),vr=Qn([(e,t)=>{const n=dr(e,t?.view)?.width??"100vw",r=or(e,"width","top"),i=hr(e),o=ir(e,{elementName:"builderBar",propertyGroup:"dimension",propertyName:"width"}),a=ir(e,{elementName:"sidebarLeft",propertyGroup:"dimension",propertyName:"width"}),s=ir(e,{elementName:"sidebarRight",propertyGroup:"dimension",propertyName:"width"}),d=r?i:(({appWindowWidth:e,builderBarWidth:t,sidebarLeftWidth:n,sidebarRightWidth:r})=>"100vw"===e?`calc(${e} - ${t}px - ${n}px - ${r}px)`:e)({appWindowWidth:n,builderBarWidth:o,sidebarLeftWidth:a,sidebarRightWidth:s});return d},(e,t)=>{const n=ir(e,{elementName:"adminBar",propertyGroup:"dimension",propertyName:"height"}),r=ir(e,{elementName:"brandedModalHeader",propertyGroup:"dimension",propertyName:"height"}),i=dr(e,t?.view),o=ir(e,{elementName:"pageBar",propertyGroup:"dimension",propertyName:"height"}),a=tr(e,{format:"decimal"}),s=(({adminBarHeight:e,appWindowHeight:t,brandedModalHeaderHeight:n,pageBarHeight:r,zoomScale:i})=>{const o=1/i;return`calc((${t} * ${o}) - ${(e+n+r)*o}px)`})({adminBarHeight:n,brandedModalHeaderHeight:r,appWindowHeight:i?.height??"100vh",pageBarHeight:o,zoomScale:a});return s},e=>lr(e),e=>cr(e),e=>tr(e,{format:"decimal"})],((e,t,n,r,i)=>({width:e,height:t,marginTop:n,marginLeft:r,maxWidth:1!==i?e:null,transform:`translate(0px, 0px) scale(${i})`,transformOrigin:"top center"}))),gr=Qn([e=>e],(e=>e.getIn(["attributeState"],"value"))),br=Qn([e=>e],(e=>e.getIn(["breakpoint"],"desktop"))),yr=(e,t)=>{let n=0;const r=["sidebarLeft","sidebarRight"].find((n=>e.elements[n].props?.rowIds?.includes(t))),i=e.getIn(["sidebarRows",t,"dimension","height"]);if(i)n=i;else{const i=(e.getIn(["window","height","top","value"])??0)-(e.getIn(["elements","adminBar","visible"])?e.getIn(["elements","adminBar","dimension","height"])??0:0)-(e.getIn(["elements","brandedModalHeader","visible"])?e.getIn(["elements","brandedModalHeader","dimension","height"])??0:0)-(e.getIn(["elements","pageBar","dimension","height"])??0),o=e.getIn(["elements",r,"props","rowIds"]);let s=0,d=0;if(o?.length>1){const n=[];o.forEach((r=>{const i=e.getIn(["sidebarRows",r,"dimension","height"]);t!==r&&i&&n.push(i),i||d++})),s=(0,a.sum)(n)}n=d?(i-s)/d:i-s}return n},wr=(e,t)=>{const n={top:0,left:0},r=["sidebarLeft","sidebarRight"].find((n=>e?.elements?.[n]?.props?.rowIds?.includes(t))),{adminBar:i,sidebarRight:o,pageBar:a}=rr(e);n.left="sidebarLeft"===r?0:e?.window?.width?.top?.value-o?.dimension?.width,n.top=i?.dimension?.height+a?.dimension?.height;const s=e?.elements?.[r]?.props?.rowIds?.asMutable()??[],d=s.indexOf(t),u=-1!==d?s.slice(0,d):s;return u.length>0&&u.forEach((t=>{const r=yr(e,t);n.top+=r})),n},Ir=(e,t={type:"multiInstanceModal",width:400})=>{const n=[],r=t?.width??400,i="singleInstanceModal"===t?.type;return["sidebarLeft","sidebarRight"].forEach((t=>{const o="sidebarRight"===t,a=e?.elements?.[t]?.dimension?.width;if(e?.elements?.[t]?.visible){const{builderBar:s}=e?.elements;e?.elements?.[t]?.props?.rowIds?.forEach((d=>{const u=wr(e,d),c=yr(e,d),l=e?.elements?.[t]?.props?.rowIds?.indexOf(d),p=l===e?.elements?.[t]?.props?.rowIds?.length-1,f=!i&&(e?.sidebarRows?.[d]?.multiModal??!0),m={id:d,type:"sidebar-row",top:u.top-4,left:o?u.left-r:u.left,width:o?a+r:a+s?.dimension?.width,height:f?8:p?c/2:c-4},h={id:d,type:"sidebar-modal",top:u.top+4,left:o?u.left-r:u.left,width:o?a+r:a+s?.dimension?.width,height:p?c-8:c-4};if(f?n.push(m,h):n.push(m),p){const e={id:d,type:"sidebar-row-last",top:f?u.top+c-8:u.top+c-c/2,left:o?u.left-r:u.left,width:o?a+r:a+s?.dimension?.width,height:f?8:c/2};n.push(e)}}))}else{const{adminBar:i,pageBar:a}=e?.elements;n.push({id:t,type:"sidebar",top:i?.dimension?.height+a?.dimension?.height,left:o?e?.window?.width?.top?.value-r:0,width:o?r:r/4,height:e?.window?.height?.top?.value-(i?.dimension?.height+a?.dimension?.height)})}})),n},_r=e=>e.getIn(["sidebarModalDraggedToUndock"]),Sr=e=>0<e.getIn(["globalPreload"]),Er=(e,t,n)=>(n??Ir(e)).find((e=>{const{left:n,top:r,width:i,height:o}=e,a=n+i,s=r+o,d=t.left>=n&&t.left<=a,u=t.top>=r&&t.top<=s;return d&&u}))??!1,Rr=e=>{const t=e?.sidebarHoveredDockArea;return!!t&&("sidebar"===t?.type&&t?.id)},Or=(e,t)=>{const n=e?.sidebarHoveredDockArea;return!(!n||"object"!=typeof n)&&(n?.id===t&&("sidebar"!==n?.type&&n?.type))},Mr=e=>e.getIn(["moduleInteraction","event"]),Ar=Qn([e=>e],(e=>e.getIn(["moduleInteraction","status"]))),kr=e=>e.getIn(["modulesPermissions"]),Tr=Qn([(e,t)=>ir(e,{elementName:"left"===t?"sidebarLeft":"sidebarRight",propertyGroup:"dimension",propertyName:"width"}),e=>ir(e,{elementName:"appFrame",propertyGroup:"props",propertyName:"minimumWidth"}),e=>ir(e,{elementName:"appArea",propertyGroup:"dimension",propertyName:"width"})],((e,t,n)=>n+e-t)),Nr=Qn([e=>e.getIn(["sidebarRows"]),e=>e.getIn(["elements"]),(e,t)=>t,(e,t)=>{const n=e.getIn(["sidebarRows"]);return Object.keys(n).find((e=>n[e].modalIds.includes(t)))},(e,t)=>{const n=e.getIn(["sidebarRows"]),r=Object.keys(n).find((e=>n[e].modalIds.includes(t)));return yr(e,r)},(e,t,n)=>n,(e,t,n,r)=>"number"==typeof r?r:0],((e,t,n,r,i,o="multiInstanceModal",a=0)=>{const s={};if(!r)return s;const d=["sidebarLeft","sidebarRight"].find((e=>t[e].props?.rowIds?.includes(r))),u="multiInstanceModal"===o?40:0;if(s.height=i-u,d){const e=t.getIn([d,"dimension","width"]),n=Math.max(a,e);n&&(s.width="sidebarLeft"===d?n-1:n)}return s})),Cr=(e,t)=>{const n=Object.keys(e.sidebarRows).find((n=>e.sidebarRows[n].modalIds.includes(t))),r=["sidebarLeft","sidebarRight"].find((t=>e?.elements?.[t]?.props?.rowIds?.includes(n)));return{sidebarRowId:n,sidebarName:r,active:e?.sidebarRows?.[n]?.activeModal===t}},Dr=Qn([e=>e.getIn(["sidebarRows"])],(e=>Object.values(e.asMutable({deep:!0})).map((e=>e.modalIds)).flat())),Pr=Qn([(e,t)=>{const n="left"===t?"sidebarLeft":"sidebarRight";return rr(e)?.[n]},(e,t)=>{const n="left"===t?"sidebarLeft":"sidebarRight";return e.getIn(["elements",n,"props","rowIds"])},(e,t)=>{const n="left"===t?"sidebarLeft":"sidebarRight";return e.getIn(["elements",n,"props","minimumWidth"])},e=>e.getIn(["sidebarRows"])],((e,t,n,r)=>{const i=t?.map((e=>r.getIn([e,"activeModal"])));return{activeModals:i,dimension:e?.dimension??{},minimumWidth:n,offset:e?.offset??{},rowIds:t}})),Lr=Qn([e=>e.getIn(["sidebarRows"]),(e,t)=>t],((e,t)=>e.getIn([t]))),xr=(e,t,n)=>({max:e.getIn(["sidebarRows",t,"maximum",n]),min:e.getIn(["sidebarRows",t,"minimum",n])}),Wr=(e,t)=>{const n=e?.sidebarRows??{},r=(0,a.pick)(n,t);return(0,a.mapValues)(r,(e=>e?.dimension?.height??null))},Br=(e,t)=>["sidebarLeft","sidebarRight"].find((n=>e?.elements?.[n]?.props?.rowIds?.includes(t))),jr=e=>e.getIn(["views"]),Fr=e=>e.getIn(["windowAutoScroll"]),Hr=(e,t)=>{const n=e.getIn(["interactionLayers"]).asMutable(),r=Object.keys((0,a.pickBy)(n,Boolean));return(0,a.includes)(r,e.getIn(["interactionLayersMap"]).getIn(t))},Ur=(e,t,n)=>{const r=e.getIn(["modulesPermissions"]);return!!(0,a.get)(r,[t,n])},zr=Qn([e=>e.getIn(["elements","appFrame","props","resize","status"]),(e,t)=>e.getIn(["elements","appFrame","props","resize","triggeringElement"])===t.triggeringElement,e=>e.getIn(["elements","appFrame","props","resize","position"])],((e,t,n)=>!(!e||!t)&&n)),Vr=Qn([(e,t)=>e.getIn(["elements",t])],(e=>e?.visible??!0)),Gr=(e,t)=>e.getIn(["interactionLayers",t]),$r=Qn([e=>e.getIn(["sidebarRows"]),(e,t)=>t],((e,t)=>Object.values(e).some((e=>e.modalIds.includes(t))))),Zr=(e,t)=>{if(e.getIn(["window",t.params.attr,t.params.windowLocation,"setter"])!==t?.params?.setter)return e;let n=e.getIn(["window",t.params.attr,t.params.windowLocation,"value"]);const r=sr(e),i=dr(e,r);if("width"===t.params.attr)"app"===t.params.windowLocation&&(n=(0,rt.parseAppFrameWidthValue)(i.width,or(e,"width","top")));return e.setIn(["window",t.params.attr,t.params.windowLocation,"value"],n).setIn(["window",t.params.attr,t.params.windowLocation,"setter"],"visualBuilder")},qr=(e,t)=>{const{attr:n,value:r,windowLocation:i,setter:o}=t.params,s=t.params?.allowBreakpointSwitching??!1;if(r===e.getIn(["window",n,i,"value"]))return e;const d=sr(e),u=dr(e,d),c="app"===i,l="width"===n,p="desktop"===e.getIn(["view"]),f=["wireframe","desktop"].includes(d),m="user"===o,h="visualBuilder"===o,v=u?.minimum?.width,g=u?.maximum?.width,b=ir(e,{elementName:"appArea",propertyGroup:"dimension",propertyName:"width"});if(m&&c&&l){if(r>g||r<v){if(r>mr(e))return e;if(s){const t=((e,t)=>{if(300>=t)return"phone";const n=(e=>{const t={};return["desktop","tablet","phone"].forEach((n=>{const r={name:n,maximum:{width:e.getIn(["views",n,"maximum","width"])},minimum:{width:e.getIn(["views",n,"minimum","width"])}};t[n]=r})),t})(e);return(0,a.find)(n,(e=>{const n=e.minimum.width<=t,r=t<=e.maximum.width;return n&&r}))?.name??"desktop"})(e,r);return e.setIn(["view"],t).setIn(["breakpoint"],t).setIn(["window","width","app","value"],r).setIn(["window","width","app","setter"],"user")}return r>=g?e.setIn(["window","width","app","value"],g):r<=v?e.setIn(["window","width","app","value"],v):e}if(!f&&r>=b)return e.setIn(["window","width","app","value"],b)}if(h&&c&&l){if(r<v){const t=e.setIn(["window",n,i,"value"],v).setIn(["window",n,i,"setter"],o),r=fr(t,{view:d,format:"percentage",roundingUpPercentage:!1});return e.setIn(["window",n,i,"value"],v).setIn(["window",n,i,"setter"],o).setIn(["elements","appFrame","props","zoom","value"],r)}if(r>g){const t=fr(e,{format:"percentage",view:d,roundingUpPercentage:!1}),n=["wireframe","desktop"].includes(d)?r:e.getIn(["views","desktop","maximum","width"]),i=e.getIn(["elements","appFrame","props","zoom","value"]),o=e.getIn(["elements","appFrame","props","zoom","setter"]),a=e.getIn(["views",d,"minimum","width"]),s="user"===o&&r>=a?i:t;return e.setIn(["elements","appFrame","props","zoom","value"],s).setIn(["window","width","app","value"],n).setIn(["views","desktop","maximum","width"],n).setIn(["views","wireframe","maximum","width"],n)}if(!f&&r>=b)return e.setIn(["window","width","app","value"],b)}const y=e.setIn(["window",n,i,"value"],r).setIn(["window",n,i,"setter"],o),w=c&&l&&p?mr(y):e.getIn(["views","desktop","maximum","width"]),I=fr(y,{format:"percentage",view:d,roundingUpPercentage:!1}),_="user"===e.getIn(["elements","appFrame","props","zoom","setter"])?e.getIn(["elements","appFrame","props","zoom","value"]):I;return e.setIn(["elements","appFrame","props","zoom","value"],_).setIn(["views","wireframe","maximum","width"],w).setIn(["views","desktop","maximum","width"],w).setIn(["window",n,i,"value"],r).setIn(["window",n,i,"setter"],o)};var Yr=n(33042);const Jr="desktop",Xr={add:!0,delete:!0},Kr="visualBuilder",Qr=n.n(Yr)()({attributeState:"value",breakpoint:Jr,view:Jr,windowAutoScroll:{direction:!1,speed:10},interactionLayers:{basic:!0,parentHighlightOnHover:!1,actionOnHover:!0,parentActionOnHover:!0,xRay:!1},interactionLayersMap:{module:{optionsOnHover:"actionOnHover",highlightOnHover:"basic",xRayHighlight:"xRay"},parent:{optionsOnHover:"parentActionOnHover",highlightOnHover:"parentHighlightOnHover",xRayHighlight:"xRay"}},views:{wireframe:{width:"100vw",height:"100vh",label:(0,Ce.__)("Wireframe","et_builder"),icon:"divi/wireframe",breakpoint:Jr,maximum:{width:1400},minimum:{width:300}},desktop:{width:"100vw",height:"100vh",label:(0,Ce.__)("Desktop","et_builder"),icon:"divi/desktop",breakpoint:Jr,maximum:{width:1400},minimum:{width:981}},tablet:{width:"768px",height:"100vh",label:(0,Ce.__)("Tablet","et_builder"),icon:"divi/tablet",breakpoint:"tablet",maximum:{width:980},minimum:{width:479}},phone:{width:"479px",height:"100vh",label:(0,Ce.__)("Phone","et_builder"),icon:"divi/phone",breakpoint:"phone",maximum:{width:479},minimum:{width:300}}},window:{width:{top:{setter:Kr,value:0},app:{setter:Kr,value:0}},height:{top:{setter:Kr,value:0},app:{setter:Kr,value:0}},pageXOffset:{top:{setter:Kr,value:0},app:{setter:Kr,value:0}},pageYOffset:{top:{setter:Kr,value:0},app:{setter:Kr,value:0}},documentWidth:{top:{setter:Kr,value:0},app:{setter:Kr,value:0}},documentHeight:{top:{setter:Kr,value:0},app:{setter:Kr,value:0}}},elements:{adminBar:{visible:!0,dimension:{height:32},offset:{top:0,left:0}},brandedModalHeader:{visible:!1,dimension:{height:32},offset:{left:0}},pageBar:{visible:!0,dimension:{height:48},offset:{left:0}},builderBar:{visible:!0,dimension:{width:48},offset:{left:0}},sidebarLeft:{visible:!1,dimension:{width:200},props:{rowIds:[],minimumWidth:0}},appArea:{visible:!0},appFrame:{visible:!0,dimension:{width:0,height:0},props:{minimumWidth:300,zoom:{value:100,setter:Kr},resize:{status:!1,triggeringElement:!1,position:!1}}},sidebarRight:{visible:!0,dimension:{width:280},offset:{right:0},props:{rowIds:["row-1"],minimumWidth:0}}},globalPreload:0,sidebarRows:{"row-1":{id:"row-1",modalIds:["divi/page-settings"],activeModal:"divi/page-settings",multiModal:!1}},sidebarHoveredDockArea:!1,sidebarModalDraggedToUndock:!1,moduleInteraction:{status:"on",event:null},modulesPermissions:{root:Xr,section:Xr,"fullwidth-section":Xr,"specialty-section":Xr,row:Xr,"row-inner":Xr,column:Xr,"specialty-column":Xr,"column-inner":Xr,module:Xr,"fullwidth-module":Xr,"child-module":Xr,unsupported:Xr,layout:Xr}}),ei=(e,t)=>{const n=(0,nt.applyFilters)("divi.appUi.validAttributeStates",["value","hover","sticky"]);switch(t.type){case"DOCK_MODAL_TO_SIDEBAR":return((e,t)=>{const{modalName:n,modalType:r,sidebarName:i}=t;if(!["sidebarLeft","sidebarRight"].includes(i))return e;const o=Vn(r),a=t?.newSidebarRowId??Bt(),s={id:a,modalIds:[n],activeModal:n,multiModal:o};return e.setIn(["elements",i,"visible"],!0).setIn(["elements",i,"props","rowIds"],[a]).setIn(["sidebarRows",a],s)})(e,t);case"DOCK_MODAL_TO_SIDEBAR_ROW":return((e,t)=>{const{modalName:n,modalType:r,sidebarRowId:i,position:o}=t;if(!e?.getIn(["sidebarRows",i]))return e;const a=Vn(r),s=["sidebarLeft","sidebarRight"].find((t=>e?.elements?.[t]?.props?.rowIds?.includes(i))),d=e.getIn(["elements",s,"props","rowIds"])?.asMutable()??[],u=d.indexOf(i);if("above"===o){const r=t?.newSidebarRowId??Bt(),i={id:r,modalIds:[n],activeModal:n,multiModal:a};return d.splice(u,0,r),e.setIn(["elements",s,"props","rowIds"],d).setIn(["sidebarRows",r],i)}if("inside"===o){const t=(e?.getIn(["sidebarRows",i,"modalIds"])?.asMutable()??[]).concat(n);return e.setIn(["sidebarRows",i,"modalIds"],t).setIn(["sidebarRows",i,"activeModal"],n)}if("below"===o){const r=t?.newSidebarRowId??Bt(),i={id:r,modalIds:[n],activeModal:n,multiModal:a};return d.splice(u+1,0,r),e.setIn(["elements",s,"props","rowIds"],d).setIn(["sidebarRows",r],i)}return e})(e,t);case"ADD_SIDEBAR_ROW":return((e,t)=>{const n=t?.newSidebarRowId??Bt(),r={id:n,modalIds:t.modal?[t.modal]:[],activeModal:t.modal},i="left"===t.sidebarPosition?"sidebarLeft":"sidebarRight",o=e.getIn(["elements",i,"props","rowIds"])?.asMutable()??[],a=[...o.slice(0,t.order),n,...o.slice(t.order,o.length)];return e.setIn(["elements",i,"props","rowIds"],a).setIn(["sidebarRows",n],r)})(e,t);case"REMOVE_SIDEBAR_ROW":return Gn(e,t);case"REPLACE_SIDEBAR_MODAL":return((e,t)=>{const{modalName:n,overwrittenModalName:r}=t,i=Cr(e,r);if(i){const t=e.getIn(["sidebarRows",i?.sidebarRowId,"modalIds"])?.indexOf(r),o=r===e.getIn(["sidebarRows",i?.sidebarRowId,"activeModal"]);if(-1<t)return o?e.setIn(["sidebarRows",i?.sidebarRowId,"modalIds",t],n).setIn(["sidebarRows",i?.sidebarRowId,"activeModal"],n):e.setIn(["sidebarRows",i?.sidebarRowId,"modalIds",t],n)}return e})(e,t);case"UNDOCK_MODAL_FROM_SIDEBAR_ROW":return((e,t)=>{const{modalName:n,sidebarRowId:r}=t,i=e?.sidebarRows?.[r]?.modalIds.asMutable()??[],o=i.filter((e=>e!==n)),a=i.indexOf(n),s=e?.sidebarRows?.[r]?.activeModal,d=n===s?o.length?o[a]?o[a]:o[o.length-1]:"":s,u=e.setIn(["sidebarRows",r,"modalIds"],o).setIn(["sidebarRows",r,"activeModal"],d);return o.length>0?u:Gn(u,{type:"REMOVE_SIDEBAR_ROW",sidebarName:["sidebarLeft","sidebarRight"].find((t=>e?.elements?.[t]?.props?.rowIds?.includes(r))),sidebarRowId:r})})(e,t);case"RESET_STATE":return t?.initialState?t.initialState:Qr;case"RESET_WINDOW":return Zr(e,t);case"SET_APP_FRAME_RESIZE_STATUS":return e.setIn(["elements","appFrame","props","resize","status"],t.params.status).setIn(["elements","appFrame","props","resize","triggeringElement"],t.params.triggeringElement);case"SET_ATTRIBUTE_STATE":return(0,a.isArray)(n)&&(0,a.includes)(n,t.attributeState)?e.setIn(["attributeState"],t.attributeState):e;case"SET_INTERACTION_LAYER":return e.setIn(["interactionLayers",t.params.name],t.params.active);case"SET_VIEW":return((e,t)=>{const n=e.getIn(["views",t.view,"breakpoint"],"desktop"),r="desktop"===n?e.getIn(["attributeState"]):"value",i=e.setIn(["attributeState"],r).setIn(["view"],t.view).setIn(["breakpoint"],n);return or(e,"width","app")?Zr(i,{type:"RESET_WINDOW",params:{attr:"width",windowLocation:"app",setter:"user"}}):i})(e,t);case"SET_WINDOW":return qr(e,t);case"SET_WINDOW_AUTO_SCROLL":return e.setIn(["windowAutoScroll","direction"],t.direction).setIn(["windowAutoScroll","distance"],t.distance).setIn(["windowAutoScroll","location"],t.location);case"SET_GLOBAL_PRELOAD":{const n=e.getIn(["globalPreload"]);return!0===t.globalPreload?e.setIn(["globalPreload"],n+1):0<n?e.setIn(["globalPreload"],n-1):e}case"SET_ELEMENT_VISIBILITY":return e.setIn(["elements",t.elementName,"visible"],t.visibility);case"SET_ELEMENT_PROPERTY":return((e,t)=>{const n=e.setIn(["elements",t.elementName,t.propertyGroup,t.propertyName],t.value);let r=n.getIn(["elements","appFrame","props","zoom","value"]);const i=["sidebarLeft","sidebarRight"].includes(t.elementName),o="dimension"===t.propertyGroup,a="width"===t.propertyName;if(i&&o&&a){const e=sr(n);["desktop","wireframe"].includes(e)||ir(n,{elementName:"appArea",propertyGroup:"dimension",propertyName:"width"})<(dr(n,e)?.minimum?.width??0)&&(r=fr(n,{view:e,format:"percentage",roundingUpPercentage:!1}))}return n.setIn(["elements","appFrame","props","zoom","value"],r)})(e,t);case"SET_SIDEBAR_MINIMUM_WIDTH":return e.setIn(["elements",t.params.sidebarName,"props","minimumWidth"],t.params.minimumWidth);case"SET_SIDEBAR_ROW_ACTIVE_MODAL":return(0,a.includes)(e.getIn(["sidebarRows",t.sidebarRowId,"modalIds"]),t.activeModal)?e.setIn(["sidebarRows",t.sidebarRowId,"activeModal"],t.activeModal):e;case"SET_SIDEBAR_ROW_HEIGHT":return e.setIn(["sidebarRows",t.sidebarRowId,"dimension","height"],t.height);case"SET_HOVERED_SIDEBAR_DOCKING_AREA":return e.setIn(["sidebarHoveredDockArea"],t.sidebarDockingArea);case"SET_DRAGGED_TO_UNPIN_SIDEBAR_MODAL":return((e,t)=>{const{modalName:n}=t;if(!1===n)return e.setIn(["sidebarModalDraggedToUndock"],!1);const r=Object.keys(e.sidebarRows).find((t=>e.sidebarRows[t].modalIds.includes(n)));return r?e.setIn(["sidebarModalDraggedToUndock"],{sidebarRowId:r,modalName:n}):e})(e,t);case"SET_SIDEBAR_ROW_RESIZING_STATUS":return e.setIn(["sidebarRows",t.sidebarRowId,"resizing"],t.status);case"SET_APP_FRAME_ZOOM":return((e,t)=>{const n=t?.params?.value,r=t?.params?.setter??"visualBuilder",i=(0,a.isNumber)(n)?n:parseFloat(n),o=mr(e.setIn(["elements","appFrame","props","zoom","value"],i)),s=ir(e,{elementName:"appFrame",propertyGroup:"dimension",propertyName:"width"}),d=Math.max(o,s),u=ar(e,{attr:"width",windowLocation:"app"});return ur(e,"desktop")&&!u?e.setIn(["elements","appFrame","props","zoom","value"],i).setIn(["elements","appFrame","props","zoom","setter"],r).setIn(["window","width","app","value"],o).setIn(["views","wireframe","maximum","width"],d).setIn(["views","desktop","maximum","width"],d):e.setIn(["elements","appFrame","props","zoom","value"],i).setIn(["elements","appFrame","props","zoom","setter"],r).setIn(["views","wireframe","maximum","width"],o).setIn(["views","desktop","maximum","width"],o)})(e,t);case"UPDATE_SIDEBAR_ROW_LIMITS":return((e,t)=>{let n=e;const{sidebarRowId:r}=t,i=e.elements.adminBar.dimension.height+e.elements.pageBar.dimension.height,o=e.window.height.top.value-i,s=["sidebarLeft","sidebarRight"].find((t=>e?.elements?.[t]?.props?.rowIds?.includes(r))),d=e?.elements?.[s]?.props?.rowIds??[];if(d.length>1){const t=d.map((t=>t===r?0:e?.sidebarRows?.[t]?.dimension?.height??200)),i=o-(0,a.sum)(t);n=e.setIn(["sidebarRows",r,"maximum","height"],i).setIn(["sidebarRows",r,"minimum","height"],200)}else n=e.setIn(["sidebarRows",r,"maximum","height"],o).setIn(["sidebarRows",r,"minimum","height"],200);return n})(e,t);case"TOGGLE_MODULE_INTERACTION":return e.setIn(["moduleInteraction","status"],t.status);case"ON_MODULE_INTERACTION_EVENT":return e.setIn(["moduleInteraction","event"],t.event);case"SET_MODULE_PERMISSION":return e.setIn(["modulesPermissions",t.moduleType,t.permissionType],t.permissionValue);default:return e}},ti=(n=Qr)=>{if((0,s.select)("divi/settings")||(0,cn.registerSettingsStore)(),(0,s.select)("divi/app-ui"))return;const r=(0,s.select)("divi/settings").getSetting(["preferences","viewMode"]),i="wireframe"===r?"desktop":r;"desktop"!==r&&(n=n.setIn(["view"],r).setIn(["breakpoint"],i),f()("html").attr("data-et-app-view",r));const o=(0,s.registerStore)("divi/app-ui",{actions:e,reducer:ei,selectors:t,initialState:n});if((0,un.applyEffects)(o,zn),d.isIframe){d.topWindow.jQuery(".et-tb-branded-modal__header").length&&(0,s.dispatch)("divi/app-ui").setElementVisibility({elementName:"brandedModalHeader",visibility:!0})}(0,s.dispatch)("divi/app-ui").setElementProperty({elementName:"adminBar",propertyGroup:"dimension",propertyName:"height",value:pt()})},ni=()=>{const e={top:d.topWindow,app:window},t=(0,s.select)("divi/settings").getSetting(["layout","remoteItemId"]);(0,a.forEach)(e,((e,t)=>{const n=()=>{const n=(0,s.select)("divi/app-ui").isUserDefinedWindowProperty({attr:"width",windowLocation:t}),r=(0,s.select)("divi/app-ui").isUserDefinedWindowProperty({attr:"height",windowLocation:t});n||(0,s.dispatch)("divi/app-ui").setWindow({windowLocation:t,attr:"width",value:e.jQuery(e).innerWidth(),setter:"visualBuilder"}),r||(0,s.dispatch)("divi/app-ui").setWindow({windowLocation:t,attr:"height",value:e.jQuery(e).innerHeight(),setter:"visualBuilder"})};n(),e.addEventListener("resize",(()=>{n()}));(0,s.dispatch)("divi/app-ui").setWindow({windowLocation:t,attr:"pageXOffset",value:e.pageXOffset,setter:"visualBuilder"}),(0,s.dispatch)("divi/app-ui").setWindow({windowLocation:t,attr:"pageYOffset",value:e.pageYOffset,setter:"visualBuilder"})})),t&&(0,s.dispatch)("divi/app-ui").undockModalFromSidebarRow({modalName:"divi/page-settings",sidebarRowId:"row-1"})}}(),(window.divi=window.divi||{}).appUi=r}();